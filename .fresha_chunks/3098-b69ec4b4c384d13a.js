try{!function(){var e="u">typeof window?window:"u">typeof global?global:"u">typeof globalThis?globalThis:"u">typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="14d27b45-71fd-4d21-90c8-35e4b0641b44",e._sentryDebugIdIdentifier="sentry-dbid-14d27b45-71fd-4d21-90c8-35e4b0641b44")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3098],{28951:e=>{e.exports={self:"ClaimGiftCardModal_self__7cwgx",legacy:"ClaimGiftCardModal_legacy__AHtKt"}},53244:(e,t,r)=>{"use strict";r.d(t,{y$:()=>A});var a=r(63973),n=r(8264),i=r(81503),s=r(68589),l=r.n(s),o=r(86297),d=r.n(o),u=r(72223),c=r.n(u),_=r(21031),m=r(33938);let f=/^(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})$/i,g=/^(https?:\/\/(?:www\.|(?!www))?[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|(www\.)?[a-zA-Z0-9]+\.[^\s]{2,})$/i,h=/\d+/,b=/\D+/,v=["FR","CY","GR","LT","MT","IT","ES","LU","SI","AT","NL","DE","IE","LV","FI","SK","BE","EE","PT"],w=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{for(let r=0;r<t.length;r+=1){let a=t[r](e);if(a)return a}}},C=(e,t)=>r=>c()(String(r||"").trim(),{min:e})?void 0:t||(0,_.__)("Must be longer than or equal to %{minLength} characters",{minLength:e}),y=()=>e=>e&&b.test(e)?void 0:(0,_.__)("Must contain a letter"),p=()=>e=>e&&h.test(e)?void 0:(0,_.__)("Must contain a number"),A={abnNumber:e=>{let t=(0,_.__)("Enter your 11-digit ABN number");if(!e)return;let r=String(e);if(11!==r.length||[10,1,3,5,7,9,11,13,15,17,19].reduce((e,t,a)=>e+t*(parseInt(r[a],10)-!a),0)%89!=0)return t},ascii:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?/^[\x00-\xFF]*$/:/^[\x00-\x7F]*$/;return e=>t.test(e)?void 0:(0,_.__)("Some characters are invalid")},birthDate:function(){let{maxAge:e=100}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{maxAge:100};return t=>{let r=Number(t.day),a=Number(t.month),n=Number(t.year),i=a&&n?new Date(n,a,0).getDate():31,s=new Date().getFullYear();if(r||a||n){if(!r||r>i)return(0,_.__)("Enter a valid day");if(!a||a<=0||a>12)return(0,_.__)("Enter a valid month");if(!n||s-n>e||n>s)return(0,_.__)("Enter a valid year")}}},caGstNumber:e=>{if(e&&(!(e.length>=15)||!(e.length<=18)))return(0,_.__)("GST number needs to have between 15 and 18 characters")},checkoutComIban:e=>t=>t.startsWith(e)?l().isValid(t)?void 0:(0,_.__)("Invalid IBAN number"):(0,_.__)("IBAN must start with %{countryCode}",{countryCode:e}),creditCard:()=>e=>/^[0-9]{12,19}$/.test(e.replace(/\s/g,""))?void 0:(0,_.__)("Card number is too short"),CVV:()=>e=>{if(!c()((e||"").trim(),{min:3}))return(0,_.__)("CVV must have at least 3 digits")},email:e=>""===e||d()(e||"")?void 0:(0,_.__)("Email format invalid"),iban:e=>l().isValid(e)?void 0:(0,_.__)("Invalid IBAN number"),ibanWithCountryCode:e=>t=>{let r=t.slice(0,2);return v.includes(e)&&v.includes(r)||r===e?l().isValid(t)?void 0:(0,_.__)("Invalid IBAN number"):(0,_.__)("Your IBAN does not match your Country Code")},includesDigit:p,includesLetter:y,isDateAfter:function(e,t){return(0,n.d)((0,m._U)(e),t)?void 0:(0,_.__)("Must be after %{date}",{date:(0,m.re)(t)})},isDateBefore:function(e,t){return(0,a.Y)((0,m._U)(e),t)?void 0:(0,_.__)("Must be before %{date}",{date:(0,m.re)(t)})},maxLength:(e,t)=>r=>c()(String(r||"").trim(),{max:e})?void 0:t||(0,_.__)("Must be shorter than %{maxLength} characters",{maxLength:e+1}),minLength:C,nipNumber:e=>e?10!==e.length?(0,_.__)("NIP number needs to have 10 digits"):[6,5,7,2,3,4,5,6,7].reduce((t,r,a)=>t+r*parseInt(e[a],10),0)%11!==Number(e[9])?(0,_.__)("Invalid NIP number"):void 0:void 0,nzGstNumber:e=>{if(e&&(!(e.length>=8)||!(e.length<=9)))return(0,_.__)("GST number needs to have between 8 and 9 characters")},option:(e,t)=>r=>e.some(e=>(t?(0,i.J)(e,t):e)===r)?void 0:(0,_.__)("Select valid option"),password:function(){let{required:e=!1,minLength:t=8}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{minLength:8},r=[{id:"minLength",message:7===t?(0,_.__)("At least 7 characters"):(0,_.__)("At least 8 characters"),validator:C(t)},{id:"digit",message:(0,_.__)("Contains a number"),validator:p()},{id:"letter",message:(0,_.__)("Contains a letter"),validator:y()}];return{validators:r,validate:t=>e||t?w(...r.map(e=>e.validator))(t):void 0}},required:e=>t=>{if(!("string"==typeof t?t.trim():t))return"object"==typeof e&&"message"in e?e.message:(0,_.__)("This field is required")},trnNumber:e=>{if(e&&15!==e.length)return(0,_.__)("TRN number needs to have 15 digits")},usEinNumber:e=>{if(!(!e||/^\d{2}-\d{7}$/.exec(e)))return(0,_.__)("Enter your 9-digit EIN number")},vatNumber:e=>{if(e&&(!(e.length>=9)||!(e.length<=12)))return(0,_.__)("VAT number needs to have between 9 and 12 digits")},websiteUrl:e=>!e||f.test(e)?void 0:(0,_.__)("Add a valid website URL"),websiteUrlOptionalProtocol:e=>!e||g.test(e)?void 0:(0,_.__)`Add a valid website URL`,minValue:(e,t,r)=>a=>{if(e&&!(parseFloat(a)>=e))return r||(0,_.__)("Minimum %{minValue}",{minValue:t})},maxValue:(e,t,r)=>a=>{if(e&&!(parseFloat(a)<=e))return r||(0,_.__)("Canât exceed %{maxValue}",{maxValue:t})},isInteger:e=>{if(!Number.isInteger(Number(e)))return(0,_.__)("Must be a whole number")}}},60259:(e,t,r)=>{"use strict";r.d(t,{M:()=>i});var a=r(14232);let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let r=0;r<t.length;r+=1){let a=t[r](e);if(a)return a}};function i(e){let[t,r]=(0,a.useState)(e?.initialValue??""),[i,s]=(0,a.useState)(void 0),l=(0,a.useMemo)(()=>e?.validators||[],[e?.validators]),o=e?.validateOnBlur??!0,d=e?.validateOnChange??!0,u=e?.onChange,c=(0,a.useRef)(!1),_=(0,a.useCallback)(()=>{let e=n(t,l);return s(e),!e},[l,t]),m=(0,a.useCallback)(e=>{c.current=!0,r(e)},[]),f=(0,a.useCallback)(e=>{m(e.target.value),u?.({name:e.target.name,value:e.target.value})},[u,m]),g=(0,a.useCallback)(()=>{o&&_()},[_,o]),h=(0,a.useCallback)(()=>c.current,[]);return(0,a.useEffect)(()=>{d&&c.current&&_()},[t]),{value:t,error:i,isDirty:h,reset:(0,a.useCallback)(()=>{c.current=!1,r(e?.initialValue??""),s(void 0)},[e?.initialValue]),updateError:s,updateValue:m,validate:_,onBlur:g,onChange:f}}},93098:(e,t,r)=>{"use strict";r.d(t,{GI:()=>E,K9:()=>p,W2:()=>A});var a=r(37876),n=r(28933),i=r(93485),s=r(64820),l=r(18577),o=r(14083),d=r(78430),u=r(51650),c=r(14232),_=r(4358),m=r(30475),f=r(3491),g=r(21031),h=r(1438),b=r(60259),v=r(64449),w=r(53244),C=r(28951),y=r.n(C);let p=n.K9T;function A(e){let{asBuyer:t,onClaimed:r,onError:a,resetForm:n,onClaim:i,partScreenDialogRef:s,showToast:l=!0}=e,o=(0,v.Y)(),d=(0,c.useCallback)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(s?.current?.addErrorToast??o.addErrorToast)(...t)},[s,o.addErrorToast]),{addSuccessToast:u}=o;return{claimGiftCard:(0,c.useCallback)(async(e,s)=>{try{await i?.();let a=await (0,f.L)(p,{asBuyer:t,code:e,providerSlug:s});if(a?.errors?.length)throw 1===a.errors.length?a.errors[0]:a.errors;let o=(0,m.gy)(a.data.claimGiftCard);if(!o?.giftCard)throw Error("No gift card returned");l&&u((0,g.__)`Gift card successfully claimed`,{keepOnUnmount:!0}),await r(o.giftCard),n?.()}catch(e){if(["UNPROCESSABLE","BAD_USER_INPUT"].includes(e.extensions?.code)){let t=e.extensions?.formattedMessage;a?a(t):d(t,{keepOnUnmount:!0})}else(0,h.Oz)(e,{msg:"Could not claim gift card"},{source:"Payments"}),d(e.extensions?.formattedMessage??e.message??(0,g.__)`Something went wrong claiming the gift card, please try again later.`,{keepOnUnmount:!0})}},[d,u,t,r,a,n,l,i])}}let x=()=>{},E=e=>{let{giftCardCode:t,onClaimed:r,setOpen:n,isOpen:m,onClaim:f,useLegacyModal:h=!1,...v}=e,{error:C,onBlur:p,onChange:E,reset:N,updateError:I,validate:k,value:B}=(0,b.M)({initialValue:t||"",validators:[w.y$.required({message:(0,g.__)`Code is required`}),w.y$.maxLength(32)]}),T=(0,c.useRef)(null),{claimGiftCard:z}=A({onClaimed:r,onClaim:f,onError:I,partScreenDialogRef:T,resetForm:N}),V=(0,c.useRef)(null);(0,c.useEffect)(()=>{let e;return m&&!t&&V.current&&(e=setTimeout(()=>{V.current?.focus()},100)),()=>clearTimeout(e)},[m,t]);let L=(0,c.useCallback)(async()=>{k()&&await z(B)},[z,k,B]),S=(0,c.useCallback)(e=>{n(e),e||N()},[N,n]),M=(0,c.useCallback)(()=>(v.onBack?.(),N(),Promise.resolve()),[v.onBack,N]),Z=(0,c.useCallback)(()=>(n(!1),N(),Promise.resolve()),[n,N]),D=(0,a.jsx)(s.$,{isFull:!0,onAction:L,size:"l",variant:"primary",children:t?(0,g.__)`Claim`:(0,g.__)`Confirm`}),j=(0,a.jsx)(u.A,{ref:V,qaType:"gift-card-code",disabled:!!t,error:m?C:void 0,isRequired:!0,showRequiredHint:!1,onBlur:p,onChange:E,value:B}),O=(0,a.jsx)(d.E,{color:"neutralFaded",font:"body-s-regular",children:(0,g.__)`Enter the code on your gift card`});return h?(0,a.jsxs)(l.y,{title:(0,g.__)`Add a gift card`,isOpen:m,setOpen:S,onOpen:x,onClose:Z,children:[(0,a.jsx)(l.y.Header,{backButtonIconSlot:v.onBack?i.A:void 0,onClose:Z,onBack:v.onBack?M:void 0}),(0,a.jsx)(l.y.Body,{children:(0,a.jsxs)(o.B,{as:"div",unsafeClassName:y().legacy,direction:"vertical",gap:"300",children:[O,j]})}),(0,a.jsx)(l.y.Footer,{children:D})]}):(0,a.jsx)(_.Yf,{...v,footer:D,isOpen:m,ref:T,setOpen:S,children:(0,a.jsxs)(o.B,{as:"div",direction:"vertical",gap:"300",unsafeClassName:y().self,children:[(0,a.jsxs)(o.B,{as:"div",direction:"vertical",gap:"100",children:[(0,a.jsx)(d.E,{font:"header-l-semibold",children:(0,g.__)`Add a gift card`}),O]}),j]})})}}}]);
//# sourceMappingURL=3098-b69ec4b4c384d13a.js.map