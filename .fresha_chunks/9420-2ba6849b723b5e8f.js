try{!function(){var e="u">typeof window?window:"u">typeof global?global:"u">typeof globalThis?globalThis:"u">typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6523b1a1-ef5e-477c-80b0-1b5d422037ad",e._sentryDebugIdIdentifier="sentry-dbid-6523b1a1-ef5e-477c-80b0-1b5d422037ad")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444,5649,6849,9420],{705:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});var n=i(37876),a=i(18173),s=i(14083),r=i(95386),o=i(2982),l=i(14232),d=i(21031),c=i(99069),u=i(69098);let m=e=>{let{fetchClaimResult:t,fetchPaymentCard:i,giftCardProviderSlug:m,handleLogin:p,claimableBookingId:h,claimableGiftCardCode:x,claimGiftCardAsBuyer:f,claimableSaleId:g}=e,{facebookSDK:y,googleSDK:_,appleSDK:j}=(0,c.Ay)(),b=(0,u.qg)({fetchClaimResult:t,fetchPaymentCard:i}),{addToast:v}=(0,r.v)(),w=(0,l.useMemo)(()=>[y,_,j].map(e=>({sdk:e,btnAction:async()=>{try{let{profile:t,result:i}=await b({sdk:e,bookingId:h,giftCardCode:x,claimGiftCardAsBuyer:f,giftCardProviderSlug:m,saleId:g});if(!t)throw Error("Successfully authenticated but no user returned");await p(t,i),setTimeout(()=>{v(t=>{let{key:i,...a}=t;return(0,n.jsx)(o.y,{...a,children:(0,d.__)("Successfully signed in with %{platform}",{platform:e.idCapitalized})},i)})},0)}catch(e){if(e instanceof Error){let{message:t}=e;v(e=>{let{key:i,...a}=e;return(0,n.jsx)(o.y,{...a,variant:"danger",children:t},i)})}}}})),[y,_,j,m,b,h,x,f,g,p,v]);return(0,n.jsx)(s.B,{gap:"150",display:"flex",as:"div",children:w.map(e=>{let{sdk:t,btnAction:i}=e;return t.state!==c.oA.DISABLED&&(0,n.jsx)(a.C,{type:t.id,onAction:i,qaType:`${t.id}-login`,isPending:t.state===c.oA.LOADING},t.id)})})}},964:e=>{e.exports={backdrop:"BottomBarCartPopup_backdrop__sQihX",backdropVisible:"BottomBarCartPopup_backdropVisible__ZjirT",bottomBar:"BottomBarCartPopup_bottomBar__oWpTb",expanded:"BottomBarCartPopup_expanded__lGECv",container:"BottomBarCartPopup_container__hLD7q",containerExpanded:"BottomBarCartPopup_containerExpanded__g3rFo",details:"BottomBarCartPopup_details__qddwh",expandableCard:"BottomBarCartPopup_expandableCard__Ko7lN",cardExpanded:"BottomBarCartPopup_cardExpanded__PzeYK",cardHeader:"BottomBarCartPopup_cardHeader__f6Mu6",cardHeaderWithTitle:"BottomBarCartPopup_cardHeaderWithTitle__hYvqd",cardHeaderTitle:"BottomBarCartPopup_cardHeaderTitle__yOuAY",cardHeaderTitleVisible:"BottomBarCartPopup_cardHeaderTitleVisible__9TTe_",cardTitle:"BottomBarCartPopup_cardTitle__9rGxi",cardItemsList:"BottomBarCartPopup_cardItemsList__46pMQ",cardContent:"BottomBarCartPopup_cardContent__B2vMS",cardFooter:"BottomBarCartPopup_cardFooter__GIDyb",clickableHeader:"BottomBarCartPopup_clickableHeader___1dyA",clickableHeaderHidden:"BottomBarCartPopup_clickableHeaderHidden__DAfS6",continueButtonWrapper:"BottomBarCartPopup_continueButtonWrapper__3TlpG",continueButtonWrapperExpanded:"BottomBarCartPopup_continueButtonWrapperExpanded__FyHK9"}},2875:(e,t,i)=>{"use strict";i.d(t,{o:()=>c});var n=i(82334),a=i(14232),s=i(6440),r=i(21031),o=i(56752),l=i(60259),d=i(53244);let c=function(){let{initialValues:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useMemo)(()=>(0,o.GZ)(),[]),i=(0,l.M)({initialValue:e?.phoneNumberField,validators:[e=>t.find(t=>{let{code:i}=t;return i===e})?d.y$.required({message:(0,r.__)("Mobile number is required")})(""):void 0],validateOnChange:!1}),c=(0,n.h)({value:i.value,onChange:i.updateValue,onBlur:i.onBlur,normalizeMobile:o.kK,options:t}),{isDirty:u}=i,{onPrefixChange:m}=c;return(0,a.useEffect)(()=>{let e=(0,r.lt)();if(!u()){let i=t.findIndex(t=>{let{alpha2:i}=t;return i===e}),n=t.findIndex(e=>{let{alpha2:t}=e;return t===(0,o.oO)(s.p.countryCode)?.alpha2});m({target:{selectedIndex:-1!==i?i:n}})}},[u,m,t]),{field:i,props:c}}},3195:(e,t,i)=>{"use strict";i.d(t,{X0:()=>y,w2:()=>_});var n=i(37876),a=i(80297),s=i(68734),r=i(6760),o=i(78430),l=i(49995),d=i(14232),c=i(75656),u=i(90298),m=i(36878),p=i(30475),h=i(21031),x=i(47773),f=i.n(x);let g=async e=>{let t=await fetch(e);return{url:e,data:await t.json()}},y=e=>{let{alt:t,animationUrl:i,variant:p="default",className:x,imageUrl:y,isAnimated:_,isLoading:j,onLoad:b,showSkeleton:v,isFreshaGiftCard:w,showFreshaThemeText:S=!1}=e,{data:C,error:k,isLoading:A}=(0,c.Ay)(_?i:null,g,{revalidateIfStale:!1}),E=C?.data&&C.url===i?C.data:null,[T,B]=(0,d.useState)(!1),P=(!(_&&i)||!!(E||k)&&!A)&&(!y||T);(0,d.useEffect)(()=>{P&&b?.()},[P,b]);let I=(0,d.useMemo)(()=>({animationData:E,rendererSettings:{preserveAspectRatio:"xMidYMid slice",progressiveLoad:!0}}),[E]);return(0,n.jsx)("span",{className:(0,l.A)(f().preview,f()[`preview--${p}`],x,P&&f()["preview--loaded"],(v||!P)&&f()["preview--skeleton"],j&&f()["preview--skeleton--animated"],(w||S)&&f()["preview--fresha-logo-card"],w&&!E&&!v&&f()["preview--fresha-logo-card--empty"]),children:(0,n.jsxs)(n.Fragment,{children:[y?S?(0,n.jsxs)("div",{className:f().preview__themeText,children:[(0,n.jsx)("div",{className:f().preview__themeText__logo,children:(0,n.jsx)(r.g,{color:"white",isSpotlightVisible:!1,size:"s"})}),(0,n.jsx)("div",{className:f().preview__themeText__value,children:(0,n.jsx)(o.E,{color:"onLoud",font:"header-l-semibold",children:(0,h.__)`Gift card`})}),(0,n.jsx)("picture",{className:(0,l.A)(f().preview__themeText__image),children:(0,n.jsx)("img",{alt:t||(0,h.__)`Gift card preview`,ref:e=>{e?.complete&&B(!0)},onLoad:()=>B(!0),src:y})})]}):(0,n.jsx)("picture",{className:(0,l.A)(f().preview__image,!w&&f()["preview__image--provider"]),children:(0,n.jsx)("img",{alt:t||(0,h.__)`Gift card preview`,ref:e=>{e?.complete&&B(!0)},onLoad:()=>B(!0),src:y})}):w?v?null:(0,n.jsx)("div",{className:f().preview__logo,children:(0,n.jsx)(u.o,{isSpotlightVisible:!1,height:"32px"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("picture",{className:(0,l.A)(f().preview__image,f()["preview__image--provider"]),children:(0,n.jsx)("img",{alt:t||(0,h.__)`illustration`,ref:e=>{e?.complete&&B(!0)},onLoad:()=>B(!0),src:s})}),(0,n.jsx)(a.o,{color:"onPrimary",size:"9xl",unsafeClassName:f().preview__icon})]}),!!(_&&E)&&(0,n.jsx)(m.a,{options:I,unsafeClassName:f().preview__image})]})})},_=e=>{let{as:t,className:i,data:a,isAnimated:s,isLoading:r,onClick:d,providerName:c,showSkeleton:u}=e,m=(0,p.gy)(a),x=m?.balance?.amount.formattedShort??m?.originalValue?.amount.formattedShort;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t,{className:(0,l.A)(f().self,u&&f()["self--skeleton"],u&&s&&f()["self--skeleton--animated"],i),..."button"===t&&{onClick:d,onKeyUp:e=>{"Enter"===e.key&&d?.()},type:"button"},children:[(0,n.jsx)(y,{animationUrl:m?.animationUrl,className:f().self__preview,imageUrl:m?.image?.url,isAnimated:s,isLoading:r??u,showSkeleton:u,showFreshaThemeText:!!m?.isFreshaTheme}),!u&&x&&(0,n.jsx)("div",{role:"note",className:f().self__info,children:(0,n.jsx)(o.E,{font:"header-xs-semibold",children:x})})]}),(0,n.jsxs)("div",{className:(0,l.A)(f().print),children:[(0,n.jsx)(o.E,{font:"header-xl-bold",unsafeClassName:f().print__balance,children:x}),(0,n.jsx)(o.E,{font:"header-s-semibold",unsafeClassName:f().print__name,children:c}),(0,n.jsxs)("div",{className:f().print__code,children:[(0,n.jsx)(o.E,{font:"body-s-medium",children:(0,h.__)`Code:`}),(0,n.jsx)(o.E,{font:"body-s-medium",children:m?.code})]}),(0,n.jsxs)("div",{className:f().print__expiry,children:[(0,n.jsx)(o.E,{font:"body-s-medium",children:(0,h.__)`Expires:`}),(0,n.jsx)(o.E,{font:"body-s-medium",children:m?.expiryDate?.formattedDate})]})]})]})}},4833:(e,t,i)=>{"use strict";i.d(t,{q:()=>c});var n=i(37876),a=i(19822),s=i(60340),r=i(14083),o=i(78430),l=i(40778),d=i.n(l);let c=e=>{let{_isAnimated:t,newUI:i=!1}=e,l=Array.from(Array(10).keys());return(0,n.jsx)(r.B,{as:"ul",gap:{default:i?"150":"0",laptop:"150"},direction:"vertical",display:"flex",unsafeClassName:d().self,children:l.map((e,l)=>(0,n.jsx)(a.c,{variant:i?"medium":"low",unsafeClassName:d()["stack-animation"],unsafeStyle:{"--animation-order":l+1},children:(0,n.jsx)(a.c.Content,{children:(0,n.jsx)(a.c.Row,{leftSection:(0,n.jsxs)(r.B,{gap:"100",direction:"horizontal",display:"flex",unsafeStyle:{alignItems:"center"},children:[(0,n.jsx)(s.E,{width:"64px",height:"8px",isAnimated:t}),(0,n.jsx)(o.E,{font:"body-m-regular",children:"\xa0"})]}),rightSection:(0,n.jsx)(s.E,{width:"40px",height:"8px",isAnimated:t})})})},e))})}},5194:(e,t,i)=>{"use strict";i.d(t,{h:()=>n});let n=i(28933).h6_},5899:(e,t,i)=>{"use strict";i.d(t,{j:()=>n});let n=i(28933).jr6},6440:(e,t,i)=>{"use strict";i.d(t,{p:()=>n});let n={coords:[51.5287718,-.2416787],address:"London, UK",countryCode:"GB"}},6718:e=>{e.exports={caption:"BookingFlowServiceAddonContent_caption__Ha_ba"}},8132:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(37876),a=i(19822);let s=e=>{let{leftSection:t,rightSection:i,qaType:s}=e;return(0,n.jsx)(a.c,{qaType:s,children:(0,n.jsx)(a.c.Content,{children:(0,n.jsx)(a.c.Row,{leftSection:t,rightSection:i,rightSectionAlignment:"flex-start"})})})}},10935:e=>{e.exports={modal:"AuthModal_modal__CiGik",self:"AuthModal_self__Qzq__","self--legacy-modal":"AuthModal_self--legacy-modal__bOeT6",self__form:"AuthModal_self__form__nprwh","self__form--static":"AuthModal_self__form--static__li_uX","self__row-section-desktop":"AuthModal_self__row-section-desktop__qySiT","self__terms-and-conditions":"AuthModal_self__terms-and-conditions__VJKk9","self__forgot-password-initial":"AuthModal_self__forgot-password-initial__UqzzP"}},11060:e=>{e.exports={attendeeName:"BookingFlowMultiEmployeeUI_attendeeName__7SqRA"}},12155:(e,t,i)=>{"use strict";i.d(t,{X:()=>c});var n=i(37876),a=i(78430),s=i(14232),r=i(344),o=i(21031),l=i(64449),d=i(41699);let c=e=>{let{emailStatic:t,isOpen:i,titles:c,subtitles:u}=e,{addErrorToast:m}=(0,l.Y)(),p=(0,s.useCallback)(e=>{r.m3.authModalErrorToast({error:e||"<unknown>"}),m(e??(0,o.__)`Oops! Something went wrong`,{keepOnUnmount:!0})},[m]),[h,x]=(0,s.useState)("identity"),[f,g]=(0,s.useState)(t??""),y=(0,d.p)();(0,s.useEffect)(()=>{i&&(g(""),x("identity"))},[i]);let _="identity"!==h,j=(0,s.useMemo)(()=>_?()=>(x(e=>"reset_password"===e?"login":"identity"),Promise.resolve()):void 0,[_]),b=(0,s.useMemo)(()=>({login:(0,o.__)`Welcome back`,signup:(0,o.__)`Create account`,reset_password:(0,o.__)`Forgot password?`,identity:(0,o.__)`Log in or sign up`,add_phone:(0,o.__)`Add Phone`}),[]),v=(0,s.useMemo)(()=>({add_phone:(0,o.__)`Enter your phone number to confirm your appointment`,login:e=>(0,o.Dt)((0,o.__)("Enter your password to log in as <text>%{email}</text>",{email:e}),{text:e=>(0,n.jsx)(a.E,{as:"span",color:"neutral",font:"body-s-medium",children:e})}),signup:e=>(0,o.Dt)((0,o.__)("Create your new account for <text>%{email}</text> by completing these details",{email:e}),{text:e=>(0,n.jsx)(a.E,{as:"span",color:"neutral",font:"body-s-medium",children:e})}),reset_password:e=>(0,o.Dt)((0,o.__)(`Forgot your password? Weâll send you a secure link to create a password to <text>%{email}</text>`,{email:e}),{text:e=>(0,n.jsx)(a.E,{as:"span",color:"neutral",font:"body-s-medium",children:e})}),identity:t?()=>(0,o.Dt)((0,o.__)("Enter your password and login as <text>%{email}</text>",{email:t}),{text:e=>(0,n.jsx)(a.E,{as:"span",color:"neutral",font:"body-s-medium",children:e})}):void 0}),[t]),w=(0,s.useMemo)(()=>c?.[h]??b?.[h],[b,c,h]),[S,C]=(0,s.useState)(!0),k=(0,s.useMemo)(()=>{let e=u?.[h]??v?.[h];return("function"==typeof e?e(f):e)??null},[u,h,v,f]);return(0,s.useEffect)(()=>{C(!0)},[k]),{email:f,signUpFields:y,onError:p,onBack:j,title:w,showSubtitle:S,subtitle:k,view:h,setView:x,setEmail:g,setShowSubtitle:C}}},12510:e=>{e.exports={self:"BookingFlowLayout_self__GEthy",scrollableWrapper:"BookingFlowLayout_scrollableWrapper__HEemN",footerWrapper:"BookingFlowLayout_footerWrapper__EP3hF",showFooterDivider:"BookingFlowLayout_showFooterDivider__Aj8fX",locationDetails:"BookingFlowLayout_locationDetails__Nxgbh",withDivider:"BookingFlowLayout_withDivider__ji74q",itemsList:"BookingFlowLayout_itemsList__oObKr",summaryWrapper:"BookingFlowLayout_summaryWrapper__hRsXe",bottomBar:"BookingFlowLayout_bottomBar__5GGyb",container:"BookingFlowLayout_container__dgPEz",details:"BookingFlowLayout_details__bai9z"}},15171:e=>{e.exports={self:"BookingFlowLocationDetails_self__YecLJ"}},16242:e=>{e.exports={"choice-list-item":"BookingFlowChoiceCard_choice-list-item__e4uIV"}},17024:e=>{e.exports={self:"ClaimGiftCardOnVisit_self__D3lxB",self__image:"ClaimGiftCardOnVisit_self__image__giDMX",self__details:"ClaimGiftCardOnVisit_self__details__6gDbA",self__buttons:"ClaimGiftCardOnVisit_self__buttons__f6RTN"}},17527:e=>{e.exports={pay:"Pay_pay__METIV"}},19753:e=>{e.exports={self:"Header_self__2CP6O"}},20346:(e,t,i)=>{"use strict";i.d(t,{AR:()=>j,Bb:()=>b,G9:()=>_,Ux:()=>v,ZP:()=>y});var n=i(37876),a=i(93485),s=i(18577),r=i(78430),o=i(49995),l=i(14232),d=i(344),c=i(4358),u=i(10935),m=i.n(u),p=i(25075),h=i(86643),x=i(68468),f=i(74377),g=i(12155);let y=e=>{let{children:t,showSubtitle:i,subtitle:a,useLegacyModal:s}=e;return(0,n.jsxs)("div",{className:(0,o.A)(m().self,s&&m()["self--legacy-modal"]),children:[!!i&&!!a&&(0,n.jsx)(r.E,{color:"neutralFaded",font:"body-s-regular",mb:"100",children:a}),t]})},_=e=>Reflect.has(e,"login"),j=e=>Reflect.has(e,"loginSocial"),b=e=>Reflect.has(e,"signUp"),v=e=>{let{acquisitionSource:t,claimableBookingId:i,claimableGiftCardCode:r,claimGiftCardAsBuyer:o,claimableSaleId:u,claimableWaitlistToken:v,email:w,fetchClaimResult:S,fetchPaymentCard:C,giftCardProviderSlug:k,titles:A,subtitles:E,isOpen:T,onLogin:B,setOpen:P,useLegacyModal:I}=e,{email:F,onError:N,onBack:O,title:D,showSubtitle:M,subtitle:R,view:L,setView:$,setEmail:W,setShowSubtitle:z,signUpFields:q}=(0,g.X)({emailStatic:w,isOpen:T,titles:A,subtitles:E}),G=(0,l.useMemo)(()=>({claimableBookingId:i,claimableGiftCardCode:r,claimGiftCardAsBuyer:o,claimableSaleId:u,claimableWaitlistToken:v,giftCardProviderSlug:k}),[i,r,o,u,v,k]),V=(0,l.useCallback)((e,t)=>{d.m3.authModalVisibility({modal_visibility:e?"OPEN":t?"DISMISSED":"CLOSED"}),P(e,t)},[P]),U=(0,l.useCallback)((e,t)=>(((e,t)=>{let{claimableBookingId:i,claimableGiftCardCode:n,claimableSaleId:a,claimableWaitlistToken:s,giftCardProviderSlug:r}=t,o=_(e)?"PASSWORD":j(e)?"SOCIAL":b(e)?"SIGNUP":"UNKNOWN";d.m3.authSuccess({method:o,auth_claimed_booking_id:i,auth_claimed_gift_card_code:n?function(e){if("string"!=typeof e||e.length<2)return e;let t=e[0],i=e[e.length-1],n="*".repeat(Math.max(0,e.length-2));return`${t}${n}${i}`}(n):void 0,auth_claimed_sale_id:a?Number(a):void 0,auth_claimed_waitlist_token:s,auth_claimed_provider_gift_card_slug:r})})(t,G),B(e,t)),[B,G]),H=(0,n.jsxs)(y,{showSubtitle:M,subtitle:R,useLegacyModal:I,children:["reset_password"===L&&(0,n.jsx)(p.X,{email:F,onError:N,setShowSubtitle:z,setView:$}),"login"===L&&(0,n.jsx)(x.a,{...G,email:F,fetchClaimResult:S,fetchPaymentCard:C,onError:N,onLogin:U,setView:$}),"signup"===L&&(0,n.jsx)(f.H,{...G,acquisitionSource:t,email:F,fetchClaimResult:S,fetchPaymentCard:C,signUpFields:q,onError:N,onLogin:U,setView:$}),"identity"===L&&(0,n.jsx)(h.l,{...G,email:F,emailStatic:w,fetchClaimResult:S,fetchPaymentCard:C,onLogin:U,setEmail:W,setView:$})]});return e.useLegacyModal?(0,n.jsxs)(s.y,{isOpen:T,mobileHeight:e.mobileHeight,onClose:e.onClose,onOpen:e.onOpen,setOpen:V,title:D,unsafeClassName:m().modal,children:[(0,n.jsx)(s.y.Header,{backButtonIconSlot:a.A,onBack:O,onClose:e.onClose}),(0,n.jsx)(s.y.Body,{children:H})]}):(0,n.jsx)(c.Yf,{isOpen:T,setOpen:V,title:D,children:H})}},21777:e=>{e.exports={self:"TextBlock_self__Im7Jg"}},22096:e=>{e.exports={addonGroupTitle:"BookingFlowModalServiceAddOnStepperGroup_addonGroupTitle__N5zAH",stepperFieldContainer:"BookingFlowModalServiceAddOnStepperGroup_stepperFieldContainer__ZMP_1"}},22152:e=>{e.exports={self:"BookingFlowLayoutSummary_self__6IO9R"}},22771:(e,t,i)=>{"use strict";i.d(t,{d:()=>s});var n=i(37876),a=i(78430);let s={text:e=>(0,n.jsx)(a.E,{as:"span",color:"neutral",font:"body-s-medium",children:e})}},24697:(e,t,i)=>{"use strict";i.d(t,{G:()=>_,d:()=>y});var n=i(37876),a=i(28933),s=i(64820),r=i(67015),o=i(80281),l=i(82334),d=i(87326),c=i(14232),u=i(6440),m=i(40439),p=i(21031),h=i(56752),x=i(60259),f=i(64449),g=i(53244);let y=a.dCe,_=e=>{let{onSuccess:t,hideRequiredHint:i}=e,{addErrorToast:a}=(0,f.Y)(),_=(0,c.useMemo)(()=>(0,h.GZ)(),[]),j=(0,c.useCallback)(e=>_.find(t=>{let{code:i}=t;return i===e})?g.y$.required({message:(0,p.__)("Mobile number is required")})(""):void 0,[_]),b=(0,c.useMemo)(()=>(0,h.Qh)((0,p.lt)()||u.p.countryCode),[]),v=(0,x.M)({initialValue:b,validators:[j],validateOnChange:!1}),w=(0,l.h)({value:v.value,onChange:v.updateValue,onBlur:v.onBlur,normalizeMobile:h.kK,options:_}),S=(()=>{let{trigger:e}=(0,m.$9)(y);return(0,c.useCallback)(t=>e({newPhoneNumber:t}),[e])})(),C=(0,c.useRef)(!1);(0,c.useEffect)(()=>{let e=(0,p.lt)();if(e&&!C.current){C.current=!0;let t=(0,h.Qh)(e),i=_.findIndex(e=>{let{code:i}=e;return i===t});w.onPrefixChange({target:{selectedIndex:i}})}},[w.onPrefixChange]);let k=async()=>{try{let e=await S(v.value);if(!e?.errors)return void t();let i=e?.errors?.find(e=>{let{extensions:t}=e;return t?.code==="BAD_USER_INPUT"});if(i){let e=(i.extensions?.fields)[0].formattedMessage;v.updateError(e)}}catch{a((0,p.__)`Oops! Something went wrong`)}};return(0,n.jsxs)(r.s,{gap:"300",direction:"vertical",children:[(0,n.jsx)(o.o.Section,{children:(0,n.jsx)(o.o.Section.Body,{children:(0,n.jsx)(d.w,{...w,label:(0,p.__)`Mobile number`,autoComplete:"tel-local",name:"phone",selectAreaCodeOptions:(0,n.jsx)(h.WW,{withEmoji:!0}),isRequired:!0,showRequiredHint:!i,error:v.error})})}),(0,n.jsx)(s.$,{isFull:!0,type:"button",variant:"primary",qaType:"continue-button-mobile",onAction:k,size:"l",children:(0,p.__)("Continue")})]})}},25075:(e,t,i)=>{"use strict";i.d(t,{X:()=>p});var n=i(37876),a=i(64922),s=i(64820),r=i(72466),o=i(18577),l=i(14232),d=i(40439),c=i(21031),u=i(22771),m=i(69437);let p=e=>{let{email:t,onError:i,setShowSubtitle:p,setView:h}=e,[x,f]=(0,l.useState)(!1),{trigger:g}=(0,d.$9)(m.Y),y=(0,l.useCallback)(e=>i(e||(0,c.__)`Failed to send password reset email`),[i]),_=(0,l.useCallback)(async()=>{if(!t)return Promise.resolve();try{let{result:e,errors:i}=await g({email:t});e.resetPassword?.success?f(!0):y(i?.[0]?.extensions?.formattedMessage)}catch{y()}return Promise.resolve()},[t,y,g]);return((0,l.useEffect)(()=>{p(!x)},[x,p]),x)?(0,n.jsx)(o.y.Body.Section,{flush:!0,tight:!0,children:(0,n.jsx)(r.p,{icon:a.v,header:(0,c.__)`Check your email`,description:(0,c.Dt)((0,c.__)(`Reset password email has been sent to <text>%{email}</text>. Please check your inbox to reset your password. If you didnât receive your email, please check your junk mail folder.`,{email:t}),u.d),primaryAction:(0,n.jsx)(s.$,{onAction:()=>Promise.resolve(h("identity")),variant:"primary",size:"l",qaType:"forgot-password-back-to-login",children:(0,c.__)`Back to login`})})}):(0,n.jsx)(o.y.Body.Section,{flush:!0,tight:!0,children:(0,n.jsx)(s.$,{type:"button",variant:"primary",isFull:!0,onAction:_,size:"l",children:(0,c.__)`Reset password`})})}},25308:e=>{e.exports={pricing:"BookingFlowLayoutItemsList_pricing__xkY0k",serviceAddonsList:"BookingFlowLayoutItemsList_serviceAddonsList__uIJYn",itemButton:"BookingFlowLayoutItemsList_itemButton__Fs4wd"}},25334:(e,t,i)=>{"use strict";function n(e){let t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())}i.d(t,{h:()=>n})},26410:e=>{e.exports={self:"SignUp_self__RG4hl",formWrapper:"SignUp_formWrapper__FsA5r",form:"SignUp_form__ieHw9"}},28223:(e,t,i)=>{"use strict";let n,a;i.d(t,{K:()=>f});var s=i(14232),r=i(25034),o=i(36249),l=i(25393),d=i(28743),c=i(21031);let u="referral_code",m="marketing_utm",p="referral_code",h="marketing_utm",x={domain:"production"===r.ENVIRONMENT?".fresha.com":".b2c.fresha.io",expires:7},f=()=>{let[e,t]=(0,s.useState)(!1),i=(0,o.ok)();(0,s.useEffect)(()=>{t(!0)},[]);let f=(0,l.uC)();return{storeParams:(0,s.useCallback)(e=>{let t=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid"].reduce((e,t)=>{let n=i.get(t);return n&&e.set(t,n),e},new URLSearchParams).toString();if(e?.referralCode)if(f?.analytics)d.CA.set(u,e.referralCode,x);else try{sessionStorage.setItem(p,e.referralCode)}catch{n=e.referralCode}if(t)if(f?.analytics)d.CA.set(m,t,x);else try{sessionStorage.setItem(h,t)}catch{a=t}},[i,f?.analytics]),partnersSignInPath:(0,s.useCallback)(t=>{if(!e)return`${r.SHEDUL_SPA_URL}/users/sign-in`;let{language:i,code:s}=(0,c.XG)(),o=d.CA.get(m)||sessionStorage.getItem(h)||a,l=d.CA.get(u)||sessionStorage.getItem(p)||n,x=new URLSearchParams({lang:i,locale:s,from:"fresha",...l&&{referral_code:l},...Object.fromEntries(new URLSearchParams(o)),...t?.businessID&&{businessID:t.businessID}}).toString();return`${r.SHEDUL_SPA_URL}/users/sign-in?${x}`},[e])}}},29455:(e,t,i)=>{"use strict";i.d(t,{m:()=>d});var n=i(37876),a=i(64820),s=i(18577),r=i(78430),o=i(21031);let l=()=>null;function d(e){let{isOpen:t,onClose:i,onSubmit:d}=e;return(0,n.jsxs)(s.y,{isOpen:t,onClose:i,setOpen:l,onOpen:l,title:(0,o.tS)("Modal title label to confirm user wants to exit booking flow","Are you sure you want to exit?"),children:[(0,n.jsx)(s.y.Header,{onClose:i}),(0,n.jsx)(s.y.Body,{children:(0,n.jsx)(s.y.Body.Section,{children:(0,n.jsx)(r.E,{font:"body-m-regular",children:(0,o.tS)("Modal description warning that incomplete booking progress will be lost when exiting","Your booking isn't complete and any progress will be lost.")})})}),(0,n.jsxs)(s.y.Footer,{children:[(0,n.jsx)(a.$,{id:"heed-warning",size:"l",variant:"secondary",onAction:i,isFull:!0,children:(0,o.tS)("Button label to close modal","Close")}),(0,n.jsx)(a.$,{id:"ignore-warning",size:"l",variant:"primary",onAction:d||l,isFull:!0,children:(0,o.tS)("Button label to continue navigating away from booking flow","Yes, exit")})]})]})}},29564:(e,t,i)=>{"use strict";i.d(t,{L:()=>h});var n=i(28933),a=i(14232),s=i(3491),r=i(40439),o=i(21031),l=i(23898),d=i(93098),c=i(7086);let u=n.P7b,m=e=>e.extensions?.code==="BAD_USER_INPUT"&&Array.isArray(e.extensions.fields)&&e.extensions.fields.every(e=>Reflect.has(e,"key")&&Reflect.has(e,"formattedMessage")),p={regular:"REGULAR",review:"REVIEW","post-tip":"POST_TIP","gift-card":"GIFT_CARD"},h=e=>{let{fetchClaimResult:t,fetchPaymentCard:i,onInvalidError:n,onSuccess:h,onUnhandledError:x}=e,f=(0,l.RU)(l.QC.userLandedFirstUrl)||"",g=(0,l.RU)(l.QC.externalReferrerUrl)||"",{trigger:y,isMutating:_}=(0,r.$9)(u,{},{async onHumanChallenge(e){let{path:t,previousResult:i,recaptchaAction:n,recaptchaToken:a,variables:r}=e;if(t?.length!==1||"claimGiftCard"!==t[0])return;let o=await (0,s.c)(d.K9,{code:r.giftCardCode,providerSlug:r.giftCardProviderSlug,asBuyer:r.claimGiftCardAsBuyer},{recaptcha:{recaptchaAction:n,recaptchaToken:a}});return{data:{signUp:i.data.signUp,claimGiftCard:o.data.claimGiftCard},errors:i.errors||o.errors?[...i.errors??[],...o.errors??[]]:void 0}}}),j=(0,c.j)();return{register:(0,a.useCallback)(async e=>{let{email:a,firstName:s,lastName:r,password:l,phone:d,marketingConsent:c,bookingId:u,giftCardCode:_,claimGiftCardAsBuyer:b,giftCardProviderSlug:v,saleId:w,acquisitionSource:S,waitlistToken:C}=e,{errors:k,result:A}=await y({email:a,fetchClaimResult:t,fetchPaymentCard:i,password:l,firstName:s,lastName:r,phone:d,locale:(0,o.XG)().code,marketingConsent:c,claimGiftCard:!!_,claimGiftCardAsBuyer:b,giftCardCode:_??"",giftCardProviderSlug:v,claimDetails:{bookingId:u&&String(u),saleId:w&&String(w),waitlistToken:C},acquisitionSource:p[S||"regular"],externalReferrerUrl:g,landingPageUrl:f}),E=k?.find(m);if(E)return void n(E.extensions.fields);if(k?.length||!A.signUp?.user)return void x();let T=await j({profile:A.signUp.user,source:"email",type:"register"});if(!T)throw Error("Successfully signed up but no user returned");return h(T,A),T},[t,i,n,h,x,j,y,g,f]),isMutating:_}}},30497:(e,t,i)=>{"use strict";i.d(t,{e:()=>n});let n="select-card-method"},35876:(e,t,i)=>{"use strict";i.d(t,{$i:()=>s,OP:()=>r,n5:()=>a});var n=i(98693);function a(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter(Boolean).join(" ")}function s(e,t){return(0,n.jbV)(e,t)}function r(e){return e?"index, follow":"noindex, noarchive, follow"}},38470:e=>{e.exports={"stack-animation":"ConfirmSkeleton_stack-animation__LQtNS","lift-in":"ConfirmSkeleton_lift-in___Gzgd","fade-animation":"ConfirmSkeleton_fade-animation__Ew9cL","fade-in":"ConfirmSkeleton_fade-in__aI4Xm",self:"ConfirmSkeleton_self__bJxkZ",cardLeft:"ConfirmSkeleton_cardLeft__lbd33",cardRight:"ConfirmSkeleton_cardRight__8ZSvL",cardSmallRight:"ConfirmSkeleton_cardSmallRight__2rEq_"}},39848:(e,t,i)=>{"use strict";i.d(t,{D:()=>d});var n=i(37876),a=i(14232),s=i(1438);let r=/&\{([^}]+)\}/g;function o(e){return e.replace(/\\~/g,"~").replace(/\\_/g,"_").replace(/\\\*/g,"*").replace(/\\&/g,"&").replace(/\\\{/g,"{").replace(/\\\\/g,"\\")}function l(e,t){if(!e)return[];let i=[],n="",a=0;for(;a<e.length;){let s=e[a],r=e[a+1],l=e.slice(a,a+2);if("\\"===s&&("*"===r||"_"===r||"~"===r||"\\"===r||"&"===r||"{"===r)){n+=s+r,a+=2;continue}let d={...t},c=0;if("~~"===l?(t.strikethrough=!t.strikethrough,c=2):("**"===l||"__"===l)&&(t.bold=!t.bold,c=2),c>0){n&&(i.push({type:"text",value:o(n),bold:d.bold||void 0,strikethrough:d.strikethrough||void 0}),n=""),a+=c;continue}n+=s,a++}return n&&i.push({type:"text",value:o(n),bold:t.bold||void 0,strikethrough:t.strikethrough||void 0}),i}function d(e){let{children:t,renderInterpolation:i}=e;return(0,a.useMemo)(()=>{if(!t)return null;let{text:e,fallbackText:a,interpolations:d=[]}=t,c=function(e){if(!e)return{nodes:[],success:!0};try{let t,i=[],n={bold:!1,strikethrough:!1},a=0;for(r.lastIndex=0;null!==(t=r.exec(e));){let s=t.index,o=r.lastIndex,d=t[1];if(s>a){let t=e.slice(a,s),r=l(t,n);i.push(...r)}let c={type:"placeholder",id:d};i.push(c),a=o}if(a<e.length){let t=e.slice(a),s=l(t,n);i.push(...s)}return{nodes:i,success:!0}}catch(e){return{nodes:[],success:!1,error:e instanceof Error?e.message:"Unknown parsing error"}}}(e);if(!c.success)return(0,s.Oz)("StyledText parsing failed",{originalError:c.error},{source:"GraphQL"}),a;if(0===c.nodes.length)return a||null;let u=new Map(d.map(e=>[e.id,{...e,renderInterpolation:i}]));for(let t of c.nodes.filter(e=>"placeholder"===e.type))if(!u.has(t.id))return(0,s.Oz)("StyledText: Missing interpolation data",{originalError:Error(`Placeholder &{${t.id}} found in text but no interpolation data provided`),placeholderId:t.id,fullText:e},{source:"GraphQL"}),a;let m=!1,p=c.nodes.map((e,t)=>{if("text"===e.type){let i,a,s;return i=e.value,a=e.value.slice(0,30).replace(/\s/g,"-"),s=`${t}-${a}`,e.bold&&(i=(0,n.jsx)("b",{children:i},`${s}-b`)),e.strikethrough&&(i=(0,n.jsx)("s",{children:i},`${s}-s`)),i}if("placeholder"===e.type){let i=function(e,t,i){let a=t.get(e.id),s=`${i}-${e.id}`;if(!a)return null;let{text:r,action:l,renderInterpolation:d}=a,c=o(r);if(!d)return(0,n.jsx)("span",{children:c},s);let u=d(c,l);return null==u||""===u?null:(0,n.jsx)("span",{children:u},s)}(e,u,t);return null==i||""===i?(m=!0,null):i}return null});return m?a:(0,n.jsx)(n.Fragment,{children:p})},[t,i])}},40778:e=>{e.exports={"stack-animation":"TimeSlotsSkeleton_stack-animation__SUbIu","lift-in":"TimeSlotsSkeleton_lift-in__9yKid","fade-animation":"TimeSlotsSkeleton_fade-animation__CqSTB","fade-in":"TimeSlotsSkeleton_fade-in__C_GON",self:"TimeSlotsSkeleton_self__jct0x"}},40886:e=>{e.exports={self:"BookingFlowRichText_self__TI9RP"}},41699:(e,t,i)=>{"use strict";i.d(t,{H:()=>T,p:()=>E});var n=i(37876),a=i(64820),s=i(21109),r=i(66853),o=i(53896),l=i(87326),d=i(14083),c=i(51650),u=i(95386),m=i(2982),p=i(14232),h=i(88194),x=i(63438),f=i(21031),g=i(22771),y=i(56752),_=i(60259),j=i(95696),b=i(53244),v=i(89673),w=i(29564),S=i(2875),C=i(57804),k=i(26410),A=i.n(k);function E(){let{initialValues:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,_.M)({initialValue:e?.termsField,validators:[b.y$.required()]}),i=(0,_.M)({initialValue:e?.marketingField}),n=(0,_.M)({initialValue:e?.firstName,validators:[b.y$.required({message:(0,f.__)`First name is required`}),b.y$.maxLength(30)]}),a=(0,_.M)({initialValue:e?.lastName,validators:[b.y$.required({message:(0,f.__)`Last name is required`}),b.y$.maxLength(30)]}),s=(0,_.M)({validators:[b.y$.required({message:(0,f.__)`Password is required`}),b.y$.password({required:!0}).validate]}),{field:r,props:o}=(0,S.o)({initialValues:{phoneNumberField:e?.phoneNumber}}),l=(0,p.useMemo)(()=>({"input.first-name":n.updateError,"input.last-name":a.updateError,"input.password":s.updateError,"input.phone":r.updateError}),[n,a,s,r]);return{firstNameField:n,lastNameField:a,marketingField:i,passwordField:s,phoneNumberField:r,phoneNumberFieldProps:o,setInvalidError:l,termsField:t}}let T=e=>{let{signInState:t,setSignInState:i}=e,{email:_,bookingId:b,saleId:S,customer:k,acquisitionSource:T}=t,{addToast:B}=(0,u.v)(),P=(0,v.w)(),{firstNameField:I,lastNameField:F,marketingField:N,passwordField:O,phoneNumberField:D,phoneNumberFieldProps:M,setInvalidError:R,termsField:L}=E({initialValues:k}),$=(0,p.useCallback)(e=>{let t=e.find(e=>"input.email"===e.key);if(t)i(e=>({...e,view:x.w.SOCIALS_LOGIN})),B(e=>{let{key:i,...a}=e;return(0,n.jsx)(m.y,{...a,children:t.formattedMessage},i)},{keepOnUnmount:!0});else for(let{key:t,formattedMessage:i}of e)R[t]?.(i)},[R,B,i]),W=(0,p.useCallback)(()=>{B(e=>{let{key:t,...i}=e;return(0,n.jsx)(m.y,{...i,children:(0,f.__)`Error signing up, please try again`},t)})},[B]),z=(0,p.useCallback)(async()=>(B(e=>{let{key:t,...i}=e;return(0,n.jsx)(m.y,{...i,children:(0,f.__)`Successfully signed in`},t)},{keepOnUnmount:!0}),P(),Promise.resolve()),[B,P]),{register:q,isMutating:G}=(0,w.L)({onInvalidError:$,onSuccess:z,onUnhandledError:W}),V=(0,j.X)(async e=>{e.preventDefault(),[L.validate(),N.validate(),I.validate(),F.validate(),O.validate(),D.validate()].every(Boolean)&&await q({email:_??"",firstName:I.value,lastName:F.value,password:O.value,phone:D.value,marketingConsent:!!N.value,bookingId:b,saleId:S,acquisitionSource:T})});return(0,n.jsx)("form",{onSubmit:V,noValidate:!0,children:(0,n.jsxs)(d.B,{gap:"300",unsafeClassName:A().self,children:[(0,n.jsx)(C.Y,{title:(0,f.__)`Create account`,caption:(0,f.Dt)((0,f.__)("You're almost there! Create your new account for <text>%{email}</text> by completing these details",{email:_}),g.d)}),(0,n.jsxs)(d.B,{gap:"400",unsafeClassName:A().formWrapper,children:[(0,n.jsxs)(d.B,{gap:"200",unsafeClassName:A().form,children:[(0,n.jsx)(c.A,{label:(0,f.__)`First name`,autoComplete:"given-name",name:"firstName",isRequired:!0,showRequiredHint:!0,onChange:I.onChange,onBlur:I.onBlur,error:I.error,value:I.value}),(0,n.jsx)(c.A,{label:(0,f.__)`Last name`,autoComplete:"family-name",name:"lastName",isRequired:!0,showRequiredHint:!0,onChange:F.onChange,onBlur:F.onBlur,error:F.error,value:F.value}),(0,n.jsx)(o.s,{label:(0,f.__)`Password`,autoComplete:"new-password",name:"password",isRequired:!0,showRequiredHint:!0,onChange:O.onChange,onBlur:O.onBlur,error:O.error}),(0,n.jsx)(l.w,{...M,label:(0,f.__)`Mobile number`,autoComplete:"tel-local",name:"phone",selectAreaCodeOptions:(0,n.jsx)(y.WW,{withEmoji:!0}),isRequired:!0,showRequiredHint:!0,error:D.error,qaType:"mobile-number"})]}),(0,n.jsxs)(d.B,{gap:"200",children:[(0,n.jsx)(s.S,{label:(0,f.Dt)((0,f.__)("I agree to the <privacy_policy>Privacy Policy</privacy_policy>, <terms_of_use>Terms of Use</terms_of_use> and <terms_of_service>Terms of Service</terms_of_service>"),{privacy_policy:e=>(0,n.jsx)(r.N,{linkTo:h.VY,text:e,isExternal:!0},"policy"),terms_of_use:e=>(0,n.jsx)(r.N,{linkTo:h.wV,text:e,isExternal:!0},"termsOfUse"),terms_of_service:e=>(0,n.jsx)(r.N,{linkTo:h.yy,text:e,isExternal:!0},"serviceTerms")}),name:"agreement",isChecked:!!L.value,error:L.error,onChange:e=>L.updateValue(e?"1":""),isRequired:!0}),(0,n.jsx)(s.S,{label:(0,f.__)`I agree to receive marketing notifications with offers and news`,name:"marketingConsent",isChecked:!!N.value,onChange:e=>N.updateValue(e?"1":"")})]})]}),(0,n.jsx)(a.$,{size:"l",isFull:!0,isPending:G,type:"submit",children:(0,f.__)`Continue`})]})})}},41707:e=>{e.exports={"stack-animation":"Time_stack-animation__3ZzHd","lift-in":"Time_lift-in__aaaRM","fade-animation":"Time_fade-animation__VnR_N","fade-in":"Time_fade-in__MCEaK",selectedStaffRow:"Time_selectedStaffRow__knCEl",timeslots:"Time_timeslots__brXGK",carousel:"Time_carousel__KTEGN",joinWaitlistLink:"Time_joinWaitlistLink__PInFQ",filtersRow:"Time_filtersRow__cCGzb",patchTestCalloutBanner:"Time_patchTestCalloutBanner__SS2NP",dateCarousel:"Time_dateCarousel__dJlYI",scrollable:"Time_scrollable__TN248",scrollableInner:"Time_scrollableInner__UnP2m",tileWrapper:"Time_tileWrapper___wF4w",tile:"Time_tile__Vl08g",monthName:"Time_monthName__Zd_eE",monthNameText:"Time_monthNameText__y9PqZ",buttons:"Time_buttons__m3oWk","text-fade-animation":"Time_text-fade-animation__Hgfiu","text-fade-in":"Time_text-fade-in__TE2wg","text-fade-out":"Time_text-fade-out__DJJeN",notAvailableDay:"Time_notAvailableDay__E4jGO",notAvailableDay__container:"Time_notAvailableDay__container__hMX_1",notAvailableDay__icon:"Time_notAvailableDay__icon__Q7j_Q",notAvailableDay__footer:"Time_notAvailableDay__footer__sTtnt",notAvailableDay__stack:"Time_notAvailableDay__stack__MRTuj"}},43277:e=>{e.exports={"choice-list-item":"EmployeeTile_choice-list-item__IV7_x",suffixContainer:"EmployeeTile_suffixContainer__ytrvk",suffixAction:"EmployeeTile_suffixAction__0ZAPu",unselectedButton:"EmployeeTile_unselectedButton__bTJq0",hidden:"EmployeeTile_hidden__VP2tG",selectedButton:"EmployeeTile_selectedButton__9kNCX",visible:"EmployeeTile_visible__dHaJz"}},44223:(e,t,i)=>{"use strict";i.d(t,{$:()=>n});let n="redirect"},47222:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>sK});var n=i(37876),a=i(14232),s=i(40439),r=i(71186),o=i(99032),l=i(24536),d=i(69111),c=i(38563),u=i(30475),m=i(90496),p=i(98693),h=i(64449),x=i(98317),f=i(44018),g=i(64820),y=i(72466),_=i(9547),j=i(420),b=i(41361),v=i(60340),w=i(78430),S=i(15249),C=i(64980),k=i(21031),A=i(1438),E=i(71279),T=i.n(E),B=i(28933),P=i(14e3),I=i(59950),F=i(13074),N=i(13397),O=i(31602),D=i(16479),M=i(95179);let R=Object.values(D.Y).map(e=>(e.urlPrefix?`/${e.urlPrefix}/`:"/").replace(/\//g,"\\/")).join("|");function L(e){let{locationId:t,interactions:i,providerId:n}=e,a=(0,O.f)(new Date,-7),s=i.sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()).filter(e=>new Date(e.timestamp)>a);if(0===s.length)return null;let r=s.find(e=>e.properties.location_id?.toString()===t);if(!r||!r.properties.page_url)return M.rR.Marketplace;let o=new URL(r.properties.page_url,"http://a");for(let e of function(e){let{providerId:t}=e;return[{pathname:RegExp(`^(?:${R})a\\/.*$`),query:[{key:"pId",value:e=>e.split(",").includes(t)}]},{pathname:RegExp(`^(?:${R})a\\/[\\w-]+\\/.*$`),query:[{key:"menu",value:"true"}]},{pathname:RegExp(`^(?:${R})(book-now|providers)\\/.*$`)}]}({providerId:n})){let{pathname:t,query:i=[]}=e;if(t.test(o.pathname)&&i.every(e=>{let{key:t,value:i}=e;if(!i&&!o.searchParams.has(t))return!1;let n=o.searchParams.get(t);return null!==n&&!!(i instanceof Function?i(n):i===n)}))return M.rR.Direct}return M.rR.Marketplace}var $=i(344),W=i(81790),z=i(61910),q=i(23898),G=i(27276),V=i(95696);let U=e=>{let t=(0,c.bN)(),i=(0,O.f)(new Date,-7),n=t.filter(t=>{let n=new Date(t.timestamp);return"marketplace_page_viewed"===t.event_type&&t.properties.page_url.includes(e)&&n>i}).sort((e,t)=>e.timestamp-t.timestamp)[0];return n?new Date(n.timestamp).toISOString():null},H=B.LEr,K=B.LzQ,Y=(0,a.createContext)(null),X=e=>{let{children:t,locationId:i,locationSlug:r,locationProviderId:o,locationName:l,locationTrackingCodes:x}=e,f=(0,j.d)("laptop"),g=(0,N.J)(),y=(0,a.useRef)(!1),[_,b]=(0,a.useState)(null),[v,w]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!0),[E,T]=(0,a.useState)(!1),[B,O]=(0,a.useState)(null),[D,M]=(0,a.useState)(null),R=(0,P.useSearchParams)(),{redirectTo:K}=(0,d.c)(),{addErrorToast:X}=(0,h.Y)(),Z=(0,m.tH)("B2C_WEB_BOOKING_FLOW_CONFIRM_STEP_REVAMP"),J=(0,W.r)("B2C_WEB_VENUE_PORTFOLIO"),{trigger:Q}=(0,s.$9)(H),ee=(0,a.useCallback)(async()=>{let e=R||new URLSearchParams,t=(0,F.LF)()||(0,I.Q)(),n=e.get("employeeId"),a=e.get("professionalSlug"),s=(0,q.RU)(q.QC.getloyaltyReferralCodeLabel(o)),l="all"===n,{rwgToken:d,geiToken:u}=(0,z.VP)(e,o);return Q({portfolioEnabled:J.state??!1,confirmStepRevampEnabled:!!Z,input:{locationSlug:r,referer:(0,G.G2)(),options:{marketingToken:e.get("marketingToken"),cnToken:e.get("cnToken"),via:e.get("via"),isGroupBooking:"true"===e.get("groupBooking"),isRebook:"true"===e.get("rebook"),rwgToken:d,geiToken:u,employeeId:a||l?null:n,professionalProfileSlug:a,shouldShowAllEmployees:l,isFromLinkBuilder:e.has("menu")||e.has("share"),waitlistEntryToken:e.get("waitlistEntryToken"),firstTouchAt:U(r),clientChannelType:L({locationId:i,providerId:o,interactions:(0,c.bN)()}),appointmentId:e.get("appointmentId"),giftCardCode:e.get("claim-gift")||e.get("claim_gift"),offerItemId:e.get("offerItemId"),offerItems:e.get("offerItems")?.split(",")||null,cartId:e.get("cartId")||null,rewardIds:void 0,providerReferences:t?[t]:null,referralCode:s||void 0,preferredDate:e.get("preferredDate")||null,preferredTimeslot:e.get("preferredTimeslot")||null},shouldAutoContinue:!f,capabilities:["CART_ID","SERVICE_ADDONS"]}})},[f,o,i,r,J.state,Q,R,Z]),et=(0,a.useCallback)(async(e,t)=>{if(E)return;let i=t?.shouldDisableUI??!0,n=t?.shouldFailGracefully??!0;i&&T(!0);let a=null;try{a=await e()}catch{}if(!a&&n)X((0,k.__)`Something went wrong, please try again later.`);else{let e=(0,u.gy)(a?.layout);b(a?.modal!=null&&_&&!t?.shouldUpdateScreenWhenModalIsOpened?{..._,modal:a?.modal,toasts:a?.toasts,layout:{..._?.layout,accessoryBars:e?.accessoryBars}}:a)}i&&T(!1)},[_,E,X]),ei=(0,a.useCallback)(async()=>et(async()=>{let e=await ee();return(0,u.gy)(e.result.bookingFlowInitialize)}),[et,ee]);(0,a.useEffect)(()=>{let e=null!==Z;async function t(){y.current=!0,await et(async()=>{let e=R||new URLSearchParams,{rwgToken:t}=(0,z.VP)(e,o),n=await ee();n.errors?.length&&M(n.errors[0]),e.get("cartId")||$.m3.tempBookingFlowStarted({location_id:i,provider_id:Number(o),booking_flow_type:"new_server_driven"});let a=e.get("entryPoint");if(t&&(a="google_reserve"),a){["book_again_carousel","book_again_appointment_detail","book_again_appointments_list","venue_book_service_list","venue_book_service_detail","venue_see_all_services","venue_team_member_individual","venue_team_member_see_all","all_offer_book_individual_appointment","all_offer_book_group_appointment","search_see_more","search_time_selected","venue_choose_location","loyalty_book_now","waitlist_detail_available_to_book","professional_profile_book_now","book_now_link","referral_book_now","google_reserve"].includes(a)?$.m3.bookingFlowClientStarted({location_id:i,provider_id:Number(o),booking_flow_entry_point:a}):(0,A.Oz)(Error(`[BF_v2] - Unhandled entry point: ${a}`));let{entryPoint:t,...n}=Object.fromEntries(e.entries());K((0,p.l3k)(r,n))}return(0,u.gy)(n.result.bookingFlowInitialize)},{shouldFailGracefully:!1,shouldUpdateScreenWhenModalIsOpened:!0}),C(!1)}g&&!y.current&&e&&t()},[et,ee,i,r,o,R,g,K,Z]);let en=(0,V.X)(()=>{if(v)return;let e=_?.screen.__typename,t=function(){switch(e){case"BookingFlowScreenServices":return"services";case"BookingFlowScreenTime":return"date_time";case"BookingFlowScreenPatchTest":return"patch_test";case"BookingFlowScreenFirstVisit":return"ncf_question";case"BookingFlowScreenAllEmployees":case"BookingFlowScreenEmployee":return"team_members";default:return null}}();t&&$.m3.bookingFlowExited({booking_flow_step_name:t,location_id:i,provider_id:Number(o),cart_id:_?.cartId})});(0,a.useEffect)(()=>en,[]);let ea=(0,a.useMemo)(()=>({error:D,data:_,isDone:v,isLoading:S,isValidating:E,mutate:et,reload:ei,locationId:i,locationSlug:r,locationProviderId:o,locationName:l,locationTrackingCodes:x,optimisticHint:B,setOptimisticHint:O,setIsDone:w}),[D,_,v,S,E,et,ei,i,r,o,l,x,B]);return(0,n.jsx)(Y.Provider,{value:ea,children:t})};function Z(){let e=(0,a.useContext)(Y);if(!e)throw Error("useBookingFlowRoot must be used inside a <BookingFlowRootContextProvider>");return e}let J=(0,a.createContext)(null);function Q(){let{data:e,mutate:t,setOptimisticHint:i}=Z(),{trigger:n}=(0,s.$9)(K),r=(0,j.d)("laptop"),o=(0,W.r)("B2C_WEB_VENUE_PORTFOLIO"),l=(0,m.tH)("B2C_WEB_BOOKING_FLOW_CONFIRM_STEP_REVAMP");return(0,a.useCallback)(async a=>{a.optimisticHint&&i(a.optimisticHint),await t(async()=>{let t=await n({id:a.id,cartId:e?.cartId,shouldAutoContinue:!r,portfolioEnabled:o.state??!1,confirmStepRevampEnabled:!!l});return(0,u.gy)(t.result.bookingFlowActionButtonPressed)}),i(null)},[t,n,e?.cartId,r,i,o.state,l])}function ee(e,t){let i=Q(),n=t?.blockedStateAs??"disabled",s=t?.trackingCallback,r=(0,a.useContext)(J),{data:o,isValidating:l,optimisticHint:d}=Z(),[c,u]=(0,a.useState)(!1),m="SCREEN"!==r||!(o?.modal&&!d||d?.targetId.startsWith("BookingFlowModal"));return(0,a.useMemo)(()=>e?{onAction:async()=>{!e.id||e.isDisabled||l||(u(!0),await i({id:e.id,optimisticHint:e.optimisticHint}),u(!1),s?.())},...m?"disabled"===n?{isDisabled:!c&&(!!e.isDisabled||l),isPending:c}:{isDisabled:!c&&!l&&!!e.isDisabled,isPending:c||l}:{isDisabled:!!e.isDisabled,isPending:c},..."label"in e&&{label:e.label}}:null,[e,c,l,m,s,n,i])}let et=()=>{let e=(0,j.d)("laptop");return(0,n.jsx)(C.f,{children:(0,n.jsxs)("div",{className:T().wrapper,children:[(0,n.jsx)(_.w,{suffix:(0,n.jsx)(v.E,{width:"24px",height:"24px",shape:"rounded"})}),(0,n.jsx)(y.p,{header:(0,n.jsx)(w.E.Skeleton,{width:e?"295px":"175px",font:"body-s-medium"}),description:(0,n.jsx)(w.E.Skeleton,{width:e?"479px":"248px",font:"body-s-medium"}),topSlot:(0,n.jsx)(v.E,{width:"64px",height:"64px",shape:"hard"}),actionSlot:(0,n.jsx)(v.E,{width:"137px",height:"36px",shape:"rounded"}),unsafeClassName:T().placeholder})]})})},ei=e=>{let{locationSlug:t}=Z(),{navigateBack:i}=(0,d.c)(),s=(0,a.useCallback)(()=>{i({pathname:(0,p.VuA)(t)})},[i,t]);return(0,n.jsx)(C.f,{children:(0,n.jsxs)("div",{className:T().wrapper,children:[(0,n.jsx)(_.w,{suffix:(0,n.jsx)(g.$,{onAction:s,variant:"tertiary",size:"l",icon:x.U,isLabelHidden:!0,isCompact:!0,qaType:"close-button-booking-flow-layout-header",children:(0,k.__)`Close`})}),(0,n.jsx)(y.p,{...e,unsafeClassName:T().placeholder})]})})},en=()=>{let{reload:e}=Z();return(0,n.jsx)(ei,{header:(0,k.__)("An unexpected error has occurred"),description:(0,k.__)("We are having some trouble loading the app, please try again."),topSlot:(0,n.jsx)(S.w,{noBorder:!0,size:"2xl",image:(0,n.jsx)(b._,{src:f.A.src,alt:(0,k.__)`Illustration`,ratio:"1x1"})}),actionSlot:(0,n.jsx)(g.$,{onAction:e,children:(0,k.__)("Reload")})})},ea=e=>{let{type:t}=e;return(0,a.useEffect)(()=>{(0,A.Oz)(Error(`[BF_v2] - Unexpected view type: ${t}`))},[t]),(0,n.jsx)(en,{})};var es=i(66853),er=i(49995),eo=i(40886),el=i.n(eo);let ed=(0,a.memo)(e=>{let{action:t,text:i}=e,a=ee(t);return(0,n.jsx)(es.N,{text:i,onAction:a.onAction})}),ec=e=>{let{node:t}=e;switch(t.__typename){case"BookingFlowRichTextFragmentText":{let e=t.text;return t.bold&&t.italic?e=(0,n.jsx)("b",{children:(0,n.jsx)("em",{children:e})}):t.bold?e=(0,n.jsx)("b",{children:e}):t.italic&&(e=(0,n.jsx)("em",{children:e})),t.action?(0,n.jsx)(ed,{action:t.action,text:e}):e}case"BookingFlowRichTextFragmentCustomLink":return(0,n.jsx)(es.N,{text:t.text,onAction:t.onAction});default:{let{fallback:e}=t;return e?(0,n.jsx)(ec,{node:e}):null}}},eu=(0,a.memo)(e=>{let{children:t,className:i}=e,a=(0,u.gy)(t);return(0,n.jsx)("span",{className:(0,er.A)(el().self,i),children:a?.fragments.reduce((e,t,i)=>i<a.fragments.length-1?{paragraphs:e.paragraphs,next:[...e.next,t]}:{paragraphs:[...e.paragraphs,[...e.next,t]],next:[]},{paragraphs:[],next:[]}).paragraphs.map(e=>(0,n.jsx)("span",{children:e.map((e,t)=>(0,n.jsx)(ec,{node:e},`${t}-${e.__typename}`))},e.map(e=>"BookingFlowRichTextFragmentText"===e.__typename?e.text:"").join("-")))})});eu.displayName="BookingFlowRichText";var em=i(90033),ep=i(67015),eh=i(18577),ex=i(93485),ef=i(33852),eg=i(36249),ey=i(20346),e_=i(25075),ej=i(86643),eb=i(68468),ev=i(74377),ew=i(12155),eS=i(3491),eC=i(50447);function ek(e){return"true"===e.get("menu")?M.Cu.Direct:M.Cu.Generic}var eA=i(24697);let eE=B.DAF,eT=e=>{let{isOpen:t,onClose:i,onOpen:s,onSuccess:r,setOpen:o}=e,{email:l,onError:d,onBack:c,title:m,showSubtitle:p,subtitle:h,view:x,setView:f,setEmail:g,setShowSubtitle:y,signUpFields:_}=(0,ew.X)({isOpen:t,titles:{identity:(0,k.__)`Log in or sign up`},subtitles:{identity:(0,k.__)`Log in or sign up to complete your booking`}}),{data:{profile:j}={}}=(0,ef.bQ)(),b=(0,eg.ok)(),{locationSlug:v}=(0,eg.g)(),S=!!j,C=(0,a.useRef)(!1),A=S&&(0,u.gy)(j).requiresUpdatePhoneNumber?"add_phone":x,E="add_phone"===A?(0,k.__)`Add Phone`:m,T="add_phone"===A?(0,k.__)`Enter your phone number to confirm your appointment`:h,B=async()=>{if(C.current)return;C.current=!0;let e=null;try{e=await (0,eS.L)(eE,{slug:v,channelType:ek(b)})}catch{}return r({requiresFirstVisitCheck:!e?.data.user?.isKnownAtLocation})},P=async e=>e.requiresUpdatePhoneNumber?Promise.resolve():B();return S&&"add_phone"!==A&&t&&B(),(0,n.jsxs)(eh.y,{headerInBodySlot:p&&T?(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutral",children:T}):null,isOpen:t,onClose:i,onOpen:s,setOpen:o,title:E,qaType:"authmodal-dialog",mobileHeight:"full",children:[(0,n.jsx)(eh.y.Header,{backButtonIconSlot:ex.A,onBack:c,onClose:i,qaType:"authmodal-header"}),(0,n.jsx)(eh.y.Body,{children:(0,n.jsxs)(ey.ZP,{showSubtitle:!1,useLegacyModal:!0,children:["reset_password"===A&&(0,n.jsx)(e_.X,{email:l,onError:d,setShowSubtitle:y,setView:f}),"login"===A&&(0,n.jsx)(eb.a,{email:l,onError:d,onLogin:P,setView:f,hideRequiredHint:!0}),"signup"===A&&(0,n.jsx)(ev.H,{signUpFields:_,email:l,onError:d,onLogin:P,setView:f}),"identity"===A&&(0,n.jsx)(ej.l,{email:l,onLogin:P,setEmail:g,setView:f}),"add_phone"===A&&(0,n.jsx)(eA.G,{onSuccess:B,hideRequiredHint:!0})]})})]})},eB=()=>{},eP=e=>{let{fragment:t}=e,i=ee((0,u.gy)(t.authSubmit)),a=ee((0,u.gy)(t.closeAction));return(0,n.jsx)(eT,{isOpen:!0,setOpen:eB,onOpen:eB,onClose:a.onAction,onSuccess:i.onAction})},eI=()=>(0,n.jsxs)(eh.y,{title:(0,n.jsx)(v.E,{shape:"rounded",height:"32px",width:"67%"}),isOpen:!0,setOpen:eB,onOpen:eB,onClose:()=>{},children:[(0,n.jsx)(eh.y.Header,{suffix:(0,n.jsx)(v.E,{shape:"hard",height:"24px",width:"24px"}),onClose:()=>Promise.resolve()}),(0,n.jsxs)(eh.y.Body,{children:[(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(w.E.Skeleton,{font:"body-m-regular",width:"228px"})}),(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsxs)(ep.s,{direction:"column",gap:"150",children:[(0,n.jsx)(v.E,{shape:"rounded",height:"48px",width:"100%"}),(0,n.jsx)(v.E,{shape:"rounded",height:"48px",width:"100%"}),(0,n.jsx)(em.c,{children:(0,n.jsx)(w.E.Skeleton,{font:"body-m-regular",width:"28px"})}),(0,n.jsx)(v.E,{shape:"hard",height:"48px",width:"100%"})]})})]}),(0,n.jsx)(eh.y.Footer,{children:(0,n.jsx)(v.E,{shape:"hard",height:"48px",width:"100%"})})]}),eF=e=>{let{data:t}=e,i=(0,u.gy)(t);return i?(0,n.jsx)(eP,{fragment:i}):(0,n.jsx)(eI,{})};var eN=i(59850);let eO=e=>{let{tiles:t,shouldTrackEvent:i}=e,{locationId:s,locationProviderId:r,isValidating:o}=Z(),l=Q(),[d,c]=(0,a.useOptimistic)(t,(e,t)=>e.map((e,i)=>({...e,isSelected:i===t}))),u=(0,a.useCallback)((e,t)=>{let n=e.action;if(!n?.id||n?.isDisabled||o)return;i&&$.m3.tempBookingFlowStepCompleted({booking_flow_step_name:"team_members",booking_flow_type:"new_server_driven",location_id:s,provider_id:Number(r)});let d=l({id:n.id,isDisabled:n.isDisabled,optimisticHint:n.optimisticHint});(0,a.startTransition)(async()=>{c?.(t),await d})},[c,l,i,s,r,o]),m=(0,a.useCallback)(e=>{let t=e.previewAction;return!t?.action?.id||t?.isDisabled||o?Promise.resolve():l({id:t.action.id,isDisabled:t.isDisabled,optimisticHint:t.action.optimisticHint})},[l,o]),p=(0,a.useCallback)(e=>"BookingFlowScreenEmployeeTileAction"===e.__typename||"BookingFlowScreenAllEmployeesTileAction"===e.__typename,[]),h=(0,a.useMemo)(()=>d.map((e,t)=>{let i={onAction:()=>u(e,t),label:(0,k.__)("Select"),isDisabled:e.isDisabled,isPending:!1};return p(e)?{...e,__typename:"EmployeeTileAction",selectAction:i,previewAction:null}:{...e,__typename:"EmployeeTileEmployee",selectAction:i,previewAction:e.previewAction&&e.previewText?{onAction:()=>m(e),label:e.previewText,isDisabled:!1,isPending:!1}:null}}),[d,u,m,p]);return(0,n.jsx)(eN.P,{tiles:h})},eD=eN.w;var eM=i(84353),eR=i.n(eM);let eL=()=>{},e$=e=>{let t=ee(e.closeAction);return(0,n.jsx)(eh.y,{title:e.title,isOpen:!0,setOpen:eL,onOpen:eL,onClose:t?.onAction??eL,size:e.size??"wide",unsafeClassName:eR().self,children:e.content})},eW=e=>{let{fragment:t}=e,[i,s]=(0,a.useState)("404px"),r=ee((0,u.gy)(t.closeAction));(0,a.useEffect)(()=>{s(null)},[]);let o=(0,a.useMemo)(()=>t.choices.map(e=>{let t=(0,u.gy)(e.action),{formatted:i}=e.price??{};return e.icon?{__typename:"BookingFlowScreenEmployeeTileAction",icon:e.icon,action:{id:t?.id??"",...t},previewAction:null,previewText:null,isSelected:e.isSelected,isDisabled:e.isDisabled,caption:e.jobTitle,title:e.displayName,formatted:i}:{__typename:"BookingFlowScreenEmployeeTileEmployee",action:{id:t?.id??"",...t},previewAction:(0,u.gy)(e.previewAction),previewText:e.previewText,isSelected:e.isSelected,isDisabled:e.isDisabled,caption:e.jobTitle,name:e.displayName,rating:e.rating,avatar:e.avatar,formatted:i}}),[t.choices]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.y.Header,{onClose:r.onAction}),(0,n.jsx)(eh.y.Body,{unsafeStyle:i?{"--content-height":i}:void 0,children:(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(eO,{tiles:o,shouldTrackEvent:!1})})})]})},ez=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.y.Header,{suffix:(0,n.jsx)(v.E,{shape:"hard",height:"24px",width:"24px"}),onClose:()=>Promise.resolve()}),(0,n.jsx)(eh.y.Body,{children:(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(eD,{})})})]}),eq=e=>{let{data:t}=e,i=(0,u.gy)(t);return(0,n.jsx)(e$,{...i?{title:i.title,content:(0,n.jsx)(eW,{fragment:i}),closeAction:i.closeAction}:{title:(0,n.jsx)(v.E,{shape:"rounded",height:"32px",width:"67%"}),content:(0,n.jsx)(ez,{}),closeAction:void 0}})};var eG=i(59952),eV=i(95187),eU=i(84288),eH=i(35399),eK=i(12784),eY=i(19822),eX=i(11060),eZ=i.n(eX);let eJ=()=>{};function eQ(e){let{style:t,className:i,tile:{caption:a,name:s,employee:r}}=e,o=ee(r);return(0,n.jsx)(eK.$.Item,{primitiveType:"none",value:`${s}${a}`,unsafeClassName:i,unsafeStyle:t,children:e=>{let{labelProps:t,descriptionProps:i}=e;return(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.E,{...t,as:"h3",font:"body-m-medium",children:s}),(0,n.jsx)(w.E,{...i,font:"body-s-regular",color:"neutralFaded",mb:"150",children:a}),r&&(0,n.jsx)(g.$,{variant:"secondary",shape:"pill",size:"m",onAction:o.onAction,isDisabled:o.isDisabled,prefix:(0,n.jsx)(eH.K.Affix,{prefixType:"compact",size:"m",children:(0,n.jsx)(eU.e,{size:"xs",src:r.avatar?.url,firstName:r.initials||""})}),suffix:(0,n.jsx)(g.$.IconAffix,{icon:eG.D}),children:r.displayName})]})})}})}let e0=()=>{let{getOrderedAppearSequenceItemProps:e}=(0,eV.y)({animationDelay:50,animationDuration:500});return(0,n.jsx)(eK.$,{choiceType:"single",name:"select-service-employee",onChange:eJ,value:null,children:[{attendeeDisplayNameWidth:"45%",items:[{nameWidth:"45%",captionWidth:"85%"},{nameWidth:"35%",captionWidth:"65%"},{nameWidth:"37%",captionWidth:"92%"}]}].map(t=>{let{attendeeDisplayNameWidth:i,items:a}=t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.E.Skeleton,{font:"header-s-semibold",unsafeClassName:eZ().attendeeName,width:i}),a.map((t,i)=>{let{nameWidth:a,captionWidth:s}=t;return(0,n.jsx)(eK.$.Item,{primitiveType:"none",value:`${a}${s}`,...e(`TILE_${i}`),children:()=>(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(ep.s,{direction:"column",gap:"150",unsafeStyle:{width:"100%"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(w.E.Skeleton,{font:"body-m-medium",width:a}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-regular",width:s})]}),(0,n.jsx)(v.E,{shape:"rounded",width:"150px",height:"36px"})]})})},`${a}_${s}`)})]})})})},e1=e=>{let{tiles:t}=e,{getOrderedAppearSequenceItemProps:i}=(0,eV.y)({animationDelay:50,animationDuration:500});return(0,n.jsx)(eK.$,{choiceType:"single",name:"select-service-employee",onChange:eJ,value:null,children:t.map(e=>(0,n.jsxs)(a.Fragment,{children:[e.displayName?(0,n.jsx)(w.E,{font:"header-s-semibold",unsafeClassName:eZ().attendeeName,children:e.displayName}):null,e.items.map((e,t)=>(0,n.jsx)(eQ,{tile:e,...i(`TILE_${t}`)},`${e.name}_${e.caption}`))]},e.displayName))})},e2=e=>{let{fragment:t}=e,[i,s]=(0,a.useState)("522px"),r=ee((0,u.gy)(t.closeAction));(0,a.useEffect)(()=>{s(null)},[]);let{attendees:o}=(0,u.aO)(t);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.y.Header,{onClose:r.onAction}),(0,n.jsx)(eh.y.Body,{unsafeStyle:i?{"--content-height":i}:void 0,children:(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(e1,{tiles:o})})})]})},e3=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.y.Header,{suffix:(0,n.jsx)(v.E,{shape:"hard",height:"24px",width:"24px"}),onClose:()=>Promise.resolve()}),(0,n.jsx)(eh.y.Body,{children:(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(e0,{})})})]}),e4=e=>{let{data:t}=e,i=(0,u.gy)(t);return(0,n.jsx)(e$,{...i?{title:i.title,content:(0,n.jsx)(e2,{fragment:i}),closeAction:i.closeAction}:{title:(0,n.jsx)(v.E,{shape:"rounded",height:"32px",width:"67%"}),content:(0,n.jsx)(e3,{}),closeAction:void 0}})};var e5=i(38454),e8=i(51227),e7=i(34700);let e6=e=>{let{data:t}=e,i=(0,a.useRef)(!1),s=(0,a.useRef)(!1),r=(0,e5.Q)(),o=(0,u.gy)(t),l=ee(o?.closeAction?.action),d=(0,e7.V)({key:e8.Tj});(0,a.useEffect)(()=>{!i.current||r||s.current||(s.current=!0,l?.onAction())},[l,r]),(0,a.useEffect)(()=>{i.current||(d.openModal(),i.current=!0)},[d]);let c=(0,a.useCallback)(()=>d.closeModal(),[d]);return(0,n.jsx)("div",{style:{viewTransitionName:"disabled"},children:(0,n.jsx)(e8.kM,{fragment:o?.employeeProfile,isOpen:d.isOpen,close:c,includeBookNowFooter:!1})})};var e9=i(12190),te=i(67813),tt=i(14083),ti=i(97034),tn=i(70905),ta=i(77118),ts=i(96612),tr=i(77058),to=i(44773),tl=i(43130),td=i(93024),tc=i(84266),tu=i(99041),tm=i(14321),tp=i(79293),th=i(88798),tx=i(81177);let tf=B.mF3;var tg=i(78936),ty=i(82316),t_=i(4929),tj=i(18743),tb=i(77725),tv=i(12510),tw=i.n(tv),tS=i(22152),tC=i.n(tS),tk=i(15171),tA=i.n(tk);let tE=e=>{let{withSidePadding:t=!0,children:i}=e,a=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(ty.P.Title,{children:[(0,n.jsx)(tb.b,{gte:"laptop",children:(0,n.jsx)("div",{children:(0,n.jsx)(t_.s,{titleAs:"h1",title:(0,n.jsx)(v.E,{width:"60%",height:"32px"}),subtitle:(0,n.jsxs)(ep.s,{gap:"100",children:[(0,n.jsx)(w.E.Skeleton,{width:"56px",font:"body-s-medium"}),(0,n.jsx)(w.E.Skeleton,{width:"67px",font:"body-s-medium"}),(0,n.jsx)(w.E.Skeleton,{width:"65px",font:"body-s-medium"}),(0,n.jsx)(w.E.Skeleton,{width:"71px",font:"body-s-medium"})]})})})}),(0,n.jsx)(tb.b,{lt:"laptop",children:(0,n.jsx)("div",{children:(0,n.jsx)(t_.s,{titleAs:"h1",title:(0,n.jsx)(v.E,{width:"60%",height:"32px"}),subtitle:(0,n.jsx)(v.E,{width:"210px",height:"22px"}),withSidePaddings:!t})})})]}),(0,n.jsx)(ty.P.Content,{children:i}),(0,n.jsx)(tb.b,{gte:"laptop",children:(0,n.jsx)(ty.P.Sidebar,{isSticky:!0,top:"108px",hasOffset:!0,children:(0,n.jsxs)(tg.Z,{id:"booking-flow-cart",horizontalPadding:"flush",verticalPadding:"flush",qaType:"cart",unsafeClassName:tw().self,children:[(0,n.jsx)("div",{className:tw().locationDetails,children:(0,n.jsx)(tg.Z.Header,{variant:"lowest",horizontalPadding:"l",children:(0,n.jsxs)("div",{className:tA().self,children:[(0,n.jsx)(v.E,{height:"64px",width:"64px"}),(0,n.jsxs)(ep.s,{gap:"25",direction:"vertical",unsafeStyle:{minWidth:"0"},children:[(0,n.jsx)(w.E.Skeleton,{font:"body-m-semibold",width:"140px"}),(0,n.jsx)(v.E,{height:"20px",width:"170px"}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-regular",width:"197px"})]})]})})}),(0,n.jsx)(tg.Z.Section,{variant:"lowest",verticalPadding:"m",horizontalPadding:"l",children:(0,n.jsx)(w.E.Skeleton,{font:"body-s-regular",width:"150px"})}),(0,n.jsx)(em.c,{verticalGap:"200",horizontalGap:"300"}),(0,n.jsx)("div",{className:tC().self,children:(0,n.jsx)(tg.Z.Section,{variant:"lowest",verticalPadding:"flush",horizontalPadding:"l",children:(0,n.jsx)(ep.s,{direction:"vertical",gap:"25",children:(0,n.jsx)(eY.c,{children:(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsx)(w.E.Skeleton,{font:"body-m-semibold",width:"77px"}),rightSection:(0,n.jsx)(w.E.Skeleton,{font:"body-m-semibold",width:"57px"}),rightSectionAlignment:"flex-start"})})})})})}),(0,n.jsx)(tg.Z.Footer,{variant:"lowest",horizontalPadding:"l",unsafeClassName:tw().footerWrapper,children:(0,n.jsx)(v.E,{shape:"rounded",height:"48px",width:"100%"})})]})})})]});return(0,n.jsx)(C.f,{children:(0,n.jsxs)(tj.s,{width:"wide",children:[(0,n.jsx)(tj.s.Header,{}),(0,n.jsx)(tb.b,{lt:"laptop",children:(0,n.jsx)(tj.s.Container,{hasSidePadding:t,children:(0,n.jsx)(ty.P,{type:"singleWithTitle",direction:"vertical",rowGap:"m",children:a})})}),(0,n.jsx)(tb.b,{gte:"laptop",lt:"desktop",children:(0,n.jsx)(tj.s.Container,{hasSidePadding:t,children:(0,n.jsx)(ty.P,{type:"sidebarAfterOffsetWithTitle",direction:"horizontal",rowGap:"m",columnGap:"m",sidebarWidth:"ml",children:a})})}),(0,n.jsx)(tb.b,{gte:"desktop",children:(0,n.jsx)(tj.s.Container,{hasSidePadding:t,children:(0,n.jsx)(ty.P,{type:"sidebarAfterOffsetWithTitle",direction:"horizontal",rowGap:"m",columnGap:"xl",sidebarWidth:"l",children:a})})})]})})};var tT=i(59765),tB=i(93759),tP=i(99373),tI=i(30537),tF=i(29455),tN=i(5001),tO=i(60952),tD=i(36164),tM=i(96281),tR=i(8132),tL=i(25308),t$=i.n(tL);let tW=e=>{let{item:t,onItemClick:i}=e,a=ee((0,u.gy)(t.action)??null,{trackingCallback:i}),s=(0,n.jsx)(tR.A,{leftSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.E,{font:"body-s-medium",overflow:"break",children:t.name}),(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:(0,n.jsx)(eu,{children:t.caption})}),t.membership?(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:(0,n.jsx)(eu,{children:t.membership})}):null,t.serviceAddons?.length?(0,n.jsx)("ul",{className:t$().serviceAddonsList,children:t.serviceAddons.map((e,t)=>(0,n.jsx)("li",{children:(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:(0,n.jsx)(tr.D,{children:e})})},t))}):null]}),rightSection:(0,n.jsxs)("div",{className:t$().pricing,children:[t.price.formatted?(0,n.jsx)(w.E,{font:"body-s-medium",color:"neutral",children:t.price.formatted}):null,t.priceWithoutDiscounts?(0,n.jsx)(w.E,{font:"body-s-regular",color:"ghost",textTransform:"strikethrough",children:t.priceWithoutDiscounts.formatted}):null]})});return a?(0,n.jsx)(tO.E,{className:t$().itemButton,onAction:a.onAction,isDisabled:a.isDisabled,children:s}):s},tz=e=>{let{attendees:t,onItemClick:i}=e,a=(0,j.d)("laptop")?"200":"150";return(0,n.jsx)("div",{children:t.flatMap(e=>e.items).length?t.map((e,t,s)=>{let r=s.length>1;return(0,n.jsxs)("div",{children:[r?(0,n.jsxs)(n.Fragment,{children:[0!==t&&(0,n.jsx)(em.c,{verticalGap:"250"}),(0,n.jsx)(w.E,{font:"body-m-semibold",mb:"200",children:e.name})]}):null,(0,n.jsx)(tt.B,{gap:a,direction:"vertical",display:"flex",children:e.items.length?e.items.map((e,t)=>(0,n.jsx)(tW,{item:e,onItemClick:i},`${e.name}_${t}`)):(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:(0,k.tS)("Displays in booking flow cart when no items are added","No services selected")})})]},`${e.name}_${t}`)}):(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:(0,k.tS)("Displays in booking flow cart when no items are added","No services selected")})})},tq=e=>{let{subtotalLabel:t,subtotal:i,discountsTotalLabel:a,discountsTotal:s,priceTotalLabel:r,priceTotal:o,taxTotalLabel:l,taxTotal:d}=e,c=i?.formatted!=null&&t,u=s?.formatted!=null&&a,m=d?.formatted!=null&&l,p=(0,j.d)("laptop")?"200":"250";return(0,n.jsx)(tg.Z.Section,{variant:"lowest",verticalPadding:"flush",horizontalPadding:{default:"flush",laptop:"l"},children:(0,n.jsxs)(ep.s,{direction:"vertical",gap:"25",children:[(c||u||m)&&(0,n.jsx)(em.c,{verticalGap:p,unsafeStyle:{marginTop:0}}),c?(0,n.jsx)(tR.A,{leftSection:(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:t}),rightSection:(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:i.formatted})}):null,u?(0,n.jsx)(tR.A,{leftSection:(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:a}),rightSection:(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:s.formatted})}):null,m?(0,n.jsx)(tR.A,{leftSection:(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:l}),rightSection:(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:d.formatted})}):null,(0,n.jsx)(em.c,{verticalGap:p,unsafeStyle:{marginTop:c||u||m?void 0:0}}),(0,n.jsx)(tR.A,{leftSection:(0,n.jsx)(w.E,{font:"body-m-semibold",children:r}),rightSection:(0,n.jsx)(w.E,{font:"body-m-semibold",children:o.formatted})})]})})};var tG=i(964),tV=i.n(tG);let tU=e=>{let{header:t,caption:i,cartPreview:s,continueAction:r,slotFooter:o}=e,l=(0,u.gy)(s),{data:d}=Z(),[c,m]=(0,a.useState)(!1),[p,h]=(0,a.useState)(!1),[f,y]=(0,a.useState)(!1),_=(0,tD.w)(),j=(0,tM.b)({viewTransitionName:"cart-popup"}),b=(0,a.useRef)(null),v=(0,a.useRef)(null),S=(0,a.useRef)(!1),C=(0,a.useRef)(null),A=(0,a.useCallback)(()=>{c&&y(!0)},[c]),E=(0,a.useCallback)(()=>{c&&y(!1)},[c]);(0,a.useEffect)(()=>{c||y(!1)},[c]),(0,a.useEffect)(()=>(C.current&&clearTimeout(C.current),c?h(!0):C.current=setTimeout(()=>{h(!1)},300),()=>{C.current&&clearTimeout(C.current)}),[c]);let T=(0,a.useCallback)(()=>{c||$.m3.bookingFlowMobileCartOpened({cart_id:d?.cartId}),_?_.transition(()=>m(e=>!e)):m(e=>!e)},[_,c,d?.cartId]),B=(0,a.useCallback)(()=>{_?_.transition(()=>m(!1)):m(!1)},[_]),P=(0,a.useCallback)(()=>{$.m3.bookingFlowMobileCartItemOpened({cart_id:d?.cartId})},[d?.cartId]);(0,a.useEffect)(()=>{if(c){let e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}},[c]),(0,a.useEffect)(()=>{if(!c)return;let e=e=>{"Escape"===e.key&&B()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[c,B]),(0,a.useEffect)(()=>{if(c){S.current=!0;let e=v.current?.querySelector("button");e?.focus()}else if(S.current){let e=b.current?.querySelector("button");e?.focus()}},[c]);let I=t||i,F=!!l,N=(0,n.jsxs)("div",{className:tV().details,children:[(0,n.jsx)(w.E,{font:"body-s-semibold",children:t}),i&&(0,n.jsxs)(ep.s,{direction:"horizontal",gap:"100",alignItems:"center",children:[F&&(0,n.jsx)(tN.K,{size:"s",color:"neutralFaded"}),(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",overflow:"ellipsis",noWrap:!0,children:i})]})]});return(0,n.jsxs)(n.Fragment,{children:[j.element,o,(0,n.jsx)("button",{type:"button",className:(0,er.A)(tV().backdrop,c&&tV().backdropVisible),onClick:B,tabIndex:c?0:-1,"aria-label":(0,k.__)`Close cart popup`,"aria-hidden":!c}),(0,n.jsxs)(tj.s.BottomBar,{unsafeClassName:(0,er.A)(tV().bottomBar,(c||p)&&tV().expanded),children:[F&&(0,n.jsxs)("div",{className:(0,er.A)(tV().expandableCard,c&&tV().cardExpanded),style:j.style,"aria-hidden":!c,role:"dialog","aria-modal":c||void 0,"aria-labelledby":"cart-popup-title","data-qa":"cart-popup",children:[(0,n.jsxs)("div",{className:(0,er.A)(tV().cardHeader,f&&tV().cardHeaderWithTitle),children:[(0,n.jsx)(w.E,{font:"header-s-semibold",overflow:"ellipsis",noWrap:!0,"aria-hidden":!f,unsafeClassName:(0,er.A)(tV().cardHeaderTitle,f&&tV().cardHeaderTitleVisible),children:l.title}),(0,n.jsx)("div",{ref:v,children:(0,n.jsx)(g.$,{icon:x.U,isCompact:!0,isLabelHidden:!0,onAction:()=>(B(),Promise.resolve()),size:"l",variant:"tertiary",children:(0,k.__)`Close`})})]}),(0,n.jsxs)("div",{className:tV().cardContent,children:[(0,n.jsx)(tx.Gj,{children:(0,n.jsx)(tx.Lf,{onHide:A,onShow:E,children:(0,n.jsx)(w.E,{as:"h2",id:"cart-popup-title",font:"header-m-semibold",unsafeClassName:tV().cardTitle,children:l.title})})}),(0,n.jsx)("div",{className:tV().cardItemsList,children:(0,n.jsx)(tz,{attendees:l.attendees,onItemClick:P})}),(0,n.jsx)("div",{className:tV().cardFooter,children:(0,n.jsx)(tq,{subtotalLabel:l.subtotalLabel,subtotal:l.subtotal,discountsTotalLabel:l.discountsTotalLabel,discountsTotal:l.discountsTotal,taxTotalLabel:l.taxTotalLabel,taxTotal:l.taxTotal,priceTotalLabel:l.priceTotalLabel,priceTotal:l.priceTotal})})]})]}),(0,n.jsxs)(ep.s,{justifyContent:"space-between",direction:"horizontal",gap:"200",unsafeClassName:(0,er.A)(tV().container,c&&tV().containerExpanded),qaType:"bottom-bar",children:[I&&(F?(0,n.jsx)("div",{ref:b,className:(0,er.A)(tV().clickableHeader,c&&tV().clickableHeaderHidden),style:{viewTransitionName:"cart-popup-summary"},"aria-hidden":c,children:(0,n.jsx)(tO.E,{onAction:()=>(T(),Promise.resolve()),tabIndex:c?-1:0,children:N})}):(0,n.jsx)("div",{children:N})),r&&(0,n.jsx)("div",{className:(0,er.A)(tV().continueButtonWrapper,c&&tV().continueButtonWrapperExpanded),children:(0,n.jsx)(g.$,{variant:"primary",size:"l",onAction:r.onAction,isDisabled:r.isDisabled,isPending:r.isPending,children:r.label})})]})]})]})};var tH=i(93415);let tK=e=>{let{dateFormatted:t,timeRangeFormatted:i,waitlistDateTimeRanges:s}=e,r=(0,j.d)("laptop"),o=(0,a.useMemo)(()=>[t,...s||[]].filter(e=>!!e),[t,s]),l=(0,a.useMemo)(()=>i?[i]:[],[i]);return 0===l.length&&0===o.length?null:(0,n.jsx)(tg.Z.Section,{variant:"lowest",verticalPadding:r?"l":"flush",horizontalPadding:r?"l":"flush",children:(0,n.jsxs)(ep.s,{direction:"column",justifyContent:"center",gap:"150",children:[o.map((e,t)=>(0,n.jsx)(ep.s,{direction:"row",alignContent:"center",gap:"100",children:(0,n.jsxs)(ep.s,{direction:"row",alignContent:"center",gap:"100",children:[(0,n.jsx)(tn.C,{color:"neutralFaded"}),(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:e})]})},e+t)),l.map((e,t)=>(0,n.jsxs)(ep.s,{direction:"row",alignContent:"center",gap:"100",children:[(0,n.jsx)(tH.O,{color:"neutralFaded"}),(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:e})]},e+t))]})})};var tY=i(55540),tX=i(95761),tZ=i(36600);let tJ=e=>{let{name:t,slug:i,address:a,rating:s,avatarUrl:r,reviewsCount:o}=e;return(0,n.jsxs)("div",{className:tA().self,children:[(0,n.jsx)(tX.d,{isExternal:!0,linkTo:(0,p.VuA)(i),children:(0,n.jsx)(S.w,{image:(0,n.jsx)(b._,{alt:`${t} - ${a}`,src:r||"",loading:"lazy"}),size:"2xl"})}),(0,n.jsxs)(ep.s,{gap:"25",direction:"vertical",unsafeStyle:{minWidth:"0"},children:[(0,n.jsx)(w.E,{font:"body-m-semibold",children:t}),s?(0,n.jsx)(tZ.r,{halfStarIconSlot:tY.N,id:"rating",rating:s,ratingCount:o??void 0,stars:"five",variant:"default",size:"m",starVariant:"yellow"}):null,a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tb.b,{gte:"laptop",children:(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",overflow:"ellipsis",noWrap:!0,children:a})}),(0,n.jsx)(tb.b,{lt:"laptop",children:(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",overflow:"ellipsis",children:a})})]}):null]})]})},tQ=e=>{let t;t="CURRENT"===e.state?"current":"NEXT"===e.state?"future":"previous";let i=(0,u.gy)(e.action),a=ee(i?{...i,isDisabled:e.isDisabled}:null);return(0,n.jsx)(tB.J.Item,{text:e.label,onAction:a?.onAction??Promise.resolve,variant:t,iconSlot:ta.v,isLast:e.isLast})},t0=e=>{let{data:t}=e;return(0,n.jsx)(tB.J,{children:t.breadcrumbs.map((e,t,i)=>(0,n.jsx)(tQ,{...e,isLast:t===i.length-1},`${e.label}_${t}`))})},t1=e=>{let{data:t,continueAction:i,slotFooter:s,slotAboveFooter:r}=e,{cart:{name:o,slug:l,address:d,rating:c,avatarUrl:u,reviewsCount:m,dateFormatted:p,timeRangeFormatted:h,waitlistDateTimeRanges:x,subtotalLabel:f,subtotal:y,discountsTotalLabel:_,discountsTotal:j,priceTotalLabel:b,priceTotal:v,taxTotalLabel:w,taxTotal:S,attendees:C}}=t,k=a.useRef(null),{handleScroll:A,showLocationDivider:E,showFooterDivider:T}=(e=>{let[t,i]=(0,a.useState)(!1),[n,s]=(0,a.useState)(!1);return{handleScroll:(0,a.useCallback)((0,tP.n)(()=>{let a=e?.current?.scrollTop??0,r=e?.current?.clientHeight??0,o=(e?.current?.scrollHeight??0)-a-r-5;t&&0===a?i(!1):!t&&a>0&&i(!0),n&&o<=0?s(!1):!n&&o>0&&s(!0)},100),[e,n,t]),showLocationDivider:t,showFooterDivider:n}})(k);return(0,n.jsx)(tg.Z,{id:"booking-flow-cart",horizontalPadding:"flush",verticalPadding:"flush",unsafeClassName:tw().self,children:(0,n.jsxs)("div",{ref:k,className:tw().scrollableWrapper,onScroll:A,children:[(0,n.jsx)("div",{className:(0,er.A)(tw().locationDetails,E&&tw().withDivider),children:(0,n.jsx)(tg.Z.Header,{variant:"lowest",horizontalPadding:"l",children:(0,n.jsx)(tJ,{name:o,slug:l,address:d,rating:c,avatarUrl:u,reviewsCount:m})})}),(0,n.jsx)(tK,{dateFormatted:p,timeRangeFormatted:h,waitlistDateTimeRanges:x}),(0,n.jsx)(tg.Z.Section,{variant:"lowest",verticalPadding:"m",unsafeClassName:tw().itemsList,horizontalPadding:"l",children:(0,n.jsx)(tz,{attendees:C})}),(0,n.jsxs)("div",{className:tw().summaryWrapper,children:[(0,n.jsx)(tq,{subtotalLabel:f,subtotal:y,discountsTotalLabel:_,discountsTotal:j,priceTotalLabel:b,priceTotal:v,taxTotalLabel:w,taxTotal:S}),r]}),(0,n.jsxs)(tg.Z.Footer,{variant:"lowest",horizontalPadding:"l",unsafeClassName:(0,er.A)(tw().footerWrapper,T&&tw().showFooterDivider),children:[s,i?(0,n.jsx)(g.$,{id:"continue-button",type:"button",onAction:i.onAction,variant:"primary",size:"l",isDisabled:i.isDisabled,isPending:i.isPending,isFull:!0,children:i.label}):null]})]})})},t2=e=>{let{data:t,continueAction:i,slotFooter:a}=e,{cartSummaryBar:s}=t;return s||i||a?(0,n.jsx)(tb.b,{lt:"laptop",children:(0,n.jsx)(tU,{header:s?.header,caption:s?.caption,cartPreview:s?.cartPreview,continueAction:i,slotFooter:a})}):null},t3=e=>{let{title:t,description:i,continueAction:s,backAction:r,data:o,children:l,slotFooter:c,slotAboveFooter:m,withShadowOnScroll:h,withSidePadding:x=!0,withCartSummaryBar:f=!0,withInitialScrollToTop:g=!0}=e,y=(0,a.useRef)(!1),{data:_}=Z(),{navigateBack:j,redirectTo:b}=(0,d.c)(),v=(0,eg.ok)(),[w,S]=(0,a.useState)(!1),k=(0,a.useRef)(w),A=(0,tI.Q2)(),E=(0,a.useRef)(A),T=(0,u.gy)(o),B=T.cart.slug,P=(0,a.useRef)(!g);(0,a.useEffect)(()=>{P.current||(P.current=!0,window?.scrollTo({top:0}))},[]),k.current=w;let I=(0,a.useCallback)(()=>{if(y.current)return Promise.resolve();let e=v.get("appointmentId"),t=e?.split(":")[1],i="search"===v.get("via"),n=!!t,a={pathname:(0,p.VuA)(B)};return i?a={pathname:p.Dnh}:n&&(a=(0,p.t8h)(t)),y.current=!0,j(a),setTimeout(()=>{E.current?j(a):b(a)},100),Promise.resolve()},[b,j,B,v.get]),F=(0,a.useCallback)(()=>(T.cart.attendees.flatMap(e=>e.items).length?S(!0):I(),Promise.resolve()),[I,T.cart.attendees]),N=(0,a.useCallback)(()=>(S(!1),Promise.resolve()),[]),{getOrderedAppearSequenceItemProps:O,animationComplete:D}=(0,eV.y)({animationDelay:50,animationDuration:500});!function(e){let{cartId:t,locationSlug:i,handleExit:n,isExitingRef:s,isExitModalOpenRef:r}=e,o=(0,eg.ok)(),{navigateTo:l}=(0,d.c)(),c=(0,a.useRef)(!1);(0,a.useEffect)(()=>{let e=e=>{e.state?.as?.includes("cartId")||n()};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[n]),(0,a.useEffect)(()=>{let e=window.scrollTo.bind(window);return window.scrollTo=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];r.current||e(...i)},()=>{window.scrollTo=e}},[r]),(0,a.useEffect)(()=>{let e=o?.get("cartId");if(s.current||!t||e===t||e&&(!t||c.current))return;let{entryPoint:n,...a}=Object.fromEntries(o.entries()),r={...a,...t&&{cartId:t}};c.current=!0,l((0,p.l3k)(i,r))},[l,i,t,o,s])}({cartId:_?.cartId||null,locationSlug:B,handleExit:F,isExitingRef:y,isExitModalOpenRef:k});let M=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(ty.P.Title,{children:[(0,n.jsx)(tb.b,{gte:"laptop",children:(0,n.jsx)("div",{children:(0,n.jsx)(t_.s,{titleAs:"h1",title:t,subtitle:(0,n.jsx)(t0,{data:T}),description:i})})}),(0,n.jsx)(tb.b,{lt:"laptop",children:(0,n.jsx)("div",{children:(0,n.jsx)(t_.s,{titleAs:"h1",title:t,description:i,withSidePaddings:!x})})})]}),(0,n.jsx)(ty.P.Content,{...D?{}:O("SCREEN"),children:l}),(0,n.jsx)(tb.b,{gte:"laptop",children:(0,n.jsx)(ty.P.Sidebar,{isSticky:!0,top:"108px",hasOffset:!0,children:(0,n.jsx)(t1,{data:T,continueAction:s,slotFooter:c,slotAboveFooter:m})})})]}),R=c||(0,n.jsx)(im,{data:T.accessoryBars});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.f,{children:(0,n.jsxs)(tj.s,{width:"wide",children:[(0,n.jsx)(tj.s.Header,{content:(0,n.jsx)(tj.s.Header.TextTitle,{label:t}),onBack:r?.onAction||(T.canExit?F:void 0),onClose:T.canExit?F:void 0,backButtonIconSlot:ex.A,withShadowOnScroll:h,qaType:"booking-flow-layout-header"}),(0,n.jsx)(tb.b,{lt:"laptop",children:(0,n.jsx)(tj.s.Container,{hasSidePadding:x,children:(0,n.jsx)(ty.P,{type:"singleWithTitle",direction:"vertical",rowGap:"m",children:M})})}),(0,n.jsx)(tb.b,{gte:"laptop",lt:"desktop",children:(0,n.jsx)(tj.s.Container,{hasSidePadding:x,children:(0,n.jsx)(ty.P,{type:"sidebarAfterOffsetWithTitle",direction:"horizontal",rowGap:"m",columnGap:"m",sidebarWidth:"ml",children:M})})}),(0,n.jsx)(tb.b,{gte:"desktop",children:(0,n.jsx)(tj.s.Container,{hasSidePadding:x,children:(0,n.jsx)(ty.P,{type:"sidebarAfterOffsetWithTitle",direction:"horizontal",rowGap:"m",columnGap:"xl",sidebarWidth:"l",children:M})})}),f&&(0,n.jsx)(t2,{data:T,continueAction:s,slotFooter:R})]})}),T.canExit?(0,n.jsx)(tF.m,{onClose:N,onSubmit:I,isOpen:w}):null]})};var t4=i(83168),t5=i.n(t4);let t8=[];function t7(e){try{if(!e.startsWith("http"))return e;let t=new URL(e);return t.pathname+t.search+t.hash}catch{return e}}let t6=e=>{let{title:t,caption:i,...a}=e;return(0,n.jsx)(eY.c,{variant:"medium",..."onAction"in a?{onAction:a.onAction}:{linkTo:t7(a.url)},qaType:"upselling-tile",children:(0,n.jsxs)(eY.c.Content,{children:[(0,n.jsx)(w.E,{font:"body-m-medium",mb:"25",children:t}),(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:i})]})})},t9=e=>{let{tile:t}=e,i=ee((0,u.aO)(t));return(0,n.jsx)(t6,{title:t.title,caption:t.caption,onAction:i.onAction})},ie=e=>{let{tile:t}=e;switch(t.__typename){case"BookingFlowUpsellingItemWithAction":return(0,n.jsx)(t9,{tile:t});case"BookingFlowUpsellingItemWithLink":return(0,n.jsx)(t6,{title:t.title,caption:t.caption,url:t.url});default:return null}},it=e=>{let{text:t,url:i}=e;return(0,n.jsx)(ts.h,{linkTo:t7(i),variant:"accent",children:(0,n.jsxs)(ep.s,{justifyContent:"space-between",padding:{default:["200","200"],laptop:["250","300"]},children:[(0,n.jsxs)(ep.s,{gap:{default:"50",laptop:"150"},children:[(0,n.jsx)(tn.C,{color:"onAccent"}),(0,n.jsx)(w.E,{font:"body-s-regular",color:"onAccent",children:(0,n.jsx)(eu,{children:t})})]}),(0,n.jsx)(ta.v,{color:"onAccent"})]})})},ii=a.memo(e=>{let{name:t,description:i}=e;return(0,n.jsxs)(ep.s,{gap:"50",unsafeClassName:t5().offerItemsList__headerWrapper,direction:"column",children:[(0,n.jsx)(w.E,{font:{default:"header-s-semibold",laptop:"header-m-semibold"},overflow:"break",children:t}),i?(0,n.jsx)(w.E,{font:"body-m-regular",overflow:"break",unsafeClassName:t5().offerItemsList__headerDescription,children:i}):null]})}),ia=a.memo(e=>{let{item:t,onItemIntersectionIn:i,onItemIntersectionOut:s}=e,r=(0,a.useRef)(null),o=ee((0,u.gy)(t.primaryAction)),l=ee((0,u.gy)(t.secondaryAction)),d=(0,u.gy)(t.membershipChipButton?.action),c=ee(t.membershipChipButton?{id:d?.id,isDisabled:t.membershipChipButton.isDisabled,label:t.membershipChipButton.label}:null);(0,tx.KP)(r,{onShow:()=>i(t),onHide:()=>s(t)});let m=(0,j.d)("tablet"),[p,h]=(0,a.useOptimistic)(t,(e,t)=>({...e,isSelected:t})),x=(0,a.useCallback)(()=>{let e=l?.onAction();(0,a.startTransition)(async()=>{let i=(0,u.gy)(t.secondaryAction);i?.optimisticHint||h(!p.isSelected),await e})},[h,l,p,t.secondaryAction]);return(0,n.jsxs)("div",{className:(0,er.A)(t5().offerItemsList__item,t.isLast&&t5()["offerItemsList__item--last"]),children:[(0,n.jsx)("div",{ref:r,children:(0,n.jsx)(eK.$.Item,{isChecked:p.isSelected,variant:"low",primitiveType:"cumulative",value:t.name,primitiveActionText:o.label,onAction:o.onAction,isDisabled:o.isDisabled,onPrimitiveAction:l.isDisabled?void 0:x,qaType:"offer-item",children:e=>{let{labelProps:i,descriptionProps:a}=e;return(0,n.jsxs)("div",{className:t5().content,children:[(0,n.jsx)(w.E,{as:"h3",mb:"25",...i,font:"body-m-medium",overflow:"break",qaType:"offer-item-name",children:t.name}),(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",mb:"25",qaType:"offer-item-caption",children:t.caption}),t.description?(0,n.jsx)(w.E,{...a,color:"neutralFaded",font:"body-s-regular",noWrap:!0,overflow:"ellipsis",qaType:"offer-item-description",children:t.description}):null,(0,n.jsxs)(tt.B,{as:"span",gap:"100",direction:"horizontal",unsafeClassName:t5().pricing,children:[(0,n.jsx)(w.E,{font:"body-s-medium",qaType:"offer-item-price",children:t.price.formatted}),t.discount?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.E,{font:"body-s-medium",color:"neutralFaded",children:" \xa0â¢\xa0 "}),(0,n.jsx)(w.E,{font:"body-s-regular",color:"positive",qaType:"offer-item-discount",children:t.discount})]}):null]}),c?(0,n.jsx)("div",{children:(0,n.jsx)(g.$,{variant:"secondary",shape:"pill",size:"m",onAction:c.onAction,isDisabled:c.isDisabled,unsafeClassName:t5().membership,children:c.label})}):null]})}})}),m&&t.membershipUpsellingCallout?(0,n.jsx)("div",{className:t5().membership,children:(0,n.jsx)(it,{text:t.membershipUpsellingCallout.text,url:t.membershipUpsellingCallout.url})}):null]})}),is=(e,t,i)=>"category"===t.__typename?(0,n.jsx)(ii,{name:t.name,description:t.description}):"item"===t.__typename?(0,n.jsx)(ia,{item:t,onItemIntersectionIn:i.onItemIntersectionIn,onItemIntersectionOut:i.onItemIntersectionOut}):null,ir=()=>{let{getOrderedAppearSequenceItemProps:e}=(0,eV.y)({animationDelay:50,animationDuration:500});return(0,n.jsx)(tE,{children:(0,n.jsx)(ep.s,{direction:"column",gap:"200",children:(0,n.jsx)(eK.$,{name:"services-choice-list",value:[],onChange:()=>{},choiceType:"multiple",children:[240,285,320,265].map((t,i)=>(0,a.createElement)(eK.$.Item,{...e(`CONTENT_${i}`),key:t,variant:"low",value:""},()=>(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.E,{width:`${t}px`,height:"16px",mb:"150"}),(0,n.jsx)(v.E,{width:"60px",height:"8px",mb:"150"}),(0,n.jsx)(v.E,{width:"91px",height:"8px",mb:"250"}),(0,n.jsx)(v.E,{width:"128px",height:"12px"})]})})))})})})},io=e=>{let{staffLabel:t,staffCaption:i,avatarUrl:a,avatarRating:s,avatarInitials:r,onAction:o}=e;return(0,n.jsx)("div",{className:t5().staffItem,children:(0,n.jsxs)(eY.c,{onAction:o,children:[(0,n.jsx)(eY.c.Prefix,{rightSection:(0,n.jsx)(td.a,{firstName:r??"",hideDetails:!0,src:a??void 0,rating:s??void 0,starVariant:"yellow",size:"2xl"})}),(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(ep.s,{direction:"vertical",children:[(0,n.jsx)(w.E,{font:"body-m-semibold",children:t}),i?(0,n.jsx)(w.E,{font:"body-s-regular",children:i}):null]})})}),o?(0,n.jsx)(eY.c.Suffix,{rightSection:(0,n.jsx)(ta.v,{size:"l"})}):null]})})},il=e=>{let{data:{layout:t,screenServices:i}}=e,r=i.categories,o=(0,a.useRef)(null),d=(0,j.d)("tablet"),{locationSlug:c,locationId:m,locationProviderId:p}=Z(),{accessoryBars:x}=(0,u.gy)(t),f=(x?.length??0)>0,[g,y]=(0,a.useState)(!1),[_,b]=(0,a.useState)(!0),[v,S]=(0,a.useState)(!1),C=(0,a.useRef)(new Set),[A,E]=(0,a.useState)(()=>{for(let e of r)if(e.items.some(e=>e.isSelected))return e.name;return i.categories[0]?.name??null}),[T,B]=(0,a.useState)(!1),[P,I]=(0,a.useState)(0),[F,N]=(0,a.useState)(0),O=(0,a.useRef)(null),D=(0,a.useRef)({}),{addErrorToast:M}=(0,h.Y)(),[R,L]=(0,a.useState)(!0),W=(0,a.useRef)(null),z=(0,a.useCallback)(e=>{L(!0),W.current=setTimeout(()=>{L(!1)},e)},[]);!function(e){let{marketingToken:t,slug:i,onSuccess:n,onError:r}=e,o=(0,a.useRef)(n);o.current=n;let l=(0,a.useRef)(r);l.current=r;let d=!!(t&&i),{data:c,errors:u,isValidating:m,variables:p}=(0,s.uS)(d?tf:null,{slug:i,token:t??""});(0,a.useEffect)(()=>{if(!m&&c&&p)if(c.location?.marketingTokenValidity?.isValid){let e=c.location?.owner?.id;e&&(0,q.Uf)({providerId:e,token:p.token}),o.current?.()}else{let e=c.location?.marketingTokenValidity?.formattedInvalidReasonForCustomer||u?.[0].extensions?.formattedMessage||u?.[0].message;e&&l.current?.(e)}},[m,c,u,p])}({marketingToken:(0,eg.ok)().get("marketingToken"),slug:c,onError:e=>M(e,{size:"expanded"})});let G=(0,a.useCallback)(e=>()=>{if(O.current){let t=O.current.scrollLeft+("left"===e?-1:1)*O.current.clientWidth/2;O.current?.scrollTo({left:t,behavior:"smooth"})}return Promise.resolve()},[]),{selectionIndicatorProps:V,listContainerProps:U}=(0,tu.S)(O,A||""),H=(0,a.useMemo)(()=>{let e=0,t=[];for(let{items:i,...n}of r){for(let[a,s]of(t.push({...n,index:e,__typename:"category"}),i.entries()))e++,t.push({...s,id:`${s.name}-${s.caption}`,categoryName:n.name,isLast:a===i.length-1,index:e,__typename:"item"});e++}return t},[r]),K=(0,a.useCallback)(e=>{R||E(e.categoryName),C.current.add(e.index)},[R]),Y=(0,a.useCallback)(e=>{C.current.delete(e.index)},[]),X=(0,a.useMemo)(()=>Array.from(H.reduce((e,t)=>("item"===t.__typename&&t.isSelected&&!e.has(t.id)&&e.set(t.id,t.index),e),new Map).values()),[H]),J=(0,a.useCallback)(e=>(("string"==typeof e.index||"number"==typeof e.index&&e.index>=0)&&o.current?.scrollToIndex({align:"center",behavior:"smooth",...e}),Promise.resolve()),[]),Q=(0,a.useRef)(void 0);if(void 0===Q.current){let e=H.findIndex(e=>"item"===e.__typename&&e.isSelected);e>=0?Q.current={index:e,align:"center",behavior:"auto"}:Q.current=0}let et=(0,a.useCallback)(()=>{z(500)},[z]),ei=(0,a.useCallback)(()=>{let e=Math.min(...C.current);return J({index:[...X].reverse().find(t=>t<e)||0})},[X,J]),en=(0,a.useCallback)(()=>{let e=Math.max(...C.current);return J({index:X.find(t=>t>e)||"LAST"})},[X,J]),ea=(0,a.useCallback)(e=>{if(C.current.size){let e=Math.min(...C.current),t=Math.max(...C.current);I(X.filter(t=>t<e).length),N(X.filter(e=>e>t).length)}else I(0),N(0);return B(e)},[X]);(0,a.useEffect)(()=>{let e=O.current,t=D.current[A||""];e&&t&&e.scrollTo({left:t.offsetLeft})},[A]),(0,a.useEffect)(()=>()=>{W.current&&clearTimeout(W.current)},[]);let es=(0,a.useRef)(i.sectionCurrentAttendee?.name??"");(0,a.useEffect)(()=>{i.sectionCurrentAttendee?.name!==es.current&&window.scrollTo({top:0}),es.current=i.sectionCurrentAttendee?.name??""},[i.sectionCurrentAttendee]);let eo=(0,a.useCallback)(e=>{e&&(O.current=e)},[]),{continueAction:el,backAction:ed,title:ec,description:eu}=(0,u.gy)(i),em=ee(el,{blockedStateAs:"pending",trackingCallback:()=>$.m3.tempBookingFlowStepCompleted({booking_flow_step_name:"services",booking_flow_type:"new_server_driven",location_id:m,provider_id:Number(p)})}),eh=ee(ed),{cart:ex}=(0,u.gy)(t),ef=(0,a.useMemo)(()=>ex.attendees.some(e=>e.items.length),[ex]);return(0,n.jsxs)(t3,{title:ec,description:eu,continueAction:em,backAction:eh,data:t,withShadowOnScroll:d&&r.length>1,withSidePadding:!1,withCartSummaryBar:ef,children:[(0,n.jsxs)(ep.s,{direction:"vertical",gap:"400",children:[i.sectionSelectedEmployee?(0,n.jsx)(io,{staffLabel:i.sectionSelectedEmployee.name,staffCaption:i.sectionSelectedEmployee.title,avatarUrl:i.sectionSelectedEmployee.avatar?.url??null,avatarRating:i.sectionSelectedEmployee.rating}):null,i.sectionCurrentAttendee&&!i.sectionSelectedEmployee?(0,n.jsx)(io,{staffLabel:i.sectionCurrentAttendee.name,avatarUrl:i.sectionCurrentAttendee.avatarUrl,avatarInitials:i.sectionCurrentAttendee.initials}):null,(0,n.jsxs)(tx.Gj,{children:[(0,n.jsx)(tx.Lf,{className:t5().tabsStructureAnchor,onShow:()=>S(!1),onHide:()=>S(!0)}),r.length>1&&(0,n.jsx)("div",{className:(0,er.A)(t5().tabsStructure,v&&t5()["tabsStructure--scrolled"]),children:(0,n.jsxs)(tm.g,{variant:"pill",backgroundVariant:"onPage",children:[(0,n.jsx)(tm.g.ScrollShadow,{location:"start",visible:!_&&g}),(0,n.jsxs)(tm.g.Rail,{padding:"responsive",ref:eo,children:[(0,n.jsx)(tx.Lf,{onShow:()=>b(!0),onHide:()=>b(!1),className:t5().isVisibleElement}),(0,n.jsx)(tm.g.SelectionIndicator,{...V}),(0,n.jsx)(tm.g.ListContainer,{...U,children:r.map(e=>{let{name:t}=e;return(0,n.jsx)(tm.g.Item,{ref:e=>{e&&(D.current[t]=e)},"aria-selected":A===t,onClick:()=>{let e;return E(t),z(300),void(0===(e=H.findIndex(e=>"category"===e.__typename&&e.name===t)||0)?o.current?.scrollTo({behavior:"auto",top:-328}):o.current?.scrollToIndex({index:e,behavior:"auto",offset:-164}))},unsafeClassName:t5().tabsStructure__button,children:t},t)})}),(0,n.jsx)(tx.Lf,{className:t5().isVisibleElement,onShow:()=>y(!0),onHide:()=>y(!1)})]}),(0,n.jsx)(tm.g.ScrollShadow,{location:"end",visible:!g}),O.current&&O.current?.scrollWidth>O.current?.clientWidth?(0,n.jsx)(tm.g.ChevronControls,{prevAction:G("left"),nextAction:G("right"),isPrevDisabled:_,isNextDisabled:g}):null]})})]}),P>0&&(0,n.jsx)("div",{className:(0,er.A)(t5().selectionOffscreenContainer,t5().selectionOffscreenAbove),children:(0,n.jsxs)(tc.S,{id:"button-scroll-up",className:(0,er.A)(T&&t5().selectionOffscreenScrolling,t5().selectionOffscreenButton),onAction:ei,excludeFromTabOrder:!0,children:[(0,n.jsx)(w.E,{font:"body-s-regular",color:"accent",children:(0,k.t7)("%{numberOfSelectionsAbove} selected service","%{numberOfSelectionsAbove} selected services",P,{numberOfSelectionsAbove:P})}),(0,n.jsx)(to.K,{color:"accent"})]})}),(0,n.jsx)(tx.Gj,{rootMargin:"-164px 0px 0px 0px",children:(0,n.jsx)("div",{className:t5().offerItemsList,children:(0,n.jsx)(eK.$,{name:"services-choice-list",gap:"0",value:t8,onChange:tp.l,choiceType:"multiple",children:(0,n.jsx)(th.aY,{initialTopMostItemIndex:Q.current,context:{onItemIntersectionIn:K,onItemIntersectionOut:Y},data:H,isScrolling:ea,itemContent:is,overscan:{reverse:window.innerHeight,main:0},startReached:et,ref:o,useWindowScroll:!0})})})}),i.sectionUpselling?(0,n.jsxs)("div",{className:t5().upsellingSection,children:[(0,n.jsx)(w.E,{font:"header-m-semibold",children:i.sectionUpselling.title}),(0,n.jsx)(tt.B,{as:"ul",gap:"150",direction:"vertical",children:i.sectionUpselling.tiles.map(e=>(0,n.jsx)(ie,{tile:e},e.title))})]}):null]}),(0,n.jsx)("div",{className:t5().floatingBottomBar,children:F>0&&(0,n.jsx)("div",{className:(0,er.A)(t5().selectionOffscreenContainer,t5().selectionOffscreenBelow,f&&t5().selectionOffscreenBelowWithOffset),children:(0,n.jsxs)(tc.S,{id:"button-scroll-down",className:(0,er.A)(T&&t5().selectionOffscreenScrolling,t5().selectionOffscreenButton),onAction:en,excludeFromTabOrder:!0,children:[(0,n.jsx)(w.E,{font:"body-s-regular",color:"accent",children:(0,k.t7)("%{numberOfSelectionsBelow} selected service","%{numberOfSelectionsBelow} selected services",F,{numberOfSelectionsBelow:F})}),(0,n.jsx)(tl.Z,{color:"accent"})]})})}),(0,n.jsx)(l.O,{children:(0,n.jsx)(tT.r,{locationSlug:c})})]})},id=e=>{let{data:t}=e,i=(0,u.gy)(t);return i?(0,n.jsx)(il,{data:i}):(0,n.jsx)(ir,{})};var ic=i(83105),iu=i.n(ic);let im=e=>{let{data:t}=e,i=(0,j.d)("tablet"),[s,r]=(0,a.useState)(0),[o,l]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),u=t||[];if((0,a.useEffect)(()=>{if(i||0===u.length||s>=u.length)return;let e=u[s];if(l(!0),c(!1),"Ephemeral"===e.presentationType){let e,t=setTimeout(()=>(c(!0),e=setTimeout(()=>{l(!1),r(e=>e+1)},200),()=>clearTimeout(e)),2e3);return()=>{clearTimeout(t),clearTimeout(e)}}},[s,u,i]),i||0===u.length||s>=u.length)return null;let{content:m,linkTo:p}=(e=>{switch(e.__typename){case"BookingFlowAccessoryBarBookWithPreferredDate":return{content:(0,n.jsx)(w.E,{font:"body-s-regular",color:"onAccent",children:(0,n.jsx)(tr.D,{children:e.text})}),linkTo:void 0};case"BookingFlowAccessoryBarMembershipUpselling":return{content:(0,n.jsxs)(ep.s,{justifyContent:"space-between",alignItems:"center",children:[(0,n.jsxs)(ep.s,{gap:"150",alignItems:"center",children:[(0,n.jsx)(tn.C,{color:"onAccent"}),(0,n.jsx)(w.E,{font:"body-s-regular",color:"onAccent",children:(0,n.jsx)(tr.D,{children:e.text})})]}),(0,n.jsx)(ta.v,{color:"onAccent"})]}),linkTo:t7(e.url)};default:return{content:null,linkTo:void 0}}})(u[s]);return(0,n.jsx)("div",{className:(0,er.A)(iu().accessoryBar,o&&iu().accessoryBarVisible,d&&iu().accessoryBarAnimatingOut),children:(0,n.jsx)(ts.h,{variant:"accent",borderRadius:"none",linkTo:p,children:(0,n.jsx)("div",{className:iu().accessoryBarContent,children:m})})})};function ip(e){let{items:t,getId:i,getAction:n,selectionType:s}=e,{isValidating:r}=Z(),o=Q(),[l,d]=(0,a.useOptimistic)(t,(e,t)=>e.map(e=>({...e,isSelected:Array.isArray(t)?t.includes(i(e)):i(e)===t}))),c=(0,a.useMemo)(()=>{let e=l.filter(e=>e.isSelected);return"single"===s?e[0]?i(e[0]):null:e.map(e=>i(e))},[l,i,s]),u=(0,a.useCallback)(function(){for(var e=arguments.length,t=Array(e),c=0;c<e;c++)t[c]=arguments[c];if(r)return;let[u,m]=t,p="single"===s?u:m,h=l.find(e=>i(e)===p);if(!h)return;let x=n(h),f=x?.id;if(!x||!f)return;let g=o({...x,id:f});(0,a.startTransition)(async()=>{d(u),await g})},[l,i,n,o,r,s,d]);return(0,a.useMemo)(()=>({items:l,value:c,onChange:u,isDisabled:r}),[l,c,u,r])}let ih={[M.uK.Blue]:"gradient1",[M.uK.Dark]:"gradient3",[M.uK.Green]:"gradient5",[M.uK.Orange]:"gradient4",[M.uK.Purple]:"gradient2",[M.uK.Gray]:"gradient3",[M.uK.Metallic]:"gradient3"},ix=e=>`${e.name}-${e.caption}`,ig=e=>(0,n.jsx)(eK.$.Item,{value:ix(e),primitiveType:"radio",primitivePosition:"suffix",variant:"lowest",children:t=>{let{labelProps:i,descriptionProps:a}=t;return(0,n.jsxs)(eY.c,{children:[(0,n.jsx)(eY.c.Prefix,{leftSection:(0,n.jsx)(ti.M,{icon:e.isRecurring?e9.P:te.y,gradientBackground:ih[e.color],size:"2xl"})}),(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(tt.B,{as:"div",gap:"0",children:[(0,n.jsx)(w.E,{...i,font:"body-s-semibold",children:e.name}),e.errorCaption?(0,n.jsx)(w.E,{...a,color:"danger",font:"body-s-regular",children:e.errorCaption}):(0,n.jsx)(w.E,{...a,color:"neutral",font:"body-s-regular",children:e.caption}),(0,n.jsx)(w.E,{font:"body-s-regular",children:e.expiryDate})]})})})]})}}),iy=e=>{let{fragment:t,accessoryBars:i}=e,{description:s}=t,[r,o]=(0,a.useState)("280px"),l=ee((0,u.gy)(t.closeAction)),d=ee((0,u.gy)(t.deleteAction));(0,a.useEffect)(()=>{o(null)},[]);let c=ip({items:t.tiles,getId:e=>ix(e),getAction:e=>(0,u.gy)(e.primaryAction),selectionType:"single"});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.y.Header,{onClose:l.onAction}),(0,n.jsxs)(eh.y.Body,{unsafeStyle:r?{"--content-height":r}:void 0,children:[(0,n.jsx)(eh.y.Body.Section,{children:s}),(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(eK.$,{name:"memberships-choice-list",value:c.value,onChange:c.onChange,isDisabled:c.isDisabled,gap:"250",choiceType:"single",children:c.items.map(e=>(0,n.jsx)(ig,{...e},ix(e)))})})]}),d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(im,{data:i??null}),(0,n.jsx)(eh.y.Footer,{children:(0,n.jsx)(g.$,{variant:"secondary",onAction:d.onAction,isDisabled:d.isDisabled,size:"l",isFull:!0,children:d.label})})]})]})},i_=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.y.Header,{suffix:(0,n.jsx)(v.E,{shape:"hard",height:"24px",width:"24px"}),onClose:()=>Promise.resolve()}),(0,n.jsxs)(eh.y.Body,{children:[(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(v.E,{shape:"rounded",height:"20px",width:"91%"})}),(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(eK.$,{name:"memberships-choice-list",value:null,onChange:()=>{},gap:"250",choiceType:"single",children:[{nameWidth:"127px",captionWidth:"177px"},{nameWidth:"97px",captionWidth:"190px"}].map(e=>(0,n.jsx)(eK.$.Item,{value:`${e.nameWidth}-${e.captionWidth}`,primitiveType:"none",variant:"lowest",onAction:()=>{},isDisabled:!0,isSelected:!1,children:()=>(0,n.jsxs)(eY.c,{children:[(0,n.jsx)(eY.c.Prefix,{leftSection:(0,n.jsx)(v.E,{width:"64px",height:"64px",shape:"hard"})}),(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(tt.B,{as:"div",gap:"0",children:[(0,n.jsx)(w.E.Skeleton,{font:"body-s-semibold",width:e.nameWidth}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-regular",width:e.captionWidth})]})})})]})},`${e.nameWidth}-${e.captionWidth}`))})})]}),(0,n.jsx)(eh.y.Footer,{children:(0,n.jsx)(v.E,{shape:"rounded",height:"48px",width:"100%"})})]});function ij(e){let{data:t,accessoryBars:i}=e,a=(0,u.gy)(t);return(0,n.jsx)(e$,{size:"default",...a?{title:a.title,content:(0,n.jsx)(iy,{fragment:a,accessoryBars:i}),closeAction:a.closeAction}:{title:(0,n.jsx)(v.E,{shape:"rounded",height:"32px",width:"67%"}),content:(0,n.jsx)(i_,{}),closeAction:void 0}})}var ib=i(18671),iv=i(52707),iw=i(73652),iS=i(69815),iC=i(1543);let ik=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.y.Header,{suffix:(0,n.jsx)(v.E,{shape:"hard",height:"24px",width:"24px"}),onClose:()=>Promise.resolve()}),(0,n.jsx)(eh.y.Body,{children:(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(tt.B,{gap:"400",direction:"vertical",as:"div",display:"flex",children:(0,n.jsxs)(tt.B,{gap:"50",direction:"vertical",as:"div",display:"flex",children:[(0,n.jsx)(v.E,{shape:"rounded",height:"20px",width:"91%"}),(0,n.jsx)(v.E,{shape:"rounded",height:"20px",width:"81%"})]})})})}),(0,n.jsxs)(eh.y.Footer,{children:[(0,n.jsxs)("div",{style:{minInlineSize:0},children:[(0,n.jsx)(w.E.Skeleton,{font:"body-m-medium",width:"98px"}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-regular",width:"65px"})]}),(0,n.jsx)(iv.e,{wrap:"nowrap",children:(0,n.jsx)(v.E,{shape:"rounded",height:"48px",width:"98px"})})]})]}),iA=e=>{let{item:t}=e,i=ee(t.action?(0,u.gy)(t.action):null);return(0,n.jsx)(iC.D,{name:t.name,caption:t.caption,description:t.description,action:i})},iE=e=>{let{fragment:t,accessoryBars:i}=e,s=(0,j.d)("tablet"),{caption:r,description:o,sectionTitle:l,discount:d,price:c,items:m,features:p}=t,[h,x]=(0,a.useState)("135px"),f=ee((0,u.gy)(t.closeAction)),y=ee((0,u.gy)(t.submitAction)),_=ee((0,u.gy)(t.deleteAction));(0,a.useEffect)(()=>{x(null)},[]);let b=y?(0,n.jsx)(g.$,{size:"l",onAction:y.onAction,isDisabled:y.isDisabled,isPending:y.isPending,children:y.label}):null,v=_?!s&&b?(0,n.jsx)(g.$,{size:"l",onAction:_.onAction,isDisabled:_.isDisabled,isPending:_.isPending,icon:ib.u,variant:"secondary",isLabelHidden:!0,children:_.label}):(0,n.jsx)(g.$,{size:"l",onAction:_.onAction,isDisabled:_.isDisabled,isPending:_.isPending,variant:"secondary",children:_.label}):null;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.y.Header,{onClose:f.onAction}),(0,n.jsxs)(eh.y.Body,{unsafeStyle:h?{"--content-height":h}:void 0,children:[o||p.length?(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsxs)(ep.s,{direction:"vertical",gap:"200",children:[(0,n.jsx)(iS.R,{features:p}),o?(0,n.jsx)(w.E,{font:"body-s-regular",children:(0,n.jsx)(iw.A,{characterLimit:170,children:o})}):null]})}):null,(0,n.jsxs)(eh.y.Body.Section,{children:[(0,n.jsx)(w.E,{font:"header-s-semibold",mb:"50",children:l}),(0,n.jsx)(ep.s,{direction:"vertical",gap:"0",children:m.map(e=>(0,n.jsx)(iA,{item:e},`${e.name}-${e.caption}`))})]})]}),(0,n.jsx)(im,{data:i??null}),(0,n.jsxs)(eh.y.Footer,{children:[(0,n.jsxs)("div",{style:{minInlineSize:0},children:[(0,n.jsxs)(ep.s,{gap:"100",direction:"horizontal",alignItems:"baseline",children:[(0,n.jsx)(w.E,{font:"body-m-medium",overflow:"ellipsis",noWrap:!0,children:c.formatted}),d?(0,n.jsx)(w.E,{font:"body-s-regular",color:"positive",overflow:"ellipsis",noWrap:!0,children:d}):null]}),(0,n.jsx)(w.E,{color:"neutralFaded",font:"body-s-regular",overflow:"ellipsis",noWrap:!0,children:r})]}),(0,n.jsxs)(iv.e,{wrap:"nowrap",children:[v,b]})]})]})},iT=e=>{let{data:t,accessoryBars:i}=e,a=(0,u.gy)(t);return(0,n.jsx)(e$,{...a?{title:a.title,content:(0,n.jsx)(iE,{fragment:a,accessoryBars:i}),closeAction:a.closeAction}:{title:(0,n.jsx)(v.E,{shape:"rounded",height:"32px",width:"67%"}),content:(0,n.jsx)(ik,{}),closeAction:void 0}})};var iB=i(73888),iP=i(84350),iI=i(22096),iF=i.n(iI),iN=i(6718),iO=i.n(iN);let iD=e=>{let{name:t,caption:i,duration:a,price:s}=e,r=(0,j.d)("tablet");return(0,n.jsxs)(ep.s,{direction:"vertical",gap:"100",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(w.E,{font:"body-m-medium",overflow:"break",children:t}),a&&(0,n.jsx)(w.E,{color:"neutralFaded",font:"body-s-regular",children:a.formatted}),i?(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",unsafeClassName:iO().caption,children:(0,n.jsx)(iw.A,{characterLimit:r?150:70,children:i})}):null]}),s?(0,n.jsx)(w.E,{font:"body-s-medium",children:s.formatted}):null]})},iM=e=>{let{caption:t,validationMessage:i}=e,a=i?(0,n.jsx)(w.E,{font:"body-s-regular",color:"danger",children:i}):null,s=t?(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:t}):null;return a||s},iR=e=>{let{title:t,titleSuffix:i}=e;return(0,n.jsxs)(w.E,{font:"header-s-semibold",children:[t,i?(0,n.jsxs)(w.E,{font:"body-s-regular",color:"neutralFaded",as:"span",children:[" ",i]}):null]})},iL=B.h4S,i$=e=>{let{group:t}=e,{trigger:i}=(0,s.$9)(iL),{data:r,isValidating:o,mutate:l,locationSlug:d}=Z(),[c,p]=(0,a.useOptimistic)(t.addOns,(e,t)=>{let{index:i,value:n}=t,a=[...e];return a[i]={...a[i],value:n},a}),h=(0,W.r)("B2C_WEB_VENUE_PORTFOLIO"),x=(0,m.tH)("B2C_WEB_BOOKING_FLOW_CONFIRM_STEP_REVAMP"),f=(0,a.useMemo)(()=>(0,iP.A)((e,t)=>{r?.cartId&&l(async()=>{let n=await i({portfolioEnabled:h.state??!1,confirmStepRevampEnabled:!!x,input:{id:e,value:t,locationSlug:d,cartId:r.cartId}});return(0,u.gy)(n.result.bookingFlowUpdateServiceAddOnStepperItem)})},{debounce:!0,interval:500,eager:!1}),[l,i,d,r,h.state,x]);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:iF().addonGroupTitle,children:[(0,n.jsx)(iR,{title:t.title,titleSuffix:t.titleSuffix}),(0,n.jsx)(iM,{caption:t.caption,validationMessage:t.validationMessage})]}),c.map((e,t)=>(0,n.jsx)(eY.c,{variant:"lower",children:(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsx)(iD,{name:e.name,caption:e.caption,duration:e.duration,price:e.price}),rightSection:(0,n.jsx)("div",{className:iF().stepperFieldContainer,children:(0,n.jsx)(iB.I,{onChange:i=>{if(o)return;let n=f(e.id,Number(i));(0,a.startTransition)(async()=>{p({index:t,value:Number(i)}),await n})},type:"compact",value:String(e.value),min:0,max:e.valueMax??void 0,isLabelHidden:!0,fixedWidth:"142px"})})})})},`n:${e.name}-p:${e.price?.amount.value}-d:${e.duration?.value}`))]})},iW=e=>`n:${e.name}-p:${e.price?.amount.value}-d:${e.duration?.value}`,iz=e=>{let{group:t}=e,i=ip({items:t.addOns,getId:iW,getAction:e=>(0,u.gy)(e.action),selectionType:"multiple"});return(0,n.jsxs)("div",{children:[(0,n.jsx)(iR,{title:t.title,titleSuffix:t.titleSuffix}),(0,n.jsx)(iM,{caption:t.caption,validationMessage:t.validationMessage}),(0,n.jsx)(eK.$,{name:t.title,gap:"0",value:i.value,choiceType:"multiple",onChange:i.onChange,isDisabled:i.isDisabled,children:i.items.map(e=>(0,n.jsx)(eK.$.Item,{variant:"lower",primitivePosition:"suffix",primitiveType:"cumulative",value:iW(e),isChecked:e.isSelected,isDisabled:e.isDisabled,children:()=>(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsx)(iD,{name:e.name,caption:e.caption,duration:e.duration,price:e.price})})},iW(e)))})]})},iq=e=>`n:${e.name}-p:${e.price?.amount.value}-d:${e.duration?.value}`,iG=e=>{let{group:t}=e,i=ip({items:t.addOns,getId:iq,getAction:e=>(0,u.gy)(e.action),selectionType:"single"});return(0,n.jsxs)("div",{children:[(0,n.jsx)(iR,{title:t.title,titleSuffix:t.titleSuffix}),(0,n.jsx)(iM,{caption:t.caption,validationMessage:t.validationMessage}),(0,n.jsx)(eK.$,{name:t.title,gap:"0",value:i.value,choiceType:"single",onChange:i.onChange,isDisabled:i.isDisabled,children:i.items.map(e=>{let t=iq(e);return(0,n.jsx)(eK.$.Item,{variant:"lower",primitivePosition:"suffix",primitiveType:"radio",value:t,isDisabled:e.isDisabled,children:()=>(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsx)(iD,{name:e.name,caption:e.caption,duration:e.duration,price:e.price})})},t)})})]})};function iV(e,t){return`t:${e.title}-c:${e.caption}-t:${e.__typename}-i:${t}`}let iU=e=>{let{serviceAddOnsGroups:t,serviceAddOnsGroupRenderer:i=e=>e}=e,s=(0,a.useRef)({}),r=(0,u.gy)(t);return(0,a.useEffect)(()=>{let e=r.find(e=>e.validationMessage);if(!e)return;let t=s.current[iV(e,r.indexOf(e))];t?.scrollIntoView({behavior:"smooth"})},[r]),r.map((e,t)=>{if(!e.addOns.length)return null;let a=iV(e,t),r=e=>{s.current[a]=e};return"BookingFlowModalServiceAddOnRadioGroup"===e.__typename?(0,n.jsx)("div",{ref:r,children:i((0,n.jsx)(iG,{group:e}))},a):"BookingFlowModalServiceAddOnCheckboxGroup"===e.__typename?(0,n.jsx)("div",{ref:r,children:i((0,n.jsx)(iz,{group:e}))},a):"BookingFlowModalServiceAddOnStepperGroup"===e.__typename?(0,n.jsx)("div",{ref:r,children:i((0,n.jsx)(i$,{group:e}))},a):((0,A.Oz)(Error(`[BF_v2] - Not supported group type: ${e.__typename}`)),null)})},iH=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.y.Header,{suffix:(0,n.jsx)(v.E,{shape:"hard",height:"24px",width:"24px"}),onClose:()=>Promise.resolve()}),(0,n.jsxs)(eh.y.Body,{children:[(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(tt.B,{gap:"400",direction:"vertical",as:"div",display:"flex",children:(0,n.jsxs)(tt.B,{gap:"50",direction:"vertical",as:"div",display:"flex",children:[(0,n.jsx)(v.E,{shape:"rounded",height:"20px",width:"91%"}),(0,n.jsx)(v.E,{shape:"rounded",height:"20px",width:"81%"})]})})}),(0,n.jsxs)(eh.y.Body.Section,{children:[(0,n.jsx)(w.E.Skeleton,{font:"header-s-semibold",width:"268px"}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-regular",width:"128px"}),[1,2].map(e=>(0,n.jsx)(eY.c,{variant:"lower",children:(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(ep.s,{direction:"vertical",gap:"100",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(w.E.Skeleton,{font:"body-m-medium",width:"318px"}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-regular",width:"112px"})]}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-medium",width:"79px"})]}),rightSection:(0,n.jsx)(v.E,{shape:"hard",height:"28px",width:"28px"})})})},e))]})]}),(0,n.jsxs)(eh.y.Footer,{children:[(0,n.jsxs)("div",{style:{minInlineSize:0},children:[(0,n.jsx)(w.E.Skeleton,{font:"body-m-medium",width:"98px"}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-regular",width:"65px"})]}),(0,n.jsx)(iv.e,{wrap:"nowrap",children:(0,n.jsx)(v.E,{shape:"rounded",height:"48px",width:"98px"})})]})]}),iK=e=>{let{fragment:t,accessoryBars:i}=e,{caption:s,description:r,continueText:o,serviceAddOnsGroups:l,features:d,price:c}=t,[m,p]=(0,a.useState)("429px"),h=ee((0,u.gy)(t.closeAction)),x=ee((0,u.gy)(t.backAction)),f=ee((0,u.gy)(t.continueAction));return(0,a.useEffect)(()=>{p(null)},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.y.Header,{onClose:h.onAction,onBack:x.onAction}),(0,n.jsxs)(eh.y.Body,{unsafeStyle:m?{"--content-height":m}:void 0,children:[r||d.length?(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsxs)(ep.s,{direction:"vertical",gap:"200",children:[(0,n.jsx)(iS.R,{features:d}),r?(0,n.jsx)(w.E,{font:"body-s-regular",children:(0,n.jsx)(iw.A,{characterLimit:170,children:r})}):null]})}):null,(0,n.jsx)(iU,{serviceAddOnsGroups:l,serviceAddOnsGroupRenderer:e=>(0,n.jsx)(eh.y.Body.Section,{children:e})})]}),(0,n.jsx)(im,{data:i??null}),(0,n.jsxs)(eh.y.Footer,{children:[(0,n.jsxs)("div",{style:{minInlineSize:0},children:[(0,n.jsx)(ep.s,{gap:"100",direction:"horizontal",alignItems:"baseline",children:(0,n.jsx)(w.E,{font:"body-m-medium",overflow:"ellipsis",noWrap:!0,children:c.formatted})}),(0,n.jsx)(w.E,{color:"neutralFaded",font:"body-s-regular",overflow:"ellipsis",noWrap:!0,children:s})]}),(0,n.jsx)(iv.e,{wrap:"nowrap",children:(0,n.jsx)(g.$,{size:"l",onAction:f.onAction,isDisabled:f.isDisabled,isPending:f.isPending,children:o})})]})]})},iY=e=>{let{data:t,accessoryBars:i}=e,a=(0,u.gy)(t);return(0,n.jsx)(e$,{...a?{title:a.title,content:(0,n.jsx)(iK,{fragment:a,accessoryBars:i}),closeAction:a.closeAction}:{title:(0,n.jsx)(v.E,{shape:"rounded",height:"32px",width:"67%"}),content:(0,n.jsx)(iH,{}),closeAction:void 0}})};var iX=i(94544),iZ=i(60062),iJ=i(32588),iQ=i(90545),i0=i(35131),i1=i(50527),i2=i(49814),i3=i(70736);let i4="229px",i5=e=>`n:${e.name}-c:${e.caption}-p:${e.price.formatted}`,i8=()=>(0,n.jsxs)(iJ.a,{name:"B2C_WEB_VENUE_PORTFOLIO",children:[(0,n.jsx)(eh.y.Header,{suffix:(0,n.jsx)(v.E,{shape:"hard",height:"24px",width:"24px"}),onClose:()=>Promise.resolve()}),(0,n.jsxs)(eh.y.Body,{unsafeStyle:{minBlockSize:i4},children:[(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(tt.B,{gap:"400",direction:"vertical",as:"div",display:"flex",children:(0,n.jsxs)(tt.B,{gap:"50",direction:"vertical",as:"div",display:"flex",children:[(0,n.jsx)(v.E,{shape:"rounded",height:"20px",width:"91%"}),(0,n.jsx)(v.E,{shape:"rounded",height:"20px",width:"81%"})]})})}),(0,n.jsxs)(eh.y.Body.Section,{children:[(0,n.jsxs)(iJ.a.Disabled,{children:[(0,n.jsx)(w.E.Skeleton,{font:"header-s-semibold",width:"268px"}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-regular",width:"128px"})]}),(0,n.jsx)(iJ.a.Disabled,{children:(0,n.jsx)(eY.c,{variant:"lower",children:(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(ep.s,{direction:"vertical",gap:"100",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(w.E.Skeleton,{font:"body-m-medium",width:"318px"}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-regular",width:"112px"})]}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-medium",width:"79px"})]}),rightSection:(0,n.jsx)(v.E,{shape:"hard",height:"28px",width:"28px"})})})})})]})]}),(0,n.jsxs)(eh.y.Footer,{children:[(0,n.jsxs)("div",{style:{minInlineSize:0},children:[(0,n.jsx)(w.E.Skeleton,{font:"body-m-medium",width:"98px"}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-regular",width:"65px"})]}),(0,n.jsx)(iv.e,{wrap:"nowrap",children:(0,n.jsx)(v.E,{shape:"rounded",height:"48px",width:"98px"})})]})]}),i7=e=>{let{fragment:t,accessoryBars:i}=e,{description:r,discount:o,caption:l,title:d,price:c,serviceAddOnsGroups:m,features:p,images:h}=t,[x,f]=(0,a.useState)(null),{locationSlug:y}=Z(),_=ee((0,u.gy)(t.closeAction)),j=ee((0,u.gy)(t.addAction)),b=ee((0,u.gy)(t.updateAction)),v=ee((0,u.gy)(t.deleteAction)),S=ee((0,u.gy)(t.membershipChip)),[C,A]=(0,a.useState)(i4),E=ip({items:t.serviceVariants,getId:i5,getAction:e=>(0,u.gy)(e.primaryAction),selectionType:"single"}),T=E.items.length>1,P=T||m&&m.length>0;(0,a.useEffect)(()=>{A(null)},[]);let I=(0,i2.h)(void 0,!!x),F=(0,W.r)("B2C_WEB_VENUE_PORTFOLIO"),N=h?.edges?.[0]?.node?.offerItem?.id,{data:{location:O}={}}=(0,s.uS)(B.Nj4,{slug:y,includeGroup:!1,includeService:!1,offerItemIds:[N]},{skip:F.experiment({enabled:!x||!N,disabled:!0,fallback:!0})}),D=(0,a.useMemo)(()=>O?.portfolioImages?.edges?O?.portfolioImages.edges.map(e=>{let{node:{desktopImage:t,mobileImage:i,id:n}}=e;return{desktopImage:t,mobileImage:i,id:n,title:d}}):h?.edges.map(e=>({desktopImage:e.node.image,mobileImage:e.node.image,id:e.node.id,title:d}))??[],[O?.portfolioImages?.edges,h?.edges,d]);return(0,n.jsxs)(iJ.a,{name:"B2C_WEB_VENUE_PORTFOLIO",children:[(0,n.jsx)(iJ.a.Enabled,{children:(0,n.jsx)(iX.N,{...I,isOpen:!!x,onClose:()=>f(null),children:(0,n.jsx)(i3.Y,{onClose:()=>f(null),referenceId:x,total:h?.total??0,images:D})})}),(0,n.jsx)(eh.y.Header,{backButtonIconSlot:ex.A,onClose:_.onAction}),(0,n.jsxs)(eh.y.Body,{unsafeStyle:C?{"--content-height":C}:{minBlockSize:i4},children:[S||r||p.length?(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsxs)(ep.s,{direction:"vertical",gap:"200",children:[(0,n.jsx)(iS.R,{features:p}),S?(0,n.jsx)("div",{children:(0,n.jsx)(g.$,{variant:"secondary",shape:"pill",size:"m",onAction:S.onAction,isDisabled:S.isDisabled,suffix:(0,n.jsx)(g.$.IconAffix,{icon:eG.D}),children:S.label})}):null,r?(0,n.jsx)(w.E,{font:"body-s-regular",children:P?(0,n.jsx)(iw.A,{characterLimit:170,children:r}):r}):null]})}):null,(0,n.jsx)(iJ.a.Enabled,{children:!!h?.edges.length&&(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(iZ.y,{unsafeStyle:{transition:"none",marginInline:"calc(-1 * var(--spacing-250))",paddingInline:"var(--spacing-250)",paddingBlock:"var(--spacing-50)"},overflow:"x",hideScrollbar:!0,children:(0,n.jsx)(iQ.R,{layout:"inline",children:h?.edges?.map((e,t,i)=>{let a=i.length-1===t&&Math.max((h.total??0)-i.length,0)||void 0;return(0,n.jsx)(tO.E,{onAction:()=>f(e.node.id),children:(0,n.jsx)(iQ.R.Item,{variant:"thumbnail",count:a,children:(0,n.jsx)(i1.W,{data:e.node?.image,fill:!0,sizes:{default:"80px"}})})},e.node.id)})})})})}),T?(0,n.jsxs)(eh.y.Body.Section,{children:[(0,n.jsx)(w.E,{font:"header-s-semibold",mb:"50",children:`${(0,k.tS)("Select service variant","Select an option")} *`}),(0,n.jsx)(eK.$,{value:E.value,onChange:E.onChange,isDisabled:E.isDisabled,name:(0,k.tS)("Select service variant","Select an option"),choiceType:"single",gap:"0",children:E.items.map(e=>(0,n.jsx)(i0.h,{caption:e.caption,name:e.name,description:e.description,membershipIsIncluded:e.membershipIsIncluded,membershipCaption:e.membershipCaption,discount:e.discount,price:e.price,value:i5(e)},i5(e)))})]}):null,(0,n.jsx)(iU,{serviceAddOnsGroups:m||[],serviceAddOnsGroupRenderer:e=>(0,n.jsx)(eh.y.Body.Section,{children:e})})]}),(0,n.jsx)(im,{data:i??null}),(0,n.jsxs)(eh.y.Footer,{children:[(0,n.jsxs)("div",{style:{minInlineSize:0},children:[(0,n.jsxs)(ep.s,{gap:"100",direction:"horizontal",alignItems:"baseline",children:[(0,n.jsx)(w.E,{font:"body-m-medium",overflow:"ellipsis",noWrap:!0,children:c.formatted}),o?(0,n.jsx)(w.E,{font:"body-s-regular",color:"positive",overflow:"ellipsis",noWrap:!0,children:o}):null]}),(0,n.jsx)(w.E,{color:"neutralFaded",font:"body-s-regular",overflow:"ellipsis",noWrap:!0,children:l})]}),(0,n.jsxs)(iv.e,{wrap:"nowrap",children:[v&&(0,n.jsx)(g.$,{size:"l",onAction:v.onAction,isDisabled:v.isDisabled,isPending:v.isPending,variant:"secondary",children:v.label}),b&&(0,n.jsx)(g.$,{size:"l",onAction:b.onAction,isDisabled:b.isDisabled,isPending:b.isPending,children:b.label}),j&&(0,n.jsx)(g.$,{size:"l",onAction:j.onAction,isDisabled:j.isDisabled,isPending:j.isPending,children:j.label})]})]})]})},i6=e=>{let{data:t,accessoryBars:i}=e,a=(0,u.gy)(t);return(0,n.jsx)(e$,{...a?{title:a.title,content:(0,n.jsx)(i7,{fragment:a,accessoryBars:i}),closeAction:a.closeAction}:{title:(0,n.jsx)(v.E,{shape:"rounded",height:"32px",width:"67%"}),content:(0,n.jsx)(i8,{}),closeAction:void 0}})},i9=e=>`n:${e.name}-c:${e.caption}-p:${e.price.formatted}`,ne=e=>{let{tile:t}=e;return(0,n.jsx)(eK.$.Item,{variant:"low",primitiveType:"radio",primitivePosition:"suffix",value:i9(t),children:e=>{let{labelProps:i,descriptionProps:a}=e;return(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.E,{as:"h3",...i,font:"body-m-medium",children:t.name}),(0,n.jsx)(w.E,{...a,font:"body-s-regular",color:"neutralFaded",mb:"150",children:t.caption}),(0,n.jsxs)(tt.B,{as:"span",gap:"100",direction:"horizontal",children:[(0,n.jsx)(w.E,{font:"body-s-medium",children:t.price.formatted}),t.discount?(0,n.jsx)(w.E,{font:"body-s-regular",color:"positive",children:t.discount}):null]})]})})}})},nt=e=>{let{fragment:t,accessoryBars:i}=e,[s,r]=(0,a.useState)("348px"),o=ee((0,u.gy)(t.closeAction)),l=ee((0,u.gy)(t.primaryAction)),d=ee((0,u.gy)(t.secondaryAction));(0,a.useEffect)(()=>{r(null)},[]);let c=ip({items:t.tiles,getId:e=>i9(e),getAction:e=>(0,u.gy)(e.primaryAction),selectionType:"single"});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.y.Header,{onClose:o.onAction}),(0,n.jsx)(eh.y.Body,{unsafeStyle:s?{"--content-height":s}:void 0,children:(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(tt.B,{display:"flex",gap:{default:"500",laptop:"400"},direction:"vertical",children:(0,n.jsx)(eK.$,{name:"services-choice-list",onChange:c.onChange,isDisabled:c.isDisabled,gap:{default:"0",laptop:"150"},value:c.value,choiceType:"single",children:c.items.map(e=>(0,n.jsx)(ne,{tile:e},i9(e)))})})})}),(0,n.jsx)(im,{data:i??null}),(0,n.jsxs)(eh.y.Footer,{children:[d?(0,n.jsx)(g.$,{onAction:d.onAction,size:"l",isFull:!0,isDisabled:d.isDisabled,isPending:d.isPending,variant:"secondary",children:d.label}):null,l?(0,n.jsx)(g.$,{onAction:l.onAction,size:"l",isFull:!0,isDisabled:l.isDisabled,isPending:l.isPending,children:l.label}):null]})]})},ni=()=>{let{getOrderedAppearSequenceItemProps:e}=(0,eV.y)({animationDelay:50,animationDuration:500});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.y.Header,{suffix:(0,n.jsx)(v.E,{shape:"hard",height:"24px",width:"24px"}),onClose:()=>Promise.resolve()}),(0,n.jsx)(eh.y.Body,{children:(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(tt.B,{display:"flex",gap:{default:"500",laptop:"400"},direction:"vertical",children:(0,n.jsx)(eK.$,{name:"services-choice-list",value:[],onChange:()=>{},choiceType:"multiple",children:[240,285].map((t,i)=>(0,a.createElement)(eK.$.Item,{...e(`CONTENT_${i}`),key:t,variant:"low",value:""},()=>(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.E,{width:`${t}px`,height:"16px",mb:"150"}),(0,n.jsx)(v.E,{width:"60px",height:"8px",mb:"150"}),(0,n.jsx)(v.E,{width:"91px",height:"8px",mb:"250"}),(0,n.jsx)(v.E,{width:"128px",height:"12px"})]})})))})})})}),(0,n.jsxs)(eh.y.Footer,{children:[(0,n.jsx)(v.E,{shape:"rounded",height:"48px",width:"100%"}),(0,n.jsx)(v.E,{shape:"rounded",height:"48px",width:"100%"})]})]})},nn=e=>{let{data:t,accessoryBars:i}=e,a=(0,u.gy)(t);return(0,n.jsx)(e$,{...a?{title:a.title,content:(0,n.jsx)(nt,{fragment:a,accessoryBars:i}),closeAction:a.closeAction}:{title:(0,n.jsx)(v.E,{shape:"rounded",height:"32px",width:"67%"}),content:(0,n.jsx)(ni,{}),closeAction:void 0}})},na=()=>(0,n.jsx)(tE,{children:(0,n.jsx)(eD,{})}),ns=e=>{let{data:{layout:t,screenAllEmployees:i}}=e,{locationId:a,locationProviderId:s}=Z(),r=(0,u.gy)(i),o=ee(r.backAction),l=ee(r.continueAction,{blockedStateAs:"pending",trackingCallback:()=>$.m3.tempBookingFlowStepCompleted({booking_flow_step_name:"team_members",booking_flow_type:"new_server_driven",location_id:a,provider_id:Number(s)})}),d=(0,j.d)("laptop"),c=i.tiles.some(e=>e.isSelected);return(0,n.jsx)(t3,{title:r.title,description:r.description,backAction:o,continueAction:l,data:t,withCartSummaryBar:!!d||c,withInitialScrollToTop:!c,children:(0,n.jsx)(eO,{tiles:(0,u.aO)(i.tiles),shouldTrackEvent:!0})})},nr=e=>{let{data:t}=e,i=(0,u.gy)(t);return i?(0,n.jsx)(ns,{data:i}):(0,n.jsx)(na,{})};var no=i(49509);let nl=B.S7;var nd=i(92413),nc=i(58972),nu=i(35489),nm=i(79332),np=i(86181),nh=i(16887),nx=i(85908),nf=i(48668),ng=i(19706),ny=i(25798);let n_=e=>{let{extraPaymentInformationWhenAddedCard:t}=e,i=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eY.c.Prefix,{leftSection:(0,n.jsx)(np.f,{variant:"venue",size:"xl"})}),(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsx)(w.E,{font:"body-s-medium",children:(0,k.__)("Pay at venue")}),leftSectionAlignment:"center"})})]});return(0,n.jsxs)("div",{children:[(0,n.jsx)(w.E,{font:"header-s-semibold",mb:t?"50":"250",children:(0,k.__)("Payment method")}),t?(0,n.jsx)(w.E,{font:"body-s-regular",mb:"250",children:t}):null,(0,n.jsx)(tb.b,{lt:"laptop",children:(0,n.jsx)(eY.c,{qaType:"selected-payment-method-button",linkTo:void 0,children:i})}),(0,n.jsx)(tb.b,{gte:"laptop",children:(0,n.jsx)(eY.c,{variant:"medium",qaType:"selected-payment-method-button",linkTo:void 0,children:i})})]})};var nj=i(48063),nb=i(5194),nv=i(52054),nw=i(89304),nS=i(65111),nC=i(70596),nk=i(77328),nA=i.n(nk),nE=i(36878);let nT=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(nE.b,{}),(0,n.jsxs)(nA(),{children:[(0,n.jsx)("link",{rel:"preload",href:nC.S.ILL_ANIM_CONFIRMED_DELAYED_ONLOUD,as:"fetch",crossOrigin:"anonymous"},`preload-fetch-${nC.S.ILL_ANIM_CONFIRMED_DELAYED_ONLOUD}`),(0,n.jsx)("link",{rel:"preload",href:nC.S.ILL_ANIM_SPLASH_SCREEN_01,as:"fetch",crossOrigin:"anonymous"},`preload-fetch-${nC.S.ILL_ANIM_SPLASH_SCREEN_01}`)]})]});var nB=i(71421),nP=i(30451),nI=i(17527),nF=i.n(nI);function nN(e){let{isMobile:t=!1,isLoading:i=!1,payAtVenue:a,payNow:s}=e;if(!a||!s)return null;let r=t?e=>{let{children:t}=e;return(0,n.jsx)(n.Fragment,{children:t})}:tg.Z.Section;return i?(0,n.jsx)(r,{variant:"lowest",horizontalPadding:"l",unsafeClassName:nF().pay,children:(0,n.jsxs)(ep.s,{gap:"200",direction:"horizontal",justifyContent:"space-between",children:[(0,n.jsx)(w.E.Skeleton,{font:"header-s-semibold",width:"50px"}),(0,n.jsx)(w.E.Skeleton,{font:"header-s-semibold",width:"40px"})]})}):(0,n.jsxs)(r,{variant:"lowest",horizontalPadding:"l",unsafeClassName:nF().pay,children:[(0,n.jsx)(tR.A,{leftSection:(0,n.jsx)(w.E,{color:"positive",font:"body-m-semibold",qaType:"pay-now",children:s.formattedMessage}),rightSection:(0,n.jsx)(w.E,{color:"positive",font:"body-m-semibold",qaType:"pay-now-value",children:s.value})}),(0,n.jsx)(tR.A,{leftSection:(0,n.jsx)(w.E,{font:"body-s-regular",qaType:"pay-at-venue",color:"neutralFaded",children:a.formattedMessage}),rightSection:(0,n.jsx)(w.E,{font:"body-s-regular",qaType:"pay-at-venue-value",color:"neutralFaded",children:a.value})})]})}var nO=i(24338),nD=i(99545),nM=i(78308),nR=i(77710);function nL(){let{locationId:e,locationName:t,locationTrackingCodes:i}=Z(),{facebookPixel:n,providerGA4:s}=(0,nM.d)(i);(0,nR.t)(s);let r=(0,a.useCallback)(e=>{if(!s)return;let{name:t,...i}=e;(0,nO.w)("event",t,{...i,send_to:s})},[s]),o=(0,a.useCallback)(i=>{if(!n)return;let{name:a,...s}=i;(0,nD.E)(n,a,{...s,location_name:t,location_unique_id:e})},[n,t,e]);return(0,a.useMemo)(()=>({sendProviderGaEvent:r,sendProviderPixelEvent:o}),[r,o])}var n$=i(57289),nW=i(7518),nz=i(68593);let nq=B.i10,nG=B.Oes,nV=B.rhZ,nU=B.RKR,nH=(0,a.createContext)(null),nK=e=>{let{children:t,reservationId:i,locationProviderId:r,isReservationPaused:o}=e,{trigger:l}=(0,s.$9)(nq),{trigger:d}=(0,s.$9)(nG),{trigger:c}=(0,s.$9)(nV),{addErrorToast:m}=(0,h.Y)(),p=(0,eg.ok)(),[x,f]=(0,a.useState)(!1),g=(0,a.useMemo)(()=>({id:i,externalReferrerUrl:(0,q.RU)(q.QC.externalReferrerUrl)||"",landingPageUrl:(0,q.RU)(q.QC.userLandedFirstUrl)||"",rwgToken:decodeURIComponent((0,q.RU)(q.QC.rwgToken)||"")}),[i]),{data:y,error:_}=(0,s.NN)(i?nU:null,g),j=(0,u.gy)(y?.reservation)??null,b=(0,a.useRef)(null);o||(b.current=j);let v=o?b.current:j;(0,a.useEffect)(()=>{v?.payment?.id&&v?.payment?.status===M.zs.Failed&&(m((0,k.__)`We could not process payment, please try again.`,{size:"expanded"}),f(!1))},[v?.payment?.id,v?.payment?.status,m]);let w=(0,a.useCallback)(async(e,t)=>{let n;if(!i)return Promise.reject(Error("reservationId is not set"));let a={id:i,input:{notes:e,channelType:function(e){let t=eC.u.get("rwgSessionData");if(t){let{rwgToken:i,geiToken:n,pId:a}=JSON.parse(t);if((i||n)&&a===e)return M.Cu.Direct}return!1}(r)||ek(p)||M.Cu.Generic}};f(!0);try{if(t===M.r_.Cwc?n=await d(a):t===M.r_.PayAtStore?n=await l(a):(0,A.Oz)(Error("Unsupported protection strategy"),{protectionStrategy:t,reservationId:i},{source:"BookingFlow"}),n?.errors?.length)throw n.errors;return Promise.resolve()}catch(e){throw(0,A.Oz)(Error("Confirmation failed"),{event_type:"booking_flow_confirmation_failed",error:e,protectionStrategy:t,apiErrors:n?.errors?JSON.stringify(n?.errors):void 0,reservationId:i},{source:"BookingFlow"}),e}finally{f(!1)}},[l,d,i,r,p]),S=(0,a.useCallback)(async e=>{try{let t=await c({id:i,input:{promoCode:e}});if(t?.errors?.[0])return t.errors[0].extensions?.formattedMessage||(0,k.__)`Invalid code. Got a gift card? Redeem at venue`}catch(e){if(e?.response?.errors?.[0])return e.response.errors[0].extensions?.formattedMessage||(0,k.__)`Invalid code. Got a gift card? Redeem at venue`}},[i,c]),C=(0,a.useMemo)(()=>({shouldBlockConfirming:!v||x,reservation:v,confirmReservation:w,updateReservationPromotionCode:S,errors:_||[],subscriptionVariables:g}),[v,x,w,S,_,g]);return(0,n.jsx)(nH.Provider,{value:C,children:t})};function nY(){let e=(0,a.useContext)(nH);if(!e)throw Error("useReservation must be used inside a <ReservationContext.Provider>");return e}var nX=i(88584),nZ=i(37773),nJ=i(84637);let nQ=e=>{let{isOpen:t,setOpen:i,onOpen:s,onClose:r,onChange:o,initialValue:l}=e,d=(0,j.d)("laptop"),c=(0,nJ.Wx)({initialValues:{notes:""},onSubmit:e=>{o(e.notes),r()}});(0,a.useEffect)(()=>{t&&c.setFieldValue("notes",l)},[t]),(0,a.useEffect)(()=>{d&&t&&r()},[d,r,t]);let u=(0,a.useCallback)(()=>(c.submitForm(),Promise.resolve()),[]);return d?null:(0,n.jsxs)(eh.y,{title:(0,k.__)("Booking notes"),isOpen:t,setOpen:i,onOpen:s,onClose:r,children:[(0,n.jsx)(eh.y.Header,{onClose:r}),(0,n.jsx)(eh.y.Body,{children:(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)("form",{onSubmit:c.handleSubmit,children:(0,n.jsx)(nm.f,{placeholder:(0,k.__)("Include comments or requests about your booking"),label:(0,k.__)("Booking notes"),isLabelHidden:!0,name:"notes",onChange:c.handleChange,value:c.values.notes})})})}),(0,n.jsx)(eh.y.Footer,{children:(0,n.jsx)(g.$,{id:"primaryAction",variant:"primary",onAction:u,isFull:!0,children:(0,k.__)("Done")})})]})};var n0=i(56637),n1=i(73443),n2=i.n(n1),n3=i(2602),n4=i(30497),n5=i(44223);let n8=e=>{let{isOpen:t,onOpen:i,onClose:a,setOpen:s,depositPolicyContent:r,onPay:o,paymentMethod:{brand:l,description:d},onPaymentMethodEditAction:c,PayNowButton:u}=e;return(0,n.jsxs)(eh.y,{title:(0,k.__)("Pay deposit to confirm"),isOpen:t,onOpen:i,onClose:a,setOpen:s,mobileHeight:"hug",qaType:"pay-deposit-modal",children:[(0,n.jsx)(eh.y.Header,{onClose:a}),(0,n.jsx)(eh.y.Body,{children:(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsxs)(ep.s,{direction:"vertical",gap:"200",children:[(0,n.jsx)(w.E,{font:"body-s-regular",children:r}),(0,n.jsxs)(eY.c,{children:[(0,n.jsx)(eY.c.Prefix,{leftSection:"string"==typeof l?(0,n.jsx)(np.f,{variant:(0,n3.d)(l),size:"xl"}):l}),(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsx)(w.E,{font:"body-s-medium",children:d}),leftSectionAlignment:"center"})}),(0,n.jsx)(eY.c.Suffix,{leftSection:(0,n.jsx)(g.$,{shape:"pill",variant:"secondary",onAction:c,children:(0,k.__)`Edit`})})]})]})})}),(0,n.jsx)(eh.y.Footer,{children:"apple-pay"===l?(0,n.jsx)(tt.B,{gap:"300",unsafeStyle:{inlineSize:"100%"},children:(0,n.jsx)(u,{EXPERIMENTAL__showApplePayButton:!0,EXPERIMENTAL__onAction:o,children:null})}):(0,n.jsx)(u,{id:"primaryAction",variant:"primary",EXPERIMENTAL__onAction:o,isFull:!0,size:"l",children:(0,k.__)("Pay now")})})]})},n7=a.forwardRef((e,t)=>{let{deposit:i,handleDepositPaid:s,paymentMethod:r,PayNowButton:o}=e,{closeModal:l,isOpen:c,setOpen:u,openModal:m}=(0,e7.V)({key:"deposit",replace:!0});(0,a.useImperativeHandle)(t,()=>({closeModal:l,isOpen:c,setOpen:u,openModal:m}),[l,c,u,m]);let{redirectTo:p}=(0,d.c)(),h=(0,eg.a8)(),x=(0,eg.ok)(),f=(0,a.useCallback)(async()=>{p({pathname:h,hash:`#modal-${n4.e}`,query:{...Object.fromEntries(x.entries()),[n5.$]:"#modal-deposit"}})},[h,x,p]),g=(0,a.useCallback)(async e=>{await s(e),await l()},[l,s]);return i?(0,n.jsx)(n8,{onClose:l,onOpen:m,isOpen:c,setOpen:u,onPay:g,depositPolicyContent:i.content,paymentMethod:r,onPaymentMethodEditAction:f,PayNowButton:o}):null});n7.displayName="DepositDialog";var n6=i(54528);let n9=e=>{let{title:t,content:i,termsAndConditionsTitle:a,termsAndContitionsContent:s}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(n6.V,{title:t,content:i,qaType:"deposit-info"}),a&&s?(0,n.jsx)(n6.V,{title:a,content:s}):null]})};var ae=i(91002),at=i(51650);let ai=e=>{let{usedPromotionCode:t,updateReservationPromotionCode:i}=e,[s,r]=(0,a.useState)(""),[o,l]=(0,a.useState)(""),d=(0,a.useCallback)(e=>(l(""),r(e.target.value.toUpperCase())),[]),c=async()=>{if(""===s)return l((0,k.__)("Invalid code. Got a gift card? Redeem at venue")),Promise.resolve();let e=await i(s);return e?l(e):(l(""),r("")),Promise.resolve()};return(0,n.jsxs)(ep.s,{direction:"vertical",gap:"200",children:[(0,n.jsx)(w.E,{font:"header-s-semibold",mb:"25",children:(0,k.__)("Discount code")}),(0,n.jsx)(ep.s,{direction:"horizontal",alignItems:"flex-end",gap:"100",children:(0,n.jsx)(at.A,{qaType:"discount-code-input",inputMode:"text",error:o,placeholder:(0,k.__)("Enter discount code"),label:(0,k.__)("Discount code"),isLabelHidden:!0,"aria-hidden":!0,value:s,onChange:d,fieldSuffix:(0,n.jsx)(g.$,{variant:"secondary",onAction:c,qaType:"discount-code-button",size:"l",children:(0,k.__)`Apply`})})}),!!t?.name&&(0,n.jsx)(nu.B,{hasIcon:!1,variant:"positive",title:t.name,description:t.code||"",dismissIcon:"trash",qaType:"discount-code-callout-banner",onDismiss:()=>i(null)})]})},an=B.LYu,aa=B.Fl8,as=e=>{let{layout:t,screen:i,bookingNotes:s,canMakePayment:r,handlePaymentError:o,isDepositRequired:l,isLoadingPaymentMethods:d,isPaymentSelectionDisabled:c,isValidatingPaymentMethods:p,hasMadePayment:h,paymentMethods:x,PayNowButton:f,refreshAvailablePaymentMethods:y,requestedPaymentMethods:_,setBookingNotes:b,selectedPaymentMethods:v,setSelectedPaymentMethods:S,PaymentForm:C}=e,E=(0,a.useRef)(null),T=(0,j.d)("laptop"),{location:B}=(0,nc.M)(),{reservation:P,shouldBlockConfirming:I,confirmReservation:F,updateReservationPromotionCode:N,errors:O}=nY(),D=(0,eg.ok)();(0,a.useRef)(D).current=D;let R=(0,a.useRef)(null),{requiresAddedCardForConfirmation:L,protectionStrategy:$,extraPaymentInformationWhenAddedCard:W,deposit:z,cancelationPolicy:q,status:G,patchTestPolicy:V}=P||{},{closeModal:U,isOpen:H,setOpen:K,openModal:Y}=(0,e7.V)({key:"notes"}),{closeModal:X,isOpen:Z,setOpen:J,openModal:Q}=(0,e7.V)({key:"cancellation-policy"}),{closeModal:et,isOpen:ei,setOpen:en,openModal:ea}=(0,e7.V)({key:"add-card-method"}),es=x.find(e=>e?.__typename==="PaymentCardOnFile"),er=x.find(e=>e?.__typename==="PaymentIDeal"),eo=(0,a.useRef)(es||null),el=(0,a.useRef)(void 0),ed=(0,a.useRef)(void 0);ed.current={...ed.current,transactionFlowEnabled:l,shouldBlockConfirming:I,errors:O,isReservationLoading:!1,reservation:{reservationId:P?.id,status:G,requiresAddedCardForConfirmation:L,protectionStrategy:$,parentBooking:P?.parentBookingId},selectedPaymentMethods:Object.values(v||{}).map(e=>e?.__typename).filter(Boolean),paymentStatus:P?.payment?.status};let{isOpen:ec,handleWarning:eu,close:em}=(0,nz.N)(P),eh=(0,a.useCallback)(async e=>{try{if(!eu().canContinue)return;if(l){let t=Date.now();if(!e)throw Error("A callback handling the paying process has not been provided");await e(),ed.current&&(ed.current.makePaymentConfirmed=!0,ed.current.makePaymentConfirmedDurationInSeconds=(Date.now()-t)/1e3),el.current=setTimeout(()=>{ed.current?.paymentStatus!==M.zs.Failed&&(0,A.Oz)(Error("[BF_V2] Timeout - Failed to confirm appointment within given threshold"),ed.current,{source:"BookingFlow"})},1e4)}else await F(s,P.protectionStrategy),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,nZ.Pw)(e,{...t,source:"BookingFlow",event_type:e})}("booking_flow_confirmation_success",{protectionStrategy:P.protectionStrategy})}catch(e){o(e)}},[s,F,o,l,P,eu]),ex=(0,a.useCallback)(()=>(X(),eh(void 0)),[X,eh]),ef=(0,a.useRef)(!1),ey=(0,a.useCallback)(async()=>p?void(0,A.Oz)("Confirm reservation onContinue called while validating payment methods",{},{source:"Payments"}):l&&(!L||v?.card?.__typename==="PaymentApplePay")||r||!L||es?l&&!r?ea():z?R.current?.openModal():!T&&q?Q():eh(void 0):T&&E.current?.submit?E.current?.submit():ea(),[q,r,z,T,p,eh,Q,ea,L,v,l,es]),e_=(0,a.useCallback)(async()=>{ef.current=!0},[]),ej=(0,a.useCallback)(async e=>{eh(e)},[eh]),eb=(0,a.useCallback)(async e=>{eh(e)},[eh]),ev=(0,a.useCallback)(e=>{b(e.target.value)},[b]);(e=>{let{canMakePayment:t,card:i,didAddCard:n,isDepositRequired:s,onContinue:r,refPaymentMethod:o}=e;(0,a.useEffect)(()=>{n.current&&(!s||t)&&(void 0!==o.current&&!o.current&&i&&(i?.__typename==="PaymentApplePay"?(0,A.Oz)("Incorrect auto-confirming with Apple Pay payment"):window.setTimeout(()=>r(),0)),o.current=i)},[t,i,n,s,r,o])})({canMakePayment:r,card:l?v.card:es||null,didAddCard:ef,isDepositRequired:l,onContinue:ey,refPaymentMethod:eo}),(0,a.useEffect)(()=>()=>clearTimeout(el.current),[]);let{breadcrumbs:ew}=(0,u.gy)(t),eS=ew.find(e=>e.action?.id.includes("onBackToTimeSelection")),eC=ew.find(e=>e.action?.id.includes("onBackToServices")),ek=ee((0,u.gy)(i.backAction)),eA=ee(eS?.action?{...eS.action,isDisabled:eS.isDisabled}:null),eE=ee(eC?.action?{...eC.action,isDisabled:eC.isDisabled}:null),eT=(0,a.useMemo)(()=>({label:(0,k.__)`Confirm`,isDisabled:!1,isPending:I||h,onAction:ey}),[ey,I,h]),eB=!((0,m.tH)("B2C_WEB_BOOKING_NOTES_DISABLED")??!0);if(G===M.XW.Expired||O?.[0])return(0,n.jsx)(t3,{title:i.title,description:i.description,backAction:ek,continueAction:{...eT,isDisabled:!0,isPending:!1},data:t,children:(0,n.jsx)(ae.z,{error:O?.[0],hasExpired:G===M.XW.Expired,timeslotSelectionOnAction:eA?.onAction??ek?.onAction,servicesSelectionOnAction:eE?.onAction??ek?.onAction})});let eP=P?.payNow||null,{cart:eI}=(0,u.gy)(t);return(0,n.jsxs)(t3,{title:i.title,description:i.description,backAction:ek,continueAction:eT,slotAboveFooter:(0,n.jsx)(nN,{payNow:P?.payNow||null,payAtVenue:P?.payAtVenue||null}),data:t,children:[(0,n.jsx)(nT,{}),(0,n.jsx)(nh.b,{display:{default:"flex",laptop:"none"},children:(0,n.jsx)("div",{className:n2().mobileSummary,children:(0,n.jsxs)(tt.B,{qaType:"cart-mobile",direction:"vertical",gap:"400",as:"div",children:[(0,n.jsx)(tJ,{name:eI.name,slug:eI.slug,address:eI.address,avatarUrl:eI.avatarUrl,rating:eI.rating,reviewsCount:eI.reviewsCount}),(0,n.jsx)(tK,{timeRangeFormatted:eI.timeRangeFormatted,dateFormatted:eI.dateFormatted,waitlistDateTimeRanges:eI.waitlistDateTimeRanges}),(0,n.jsxs)(ep.s,{gap:"200",direction:"vertical",children:[(0,n.jsx)(tz,{attendees:eI.attendees}),(0,n.jsxs)(ep.s,{gap:"100",direction:"vertical",children:[(0,n.jsx)(tq,{subtotalLabel:eI.subtotalLabel,subtotal:eI.subtotal,discountsTotalLabel:eI.discountsTotalLabel,discountsTotal:eI.discountsTotal,priceTotalLabel:eI.priceTotalLabel,priceTotal:eI.priceTotal,taxTotalLabel:eI.taxTotalLabel,taxTotal:eI.taxTotal}),(0,n.jsx)("div",{children:(0,n.jsx)(nN,{isMobile:!0,payNow:P?.payNow||null,payAtVenue:P?.payAtVenue||null})})]})]})]})})}),(0,n.jsxs)(ep.s,{gap:"400",direction:"vertical",padding:{laptop:["0","0","400","0"]},children:[B?.hasPromoCodes?(0,n.jsx)(nh.b,{display:{default:"block",laptop:"none"},children:(0,n.jsx)("div",{children:(0,n.jsx)(ai,{usedPromotionCode:P?.usedPromotionCode,updateReservationPromotionCode:N})})}):null,!!B&&(d||L)&&!l&&(0,n.jsx)(nj.e,{isDepositRequired:!!z,isLoadingPaymentMethods:d,onAddCard:e_,paymentText:W,location:B,closePaymentModal:et,isPaymentModalOpen:ei,paymentMethodCard:es,setPaymentModalOpen:en,openPaymentModal:ea,ref:E,refreshAvailablePaymentMethods:y,PaymentForm:C}),!!B&&(d||L)&&l&&(0,n.jsx)(nj.g,{accountsEnabled:!0,claimGiftCardEnabled:P?.location?.owner.paymentWithGiftCardsSupported!==!1,onAddCard:e_,paymentText:W,paymentMethods:x,closePaymentModal:et,isPaymentModalOpen:ei,isDisabled:c,setPaymentModalOpen:en,openPaymentModal:ea,ref:E,refreshAvailablePaymentMethods:y,requestedPaymentMethods:_,setSelectedPaymentMethods:S,selectedPaymentMethods:v,payNow:eP?{...eP,monetaryValue:{...eP.monetaryValue,value:String(eP.monetaryValue.value)}}:null,location:B,isLoadingPaymentMethods:d,PaymentForm:C}),!!B&&!d&&!L&&(0,n.jsx)(n_,{extraPaymentInformationWhenAddedCard:W}),B?.hasPromoCodes?(0,n.jsx)(nh.b,{display:{default:"none",laptop:"block"},children:(0,n.jsx)("div",{children:(0,n.jsx)(ai,{usedPromotionCode:P?.usedPromotionCode,updateReservationPromotionCode:N})})}):null,!!er&&v?.card?.id!==er.id&&(0,n.jsx)(ts.h,{variant:"accentFaded",children:(0,n.jsxs)(eY.c,{unsafeStyle:{background:"transparent"},noBorder:!0,variant:"medium",qaType:"ideal-callout",linkTo:void 0,children:[(0,n.jsx)(eY.c.Prefix,{leftSection:(0,n.jsx)(ng.d,{brand:"ideal",size:"m"})}),(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(ep.s,{direction:"vertical",justifyContent:"center",children:(0,n.jsx)(w.E,{font:"header-xs-semibold",children:(0,k.__)("iDEAL now available")})})}),(0,n.jsx)(eY.c.Suffix,{leftSection:(0,n.jsx)(g.$,{shape:"pill",variant:"secondary",onAction:()=>S({card:er}),linkTo:void 0,children:(0,k.__)`Select`})})]})}),z?(0,n.jsx)(n9,{title:z.title,content:z.content,termsAndConditionsTitle:z.termsAndCondition.title,termsAndContitionsContent:z.termsAndCondition.content}):null,q?(0,n.jsx)(n6.V,{title:q.title,content:q.formattedContent}):null,B?.marketplaceInfo?(0,n.jsx)(n6.V,{title:(0,k.__)("Important info"),content:B?.marketplaceInfo}):null,V?(0,n.jsx)(nu.B,{description:(0,n.jsx)(ny.o,{as:"span",children:V.formattedPolicyMessage}),hasIcon:!1,qaType:"patch-test-banner-warning",variant:"warning"}):null,eB?(0,n.jsx)(nh.b,{display:{default:"block",laptop:"block"},children:(0,n.jsxs)("div",{children:[(0,n.jsx)(w.E,{font:"header-s-semibold",mb:"200",children:(0,k.__)("Booking notes")}),(0,n.jsx)(nm.f,{placeholder:(0,k.__)("Include comments or requests about your booking"),label:(0,k.__)("Booking notes"),isLabelHidden:!0,"aria-hidden":!0,value:s,onChange:ev})]})}):null]}),eB?(0,n.jsx)(nQ,{onClose:U,onOpen:Y,isOpen:H,setOpen:K,onChange:b,initialValue:s}):null,(0,n.jsx)(nz.b,{isOpen:ec,onContinueAction:eb,close:em,PayNowButton:f}),z?(0,n.jsx)(n7,{ref:R,PayNowButton:f,deposit:z,handleDepositPaid:ej,paymentMethod:l&&v?(e=>{if(!e)throw Error("Payment method is required");let t=function(e){switch(e.card?.__typename){case"PaymentCardOnFile":return{brand:e.card.brand,description:e.card.redactedCardNumber};case"PaymentApplePay":return{brand:"apple-pay",description:(0,k.__)("Apple Pay")};case"PaymentIDeal":return{brand:"ideal",description:(0,k.__)("iDEAL")};case"PaymentOneOffCard":case null:case void 0:return{brand:"",description:""};default:throw new nP.N(e.card)}}(e);if(e.freshaAccount||e.providerAccount){let i=!!e.card?.id,a=(0,nv.S)(e.providerAccount)?e.providerAccount.providerAccount.balance?.[0]?.amount.formattedShort:null,s=(0,nw.s)(e.freshaAccount)?e.freshaAccount.freshaAccount.balance.amount.formattedShort:null;return{brand:(0,n.jsx)(np.f,{variant:i?"multiple":"wallet",size:"2xl"}),description:i&&!(a&&s)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsx)(w.E,{font:"body-s-semibold",children:(0,k.tS)("Split payment methods","Multiple")}),leftSectionAlignment:"flex-end"}),(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsx)(w.E,{font:"body-s-medium",children:(0,k.tS)("Split payment methods","%{giftCardBalance} wallet + %{selectedCard}",{giftCardBalance:a??s,selectedCard:t.description})}),leftSectionAlignment:"flex-start"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsx)(w.E,{font:"body-s-medium",children:(0,k.__)("Wallet")}),leftSectionAlignment:"flex-end"}),(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutralFaded",children:a&&s?(0,k.__)`Wallet balance`:(0,k.__)("%{amount} balance",{amount:a??s})}),leftSectionAlignment:"flex-start"})]})}}return t})(v):{brand:es?.brand||"",description:es?.redactedCardNumber||""}}):null,q?(0,n.jsx)(n0.C,{onClose:X,onOpen:Q,isOpen:Z,setOpen:J,onAccept:ex,content:q.formattedContent,title:q.title}):null]})},ar=e=>{let{location:t}=(0,nc.M)(),{cart:{slug:i}}=(0,u.gy)(e.layout),{data:r}=Z(),{reservation:o,errors:l,subscriptionVariables:m}=nY(),[h,x]=(0,a.useState)("");(0,a.useEffect)(()=>{let e={cartId:r?.cartId};return(0,nX.ZB)(e,"BookingFlow"),()=>{var t;t=Object.keys(e),(0,nX.wz)(t,"BookingFlow")}},[r]);let{trigger:f}=(0,s.$9)(an),g=(0,a.useCallback)(async e=>{let{payments:t}=e;if(!o?.id)throw Error("Tried to initialise payment without reservation");let{result:i,errors:n}=await f({notes:h,payments:t,reservationId:o.id});return{data:i?.confirmReservationWithTransactions?.payment,errors:n}},[h,o?.id,f]),y=o?.protectionStrategy===M.r_.Deposit,_=o?.protectionStrategy===M.r_.PayAtStore,j="string"==typeof o?.protectionStrategy&&!_,b=_?M.zm.BookingFlow:y?M.zm.BookingFlowDeposit:M.zm.BookingFlowCwc,{data:v,isLoading:w,isValidating:S,mutate:C}=(0,s.uS)(j?nb.h:null,{scope:b,slug:i,amount:o?.payNow?.monetaryValue?.value}),E=!o||w,T=(0,a.useMemo)(()=>v?.availablePaymentMethods?.filter(e=>y||e?.__typename!=="PaymentProviderAccount"&&e?.__typename!=="PaymentFreshaAccount")??[],[v,y]),B=o?.payNow?.monetaryValue?.value,P=(0,a.useCallback)(async e=>{if(!o?.id)return;let t=await (0,eS.L)(aa,{excludedPayments:e,reservationId:o?.id});if(t.errors)throw 1===t.errors.length?t.errors[0]:t.errors;return t.data.outstandingBalanceForReservation?.balance??void 0},[o?.id]),I=(e=>{let{isDepositRequired:t}=e,{reservation:i}=nY(),{locationId:n,locationProviderId:s,locationName:r,setIsDone:o}=Z(),{triggerSplash:l}=(0,nB.dt)(),{sendProviderGaEvent:m,sendProviderPixelEvent:h}=nL(),{navigateTo:x}=(0,d.c)(),f=(0,ef.bQ)(),g=(0,a.useRef)(!1),y=(0,a.useCallback)(()=>{if(i?.parentBookingId){g.current=!0;try{o(!0);let e=(0,u.gy)(f?.data?.profile),t=i.requiresAddedCardForConfirmation?nf.PaymentMethod.CREDIT_CARD:nf.PaymentMethod.PAY_IN_PERSON;(e=>{let{paymentMethod:t,transactionId:i,flowType:n,currency:a,tax:s,email:r,phone:o,value:l,totalFeeEstimate:d,locationName:c}=e;(0,n$.Fj)({event:nW.f.PURCHASE,payment_method:t,transaction_id:i,booking_type:n,venue_name:c,items:[],value:l,...void 0!==s?{tax:s}:{},useremail:r,userphone:o,currency:a,total_fee_estimate:d||0})})({paymentMethod:t,flowType:nf.FlowType.BOOKING,transactionId:i.parentBookingId,value:i.appointment?.total.value,currency:i.appointment?.total.currency,email:e?.email??void 0,phone:e?.phone??void 0,totalFeeEstimate:i.totalFeeEstimate||0,locationName:r});let n=i.appointment?.items?.reduce((e,t)=>({...e,[t.bookableId]:{id:t.bookableId,item_price:t.retailPrice?.value??0,quantity:(e[t.bookableId]?.quantity??0)+1}}),{}),a=n?Object.values(n):[];h({name:"Purchase",value:i.appointment?.total.value?.toString()??"",currency:i.appointment?.total.currency,content_ids:a.map(e=>e.id),contents:a,content_type:"service",transaction_id:i.appointment?.bookingRef}),h({name:"Reservation"}),m({name:"appointment",event_id:i.appointment?.bookingRef,location_name:r,value:i.appointment?.total.value,currency:i.appointment?.total.currency}),m({name:"purchase",transaction_id:i.appointment?.bookingRef,value:i.appointment?.total.value,currency:i.appointment?.total.currency,items:i.appointment?.items?.map(e=>({item_id:e.bookableId,item_name:e.title,price:e.retailPrice?.value}))});let d=(0,c.bN)();if(i.parentBookingId&&d.length){let t=d.map(t=>({event_type:t.event_type,timestamp:t.timestamp,properties:{...t.properties,appointment_id:Number(i.parentBookingId),marketplace_user_id:e?Number(e?.id):null}})),n=t[t.length-1];(0,nx.s)(nx.q.USER_INTERACTIONS_PRIOR_TO_APPOINTMENT_CONFIRMATION,{events:[...t,{...n,timestamp:Date.now()}]})}(0,q.sc)(q.QC.userBookingJourney),(0,q.sc)(q.QC.getloyaltyReferralCodeLabel(s)),l({header:(0,k.tS)("This appears at the end of the booking flow on a splash screen","Appointment confirmed")})}catch(e){(0,A.Oz)(e)}$.m3.tempBookingFlowCompleted({location_id:n,provider_id:Number(s),booking_flow_type:"new_server_driven"}),x((0,p.t8h)(i.parentBookingId,{web2app:"1"}))}},[x,i,l,r,f?.data?.profile,m,h,n,s,o]);return(0,a.useEffect)(()=>{t||g.current||i?.status===M.XW.Confirmed&&y()},[t,y,i?.status]),y})({isDepositRequired:y});return(o||l.length)&&t?(0,n.jsx)(nS.yp,{adyenClientKey:t?.paymentProvider?.adyenClientKey??null,amount:B,applePayLabel:(0,k.__)`Upfront payment`,currency:o?.payNow?.monetaryValue?.currency,countryCode:t?.address?.countryCode,getOutstandingBalance:P,initialisePayment:g,isLoadingPaymentMethods:E,isPaid:e=>(0,u.gy)(e.reservation)?.status===M.XW.Confirmed,onPaid:I,provider:t?.paymentProvider?.type==="CHECKOUT"?M.wF.Checkout:M.wF.Adyen,paymentMethods:T,subscription:m.id?nU:null,subscriptionVariables:m,validateSelectedPaymentMethodsVariables:{locationSlug:i,scope:b},children:t=>{let{canMakePayment:i,handleError:a,hasMadePayment:s,isLoading:r,isPaymentSelectionDisabled:o,PayNowButton:l,paymentMethods:d,requestedPaymentMethods:c,selectedPaymentMethods:u,setSelectedPaymentMethods:m,PaymentForm:p}=t;return(0,n.jsx)(as,{...e,bookingNotes:h,canMakePayment:i,handlePaymentError:a,isDepositRequired:y,isLoadingPaymentMethods:r,isPaymentSelectionDisabled:o,isValidatingPaymentMethods:S,hasMadePayment:s,PayNowButton:l,onConfirmed:I,paymentMethods:d,refreshAvailablePaymentMethods:C,requestedPaymentMethods:c,selectedPaymentMethods:u,setSelectedPaymentMethods:m,setBookingNotes:x,PaymentForm:p})}}):(0,n.jsx)(tE,{children:(0,n.jsx)(nd.k,{})})},ao=B.n2N,al={[M.uK.Blue]:"gradient1",[M.uK.Dark]:"gradient3",[M.uK.Green]:"gradient5",[M.uK.Orange]:"gradient4",[M.uK.Purple]:"gradient2",[M.uK.Gray]:"gradient3",[M.uK.Metallic]:"gradient3"};function ad(e){let{isOpen:t,item:i,items:s,onAction:r,onChange:o,onClose:l,onOpen:d=()=>null,setOpen:c=()=>null,title:u}=e,[m,p]=(0,a.useState)(!1),h=s.reduce((e,t)=>"Service"===t.__typename&&t.membershipId?{...e,[t.membershipId]:(e[t.membershipId]||0)+1}:e,{}),x=(0,a.useCallback)(async e=>{p(!0);try{await o(e)}catch{}p(!1)},[o]);return(0,n.jsxs)(eh.y,{title:u,isOpen:t,setOpen:c,onOpen:d,onClose:l,children:[(0,n.jsx)(eh.y.Header,{onClose:()=>(l(),Promise.resolve())}),(0,n.jsxs)(eh.y.Body,{children:[(0,n.jsx)(eh.y.Body.Section,{children:(0,k.__)("Select membership you want to be used on %{serviceName}",{serviceName:i.name})}),(0,n.jsx)(eh.y.Body.Section,{children:(0,n.jsx)(eK.$,{name:"memberships-choice-list",value:i.membershipId||"",onChange:x,gap:"250",choiceType:"single",children:i.memberships.map(e=>{let{availableSessions:t,formattedExpirationDate:a,id:s,isRecurring:r,isUnlimitedSessions:o,name:l,color:d}=e,c=Math.max(t-(h[s]??0),0),u=!o&&c<=0,m=!i.membershipId&&u;return(0,n.jsx)(eK.$.Item,{value:s,primitiveType:"radio",primitivePosition:"suffix",variant:"lowest",isDisabled:m,children:e=>{let{labelProps:i,descriptionProps:s}=e;return(0,n.jsxs)(eY.c,{children:[(0,n.jsx)(eY.c.Prefix,{leftSection:(0,n.jsx)(ti.M,{icon:r?e9.P:te.y,gradientBackground:al[d],size:"2xl"})}),(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(tt.B,{as:"div",gap:"0",children:[(0,n.jsx)(w.E,{...i,font:"body-s-semibold",children:l}),(0,n.jsx)(w.E,{...s,color:u?"danger":"neutral",font:"body-s-regular",children:t?(0,k.t7)("%{remainingSessions} session remaining","%{remainingSessions} sessions remaining",c,{remainingSessions:c}):(0,k.__)("Unlimited sessions")}),(0,n.jsx)(w.E,{font:"body-s-regular",children:a})]})})})]})}},s)})})})]}),(0,n.jsx)(eh.y.Footer,{children:(0,n.jsx)(g.$,{variant:"secondary",onAction:r,size:"l",isFull:!0,isPending:m,children:(0,k.__)("Continue without membership")})})]})}let ac=e=>{let{layout:t,screen:i}=e,r=(0,e7.V)({key:"memberships"}),{trigger:o}=(0,s.$9)(B.B3X),[l,d]=(0,a.useState)(null),{reservation:c}=nY(),m=(0,a.useMemo)(()=>{if(!c||"EXPIRED"===c.status||!c.groupAttendees||!c.items)return t;let{cart:e,cartSummaryBar:i}=(0,u.gy)(t);return{...t,cart:{...e,attendees:c.groupAttendees.map(e=>({name:e.name,items:c.items.filter(t=>t.attendeeReference===e.reference).map(e=>{let t=null;if("CartLineItemServiceVariant"===e.__typename&&(e.appliedUserMembership||e.userMemberships)){let i=(0,u.gy)(e.appliedUserMembership);t=(0,no.QK)([ao],{fragments:[{__typename:"BookingFlowRichTextFragmentCustomLink",onAction:()=>{d({bookingId:e.id,membershipId:i?.id,memberships:(e.userMemberships??[]).map(e=>({...e,color:e.color})),name:e.name}),r.openModal()},text:i?(0,k.tS)("Membership applied to service","Applied: %{membershipName}",{membershipName:i.name}):(0,k.tS)("Select membership to apply to service","Select membership")}]})}return{caption:(0,no.QK)([ao],{fragments:[{__typename:"BookingFlowRichTextFragmentText",text:e.caption}]}),name:e.name,price:{formatted:e.formattedRetailPrice},priceWithoutDiscounts:null!=e.formattedNonDiscountedPrice?{formatted:e.formattedNonDiscountedPrice}:null,membership:t,serviceAddons:e.serviceAddons}})})),...null!=c.formattedSubtotal?{subtotal:{formatted:c.formattedSubtotal},subtotalLabel:(0,k.tS)("In the booking flow cart summary","Subtotal")}:{subtotal:null,subtotalLabel:null},...null!=c.formattedTotalDiscount?{discountsTotal:{formatted:c.formattedTotalDiscount},discountsTotalLabel:(0,k.tS)("In the booking flow cart summary","Discounts")}:{discountsTotal:null,discountsTotalLabel:null},priceTotal:null!=c.formattedTotalPrice?{formatted:c.formattedTotalPrice}:e.priceTotal,...null!=c.formattedTotalTax?{taxTotal:{formatted:c.formattedTotalTax},taxTotalLabel:(0,k.tS)("The amount of tax included in booking fee","Tax")}:{taxTotal:null,taxTotalLabel:null}},cartSummaryBar:{header:c.formattedTotalPrice,caption:c.caption,cartPreview:i?.cartPreview??null}}},[t,c,r.openModal]),p=(0,a.useCallback)(e=>{if(c&&l)return o({id:c.id,itemId:l.bookingId,membershipId:e})},[l,o,c]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ar,{layout:m,screen:i}),c&&"EXPIRED"!==c.status&&l?(0,n.jsx)(ad,{isOpen:r.isOpen,item:l,items:(c?.items??[]).map(e=>({__typename:"CartLineItemServiceVariant"===e.__typename?"Service":"Package",membershipId:"CartLineItemServiceVariant"===e.__typename?(0,u.gy)(e.appliedUserMembership)?.id??void 0:void 0})),onAction:async()=>{await p(null),r.closeModal()},onChange:async e=>{d({...l,membershipId:e}),await p(e),r.closeModal()},onClose:r.closeModal,title:(0,k.__)("Update membership")}):null]})},au=e=>{let{data:{layout:t,screenConfirm:i}}=e,{locationSlug:r,locationProviderId:o,isValidating:l}=Z(),{sendProviderPixelEvent:d}=nL(),{data:c,isValidating:u,mutate:m}=(0,s.uS)(nl,{slug:r});return(0,a.useEffect)(()=>{d({name:"AddPaymentInfo"})},[]),(0,n.jsx)(nc.Q,{refetch:m,location:c?.location,isLoading:u,children:(0,n.jsx)(nK,{reservationId:i.reservationId,locationProviderId:o,isReservationPaused:l,children:(0,n.jsx)(ac,{layout:t,screen:i})})})},am=e=>{let{data:t}=e,i=(0,u.gy)(t);return i?(0,n.jsx)(au,{data:i}):(0,n.jsx)(tE,{children:(0,n.jsx)(nd.k,{})})},ap=e=>{let{data:{layout:t,screenConfirmV2:i}}=e,s=ee((0,u.gy)(i.backAction)),r=(0,a.useMemo)(()=>({label:(0,k.__)`Confirm`,isDisabled:!1,isPending:!1,onAction:()=>Promise.resolve()}),[]);return(0,n.jsx)(t3,{title:i.title,description:i.description,backAction:s,continueAction:r,data:t,children:null})},ah=e=>{let{data:t}=e,i=(0,u.gy)(t);return i&&"BookingFlowScreenConfirm"===i.screenConfirmV2.__typename?(0,n.jsx)(ap,{data:i}):(0,n.jsx)(tE,{children:null})};var ax=i(31400),af=i(88194),ag=i(59094),ay=i.n(ag);let a_=e=>{let{data:t}=e,i=(0,u.gy)(t);if(!i||"BookingFlowScreenCustomerBlocked"!==i.screenCustomerBlocked.__typename)return(0,n.jsx)(et,{});let{screenCustomerBlocked:a}=i;return(0,n.jsx)(ei,{topSlot:(0,n.jsx)(b._,{src:ax.A.src,className:ay().calendarIcon,alt:(0,k.__)("Booking unavailable"),ratio:"1x1"}),header:a.title,description:a.message,actionSlot:(0,n.jsx)(g.$,{size:"m",variant:"primary",linkTo:af.Dn,children:(0,k.__)("Discover similar locations")})})},aj=()=>(0,n.jsx)(tE,{children:(0,n.jsx)(eD,{})}),ab=e=>{let{data:{layout:t,screenEmployee:i}}=e,{locationId:a,locationProviderId:s}=Z(),r=(0,u.gy)(i),o=ee(r.backAction),l=ee(r.continueAction,{blockedStateAs:"pending",trackingCallback:()=>$.m3.tempBookingFlowStepCompleted({booking_flow_step_name:"team_members",booking_flow_type:"new_server_driven",location_id:a,provider_id:Number(s)})}),d=i.tiles.some(e=>e.isSelected),c=(0,j.d)("laptop");return(0,n.jsx)(t3,{title:r.title,description:r.description,continueAction:l,backAction:o,data:t,withCartSummaryBar:!!c||d,withInitialScrollToTop:!d,children:(0,n.jsx)(eO,{tiles:(0,u.aO)(i.tiles),shouldTrackEvent:!0})})},av=e=>{let{data:t}=e,i=(0,u.gy)(t);return i?(0,n.jsx)(ab,{data:i}):(0,n.jsx)(aj,{})};var aw=i(16242),aS=i.n(aw);let aC=e=>{let t=ee({...e.action,id:e.action?.id,isDisabled:e.isDisabled,label:e.label},{trackingCallback:e.trackingCallback?e.trackingCallback:void 0}),{optimisticOnAction:i}=e,s=t.onAction,r=(0,a.useCallback)(()=>{let e=s();(0,a.startTransition)(async()=>{i?.(),await e})},[s,i]);return(0,n.jsx)(eK.$.Item,{variant:"medium",isChecked:!!e.isSelected,isDisabled:!!t.isDisabled,onAction:r,value:t.label,unsafeClassName:aS()["choice-list-item"],qaType:"option-tile",children:i=>{let{labelProps:a,descriptionProps:s}=i;return t.isPending&&!e.optimisticOnAction?(0,n.jsx)(eH.K.Loader,{variant:"secondary"}):(0,n.jsxs)(ep.s,{direction:"vertical",gap:"25",children:[(0,n.jsx)(w.E,{...a,font:"body-m-medium",children:t.label}),(0,n.jsx)(w.E,{...s,font:"body-s-regular",color:"neutralFaded",children:e.caption})]})}})},ak=()=>{},aA=()=>{let e=(0,j.d)("tablet"),{getOrderedAppearSequenceItemProps:t}=(0,eV.y)({animationDelay:50,animationDuration:500});return(0,n.jsx)(tE,{children:(0,n.jsx)(eK.$,{name:"choice-list",value:"",onChange:()=>{},choiceType:"single",gap:"150",children:(e?[{titleWidth:"40%",captionWidth:"75%"},{titleWidth:"29%",captionWidth:"55%"}]:[{titleWidth:"70%",captionWidth:"90%"},{titleWidth:"55%",captionWidth:"85%"}]).map((e,i)=>{let{titleWidth:s,captionWidth:r}=e;return(0,a.createElement)(eK.$.Item,{...t(`CONTENT_${i}`),key:`${s}-${r}`,variant:"medium",value:`${i}`},()=>(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.E,{width:s,height:"14px",mb:"25"}),(0,n.jsx)(v.E,{width:r,height:"10px"})]}),unsafeStyle:{minBlockSize:"50px"}}))})})})},aE=e=>{let{data:{layout:t,screenFirstVisit:i}}=e,{locationId:s,locationProviderId:r}=Z(),o=(0,u.gy)(i),l=ee(o.backAction),d=ee(o.continueAction,{blockedStateAs:"pending",trackingCallback:()=>$.m3.tempBookingFlowStepCompleted({booking_flow_step_name:"ncf_question",booking_flow_type:"new_server_driven",location_id:s,provider_id:Number(r)})}),c=!(0,j.d)("laptop"),[m,p]=(0,a.useOptimistic)(i.choices,(e,t)=>e.map((e,i)=>({...e,isSelected:i===t})));return(0,n.jsx)(t3,{title:o.title,description:o.description,backAction:l,continueAction:d,data:t,withCartSummaryBar:!c,children:(0,n.jsx)(eK.$,{name:"first-visit-check-options",value:null,onChange:ak,choiceType:"single",gap:"150",children:m.map((e,t)=>{let i=(0,u.gy)(e.action);return(0,n.jsx)(aC,{...e,action:i,optimisticOnAction:()=>{(0,a.startTransition)(()=>{p(t)})},trackingCallback:()=>{c&&$.m3.tempBookingFlowStepCompleted({booking_flow_step_name:"ncf_question",booking_flow_type:"new_server_driven",location_id:s,provider_id:Number(r)})}},e.label)})})})},aT=e=>{let{data:t}=e,i=(0,u.gy)(t);return i?(0,n.jsx)(aE,{data:i}):(0,n.jsx)(aA,{})};var aB=i(44049),aP=i(35007),aI=i(51059);let aF=e=>{let{attendee:t,index:i}=e,a=(0,j.d)("laptop"),s=ee((0,u.gy)(t.editServicesAction)),r=ee((0,u.gy)(t.removeGuestAction));return(0,n.jsxs)(eY.c,{variant:"low",qaType:"attendee-item",children:[(0,n.jsx)(eY.c.Prefix,{leftSection:(0,n.jsx)(eU.e,{firstName:0===i?t.displayName:"",src:t.avatar?.url,size:"l"})}),(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.E,{font:"body-m-semibold",mb:"25",children:t.displayName}),(0,n.jsx)(w.E,{font:"body-s-medium",children:t.caption})]})})}),(0,n.jsx)(eY.c.Suffix,{rightSection:(0,n.jsx)(aI.m,{placement:"bottom end",triggerComponent:e=>{let{triggerRef:t,menuTriggerProps:i}=e;return a?(0,n.jsx)(g.$,{variant:"secondary",shape:"pill",size:"m",suffix:(0,n.jsx)(g.$.IconAffix,{icon:eG.D}),...i,ref:t,children:(0,k.tS)("Make changes to guest in group booking","Options")}):(0,n.jsx)(g.$,{icon:aB.o,isLabelHidden:!0,...i,ref:t,variant:"tertiary",children:(0,k.tS)("Make changes to guest in group booking","Options")})},children:(0,n.jsxs)(aI.m.List,{children:[(0,n.jsx)(aI.m.Item,{onAction:s?.onAction,textValue:s?.label,color:"default",children:(0,n.jsx)(aI.S.Inline,{title:s?.label})}),r?(0,n.jsx)(aI.m.Item,{onAction:r.onAction,textValue:r.label,color:"destructive",children:(0,n.jsx)(aI.S.Inline,{title:r.label})}):null]})})})]})},aN=()=>{let{getOrderedAppearSequenceItemProps:e}=(0,eV.y)({animationDelay:50,animationDuration:500});return(0,n.jsx)(tE,{children:(0,n.jsxs)(ep.s,{direction:"vertical",gap:"300",children:[(0,n.jsx)(ep.s,{direction:"vertical",gap:{default:"0",laptop:"150"},children:[{displayNameWidth:"51%",captionWidth:"62%"},{displayNameWidth:"41%",captionWidth:"42%"},{displayNameWidth:"29%",captionWidth:"37%"}].map((t,i)=>{let{displayNameWidth:a,captionWidth:s}=t;return(0,n.jsxs)(eY.c,{variant:"low",...e(`CONTENT_${i}`),children:[(0,n.jsx)(eY.c.Prefix,{leftSection:(0,n.jsx)(v.E,{width:"46px",height:"46px",shape:"rounded"})}),(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(ep.s,{direction:"column",unsafeStyle:{width:"100%"},children:[(0,n.jsx)(w.E.Skeleton,{font:"body-m-semibold",width:a}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-medium",width:s})]})})}),(0,n.jsx)(eY.c.Suffix,{rightSection:(0,n.jsx)(v.E,{width:"96px",height:"36px",shape:"rounded"})})]},`${a}-${s}`)})}),(0,n.jsx)(v.E,{width:"116px",height:"36px",shape:"rounded"})]})})},aO=e=>{let{data:{layout:t,screenGuestsAndServices:i}}=e,a=(0,u.gy)(i),s=ee((0,u.gy)(i.addGuestAction)),r=ee(a.backAction),o=ee(a.continueAction,{blockedStateAs:"pending"});return(0,n.jsx)(t3,{title:a.title,description:a.description,backAction:r,continueAction:o,data:t,children:(0,n.jsxs)(ep.s,{direction:"vertical",gap:"300",children:[(0,n.jsx)(ep.s,{direction:"vertical",gap:{default:"0",laptop:"150"},children:i.attendees.map((e,t)=>(0,n.jsx)(aF,{attendee:e,index:t},`${e.displayName}_${e.caption}`))}),s?(0,n.jsx)(w.E,{font:"link-m-medium",children:(0,n.jsx)(g.$,{onAction:s.onAction,isDisabled:s.isDisabled,icon:aP.c,iconPosition:"left",variant:"secondary",shape:"pill",children:s.label})}):null]})})},aD=e=>{let{data:t}=e,i=(0,u.gy)(t);return i?(0,n.jsx)(aO,{data:i}):(0,n.jsx)(aN,{})},aM=()=>(0,n.jsx)(tE,{children:(0,n.jsx)(e0,{})}),aR=e=>{let{data:{layout:t,screenMultiEmployee:i}}=e,a=(0,u.gy)(i),s=ee(a.backAction),r=ee(a.continueAction,{blockedStateAs:"pending"});return(0,n.jsx)(t3,{title:a.title,description:a.description,backAction:s,continueAction:r,data:t,children:(0,n.jsx)(e1,{tiles:(0,u.aO)(i.attendees)})})},aL=e=>{let{data:t}=e,i=(0,u.gy)(t);return i?(0,n.jsx)(aR,{data:i}):(0,n.jsx)(aM,{})},a$=()=>{},aW=()=>{let e=(0,j.d)("tablet"),{getOrderedAppearSequenceItemProps:t}=(0,eV.y)({animationDelay:50,animationDuration:500});return(0,n.jsx)(tE,{children:(0,n.jsx)(eK.$,{name:"services-choice-list",value:"",onChange:()=>{},choiceType:"single",gap:"150",children:(e?[{titleWidth:"40%",captionWidth:"75%"},{titleWidth:"29%",captionWidth:"55%"}]:[{titleWidth:"70%",captionWidth:"90%"},{titleWidth:"55%",captionWidth:"85%"}]).map((e,i)=>{let{titleWidth:s,captionWidth:r}=e;return(0,a.createElement)(eK.$.Item,{...t(`CONTENT_${i}`),key:`${s}-${r}`,variant:"medium",value:`${i}`},()=>(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.E,{width:s,height:"14px",mb:"25"}),(0,n.jsx)(v.E,{width:r,height:"10px"})]}),unsafeStyle:{minBlockSize:"50px"}}))})})})},az=e=>{let{data:{layout:t,screenPatchTest:i}}=e,{locationId:s,locationProviderId:r}=Z(),o=(0,u.gy)(i),l=ee(o.backAction),d=ee(o.continueAction,{blockedStateAs:"pending",trackingCallback:()=>$.m3.tempBookingFlowStepCompleted({booking_flow_step_name:"patch_test",booking_flow_type:"new_server_driven",location_id:s,provider_id:Number(r)})}),c=!(0,j.d)("laptop"),[m,p]=(0,a.useOptimistic)(i.choices,(e,t)=>e.map((e,i)=>({...e,isSelected:i===t})));return(0,n.jsx)(t3,{title:o.title,description:o.description,backAction:l,continueAction:d,data:t,withCartSummaryBar:!c,children:(0,n.jsx)(eK.$,{name:"valid-patch-test-check-options",value:null,onChange:a$,choiceType:"single",gap:"150",children:m.map((e,t)=>{let i=(0,u.gy)(e.action);return(0,n.jsx)(aC,{...e,action:i,optimisticOnAction:()=>{(0,a.startTransition)(()=>{p(t)})},trackingCallback:()=>{c&&$.m3.tempBookingFlowStepCompleted({booking_flow_step_name:"patch_test",booking_flow_type:"new_server_driven",location_id:s,provider_id:Number(r)})}},e.label)})})})},aq=e=>{let{data:t}=e,i=(0,u.gy)(t);return i?(0,n.jsx)(az,{data:i}):(0,n.jsx)(aW,{})},aG=e=>{let{data:t}=e,i=(0,u.gy)(t),{setIsDone:s}=Z(),{triggerSplash:r}=(0,nB.dt)(),{navigateTo:o}=(0,d.c)(),l=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{l.current||i&&"BookingFlowScreenSuccess"===i.screenSuccess.__typename&&(l.current=!0,s(!0),r({header:(0,k.tS)("This appears at the end of the booking flow on a splash screen","Appointment confirmed")}),o((0,p.Urd)()))},[i,s,r,o]),(0,n.jsx)(nd.k,{})};var aV=i(33051),aU=i(17048),aH=i(13450),aK=i(72813),aY=i(16727),aX=i(25334),aZ=i(65621),aJ=i(4833),aQ=i(8935),a0=i(41707),a1=i.n(a0);let a2=B.zi_,a3=()=>{},a4=e=>{let{text:t}=e,[i,s]=(0,a.useState)(t),[r,o]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(t!==i){o(!0);let e=setTimeout(()=>{s(t),o(!1)},500);return()=>clearTimeout(e)}},[t,i]),(0,n.jsx)("div",{children:r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:(0,er.A)(a1()["text-fade-animation"],a1()["text-fade-out"]),children:i}),(0,n.jsx)("span",{className:(0,er.A)(a1()["text-fade-animation"],a1()["text-fade-in"]),children:t})]}):(0,n.jsx)("span",{children:i})})},a5=e=>{let{data:t,onAction:i,isSelected:s}=e,r=ee((0,u.gy)(t.action)),o=t.isLoading,l=(0,a.useCallback)(()=>{if(!(o||r?.isDisabled))return i(),r?.onAction()},[i,o,r?.onAction,r?.isDisabled]);return(0,n.jsx)(aY.N,{dayName:t.date.dayNameShort,dayNumber:t.date.dayOfMonth,size:"default",variant:"default",hasDeal:t.icon,isSelected:s,isUnavailable:!s&&!t.isAvailableToBeBooked,isPending:!s&&o,onAction:l,useShortHandDayName:!1})},a8=e=>{let{data:t,selectedDate:i,setSelectedDate:r,setIsLoadingTimeSlots:o}=e,l=(0,j.d)("laptop"),{data:d,mutate:c,locationSlug:p}=Z(),{trigger:h}=(0,s.$9)(a2),x=(0,a.useRef)(null),f=(0,a.useRef)(null),y=(0,a.useRef)(0),[_,b]=(0,a.useState)(i),v=(0,a.useRef)(!i),S=(0,W.r)("B2C_WEB_VENUE_PORTFOLIO"),C=(0,m.tH)("B2C_WEB_BOOKING_FLOW_CONFIRM_STEP_REVAMP"),A=(0,a.useCallback)(e=>{c(async()=>{let t=await h({portfolioEnabled:S.state??!1,confirmStepRevampEnabled:!!C,input:{leftMostDate:e.leftMostDate.date.iso.split("T")[0],locationSlug:p,shouldAutoContinue:!l,cartId:d?.cartId}});return(0,u.gy)(t.result.bookingFlowScreenTimeOnScrollEnd)},{shouldDisableUI:!1})},[c,p,h,l,d,S.state,C]),E=(0,a.useMemo)(()=>(0,iP.A)(A,{debounce:!0,interval:300}),[A]),T=(0,a.useCallback)(()=>{let e=function(e,t){if(!e.current)return null;let i=e.current.scrollWidth,n=e.current.clientWidth,a=Math.abs(e.current.scrollLeft),s=i/t.length,r=Math.round(a/s),o=Math.floor((a+n-s)/s);return{leftMostDate:t[r],rightMostDate:t[o]}}(x,t);e?.leftMostDate&&(b(e.leftMostDate),e.rightMostDate&&(e.leftMostDate.isLoading||e.rightMostDate.isLoading)&&E(e))},[t,E]),{scrollPrev:B,scrollNext:P,scrollToTile:I,canScrollPrev:F,canScrollNext:N}=(e=>{let{scrollableContainerRef:t,handleScrollChange:i,prevScrollPosition:n}=e,[s,r]=(0,a.useState)(()=>({canScrollPrev:!1,canScrollNext:!0})),o=(0,a.useCallback)((e,i)=>{if(t.current){let n=(t.current?Array.from(t.current.querySelectorAll("[data-item]")):[]).find(t=>t.dataset.isoDate===e);n?.scrollIntoView({behavior:i||"smooth",block:"end",inline:"start"})}return Promise.resolve()},[t]),l=(0,a.useCallback)(()=>{if(t.current){let{scrollLeft:e,scrollWidth:i,offsetWidth:a}=t.current;e!==n.current&&(n.current=e),r(()=>({canScrollPrev:Math.abs(e)>0,canScrollNext:Math.ceil(Math.abs(e)+a)<i}))}},[n,t]),d=(0,a.useCallback)(()=>{i(),l()},[i,l]),c=(0,a.useMemo)(()=>(0,iP.A)(d,{debounce:!1,interval:300}),[d]),u=(0,a.useCallback)(()=>{let e=(0,k.JK)().getTextInfo().direction;if(t.current){let i=(Math.abs(t.current.scrollLeft)-t.current.clientWidth)*("rtl"===e?-1:1);t.current.scrollTo({left:i})}},[t]),m=(0,a.useCallback)(()=>{let e=(0,k.JK)().getTextInfo().direction;if(t.current){let i=(Math.abs(t.current.scrollLeft)+t.current.clientWidth)*("rtl"===e?-1:1);t.current.scrollTo({left:i})}},[t]);(0,a.useEffect)(()=>{let e=t?.current;return e&&e.addEventListener("scroll",c),()=>{e&&e.removeEventListener("scroll",c)}},[c,t]);let p=(0,a.useRef)(null),h=(0,V.X)(()=>{d()}),x=(0,V.X)(()=>(0,iP.A)(()=>{p.current&&window.cancelAnimationFrame(p.current),p.current=window.requestAnimationFrame(h)},{debounce:!0,interval:300}));return(0,aQ.w)({onResize:x,ref:t}),{...s,scrollToTile:o,scrollPrev:u,scrollNext:m}})({scrollableContainerRef:x,handleScrollChange:T,prevScrollPosition:y});return(0,a.useEffect)(()=>{i&&(I(i.date.iso,v.current?"smooth":"instant"),v.current=!0)},[i,I]),(0,n.jsxs)("div",{className:(0,er.A)(a1().dateCarousel,a1()["fade-animation"]),children:[(0,n.jsx)("div",{className:a1().buttons,children:(0,n.jsxs)(iv.e,{children:[(0,n.jsx)(g.$,{size:"m",variant:"tertiary",onAction:()=>(B(),Promise.resolve()),isLabelHidden:!0,isDisabled:!F,icon:aV.Y,children:(0,k.__)`Go to earlier date`}),(0,n.jsx)(g.$,{type:"button",size:"m",variant:"tertiary",onAction:()=>(P(),Promise.resolve()),isDisabled:!N,isLabelHidden:!0,icon:ta.v,children:(0,k.__)`Go to later date`})]})}),(0,n.jsx)("div",{className:(0,er.A)(a1().monthName,a1()["fade-animation"]),children:_?(0,n.jsx)(w.E,{as:"span",font:"header-xs-semibold",unsafeClassName:a1().monthNameText,children:(0,n.jsx)(a4,{text:_.date.monthAndYearFormatted})}):null}),(0,n.jsx)("div",{ref:x,className:(0,er.A)(a1().scrollable,a1()["fade-animation"]),children:(0,n.jsx)("div",{className:a1().scrollableInner,ref:f,children:t.map(e=>(0,n.jsx)("div",{"data-item":!0,"data-iso-date":e.date.iso,"data-selected":e.isSelected,className:a1().tileWrapper,children:(0,n.jsx)(a5,{data:e,onAction:()=>{o(!0),r(e)},isSelected:e.date.iso===i?.date.iso},e.date.iso)},e.date.iso))})})]})},a7=e=>{let{data:t,index:i,shouldAutoContinue:a}=e,s=(0,j.d)("laptop"),{locationId:r,locationProviderId:o}=Z(),l=ee((0,u.gy)(t.action),{trackingCallback:()=>{a&&$.m3.tempBookingFlowStepCompleted({booking_flow_step_name:"date_time",booking_flow_type:"new_server_driven",location_id:r,provider_id:Number(o)})}});return(0,n.jsx)(eK.$.Item,{value:t.time,onAction:l?.onAction,isDisabled:l?.isDisabled,isChecked:t.isSelected,variant:"medium",unsafeClassName:a1()["stack-animation"],unsafeStyle:{minHeight:s?"65px":"auto","--animation-order":i+1},qaType:"timeslot",children:()=>l?.isPending?(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsx)("div",{style:{height:"10px"},children:(0,n.jsx)(eH.K.Loader,{variant:"secondary"})}),unsafeStyle:s?void 0:{paddingTop:"7px",paddingBottom:"7px"}}):(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsx)(w.E,{font:"body-m-medium",children:t.time}),rightSection:(0,n.jsxs)(ep.s,{gap:"100",direction:"horizontal",alignItems:"center",children:[t.highDemandLabel?(0,n.jsx)(w.E,{font:"body-s-regular",color:"ghost",children:t.highDemandLabel}):null,t.discount?(0,n.jsx)(ep.s,{padding:["0","50","0","0"],children:(0,n.jsx)(w.E,{font:"body-s-regular",color:"positive",children:t.discount})}):null,t.priceWithoutDiscount?(0,n.jsx)(w.E,{font:"body-m-regular",color:"ghost",unsafeStyle:{textDecoration:"line-through"},children:t.priceWithoutDiscount.formatted}):null,t.price?(0,n.jsx)(w.E,{font:"body-m-medium",children:t.price.formatted}):null]})})},t.time)},a6=e=>{let{data:t,shouldAutoContinue:i}=e;return(0,a.useEffect)(()=>{document.querySelector('input[type="radio"]:checked')?.scrollIntoView({block:"center",behavior:"smooth"})},[]),(0,n.jsxs)(ep.s,{direction:"vertical",gap:"400",padding:{laptop:["0","0","300","0"]},children:[(0,n.jsx)(eK.$,{name:"time-slot-selection",value:null,onChange:a3,choiceType:"single",gap:"150",unsafeClassName:(0,er.A)(a1()["fade-animation"],a1().timeslots),children:t.timeslots.map((e,t)=>(0,n.jsx)(a7,{data:e,index:t,shouldAutoContinue:i},e.time))}),t.sectionJoinWaitlist?(0,n.jsx)("div",{className:(0,er.A)(a1().joinWaitlistLink),children:(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutral",children:(0,n.jsx)(eu,{children:t.sectionJoinWaitlist.textFormatted})})}):null]})},a9=e=>{let{data:t}=e,i=ee(t);return(0,n.jsx)(g.$,{variant:"secondary",shape:"pill",size:"m",onAction:i.onAction,isDisabled:i.isDisabled,children:i.label})},se=e=>{let{data:t}=e,i=(0,j.d)("tablet");return(0,n.jsx)("div",{className:(0,er.A)(a1().notAvailableDay,a1()["fade-animation"]),children:(0,n.jsx)(y.p,{unsafeClassName:a1().notAvailableDay__container,header:t.title,description:t.caption,withBorder:i,topSlot:t.employeeSelection.length>0?(0,n.jsxs)(aK.Z,{size:"l",isTooltipDisabled:!0,disableElevation:!0,children:[t.employeeSelection.map(e=>(0,n.jsx)(aK.Z.Item,{src:e.image?.url,firstName:e.initials},`${e.initials}-${e.image?.url}`)),t.remainingNumberOfEmployees>0?(0,n.jsx)(aK.Z.MoreIndicator,{counter:t.remainingNumberOfEmployees}):null]}):(0,n.jsx)(b._,{src:{CLOSED:aH.A.src,NO_TIMESLOTS:aU.A.src}[t.icon]??aU.A.src,className:a1().notAvailableDay__icon,alt:(0,k.__)`Not available time slot icon`,ratio:"1x1"}),actionSlot:t.actions.length?(0,n.jsx)(tt.B,{gap:"150",as:"div",direction:i?"horizontal":"vertical",display:"flex",unsafeClassName:a1().notAvailableDay__stack,children:t.actions.map(e=>{let t=(0,u.gy)(e);return(0,n.jsx)(a9,{data:t},t.id)})}):null,footer:t.sectionAdditional?(0,n.jsxs)("div",{className:(0,er.A)(a1().notAvailableDay__footer),children:[(0,n.jsx)(em.c,{verticalGap:"200"}),(0,n.jsx)(w.E,{font:"body-s-regular",align:"center",color:"neutralFaded",children:(0,n.jsx)(eu,{children:t.sectionAdditional})})]}):void 0})})},st=e=>{let{data:t}=e,i=ee((0,u.gy)(t?.primaryAction));return(0,n.jsx)(g.$,{variant:"secondary",shape:"pill",size:"m",onAction:i?.onAction,isDisabled:i?.isDisabled,prefix:(0,n.jsx)(eH.K.Affix,{prefixType:"compact",size:"m",children:(0,n.jsxs)(aK.Z,{size:"xs",isTooltipDisabled:!0,disableElevation:!0,children:[t.employees.length?t.employees.map(e=>(0,n.jsx)(aK.Z.Item,{src:e.image?.url,firstName:e.initials},`${e.initials}-${e.image?.url}`)):(0,n.jsx)(aK.Z.Item,{src:void 0,firstName:void 0}),t.remainingNumberOfEmployees>0?(0,n.jsx)(aK.Z.MoreIndicator,{counter:t.remainingNumberOfEmployees}):null]})}),suffix:(0,n.jsx)(g.$.IconAffix,{icon:eG.D}),children:i.label})},si=e=>{let{dates:t,selectedDateIso:i,setSelectedDate:r,setIsLoadingTimeSlots:o}=e,l=(0,j.d)("laptop"),{data:d,isValidating:c,mutate:p}=Z(),h=(0,m.tH)("B2C_WEB_BOOKING_FLOW_CONFIRM_STEP_REVAMP"),{trigger:x}=(0,s.$9)(K),f=(0,a.useMemo)(()=>t.find(e=>e.isAvailableToBeBooked),[t]),g=(0,a.useCallback)(e=>{let i=t.find(t=>t.date.iso.includes(e)),n=(0,u.gy)(i?.action),a=n?.id;!c&&a&&(o(!0),r(i),p(async()=>{let e=await x({id:a,cartId:d?.cartId,shouldAutoContinue:!l,confirmStepRevampEnabled:!!h});return(0,u.gy)(e.result.bookingFlowActionButtonPressed)}))},[t,p,c,x,r,o,l,d,h]),y=i?(0,aX.h)(i):null,_=f?(0,aX.h)(f?.date.iso):null,b=t[t.length-1]?(0,aX.h)(t[t.length-1].date.iso):null,v=(0,aX.h)(new Date().toISOString()),w=(0,a.useMemo)(()=>[_?{before:_}:null,...t.filter(e=>!e.isAvailableToBeBooked).map(e=>(0,aX.h)(e.date.iso)),b?{after:b}:null],[t,_,b]);return f&&(0,n.jsx)(aZ.O,{onChange:g,selectedDate:y||v,disabledDays:w,today:v,maxDate:b||void 0,isDisabled:(!d?.modal&&c)??!1})},sn=()=>{let e=(0,j.d)("laptop"),t=(0,j.d)("tablet");return(0,n.jsxs)(tE,{withSidePadding:!1,children:[(0,n.jsxs)("div",{className:a1().filtersRow,children:[(0,n.jsx)(v.E,{height:"36px",width:"210px",shape:"rounded"}),(0,n.jsx)(v.E,{height:"36px",width:"52px",shape:"rounded"})]}),(0,n.jsx)("div",{className:a1().carousel,children:(0,n.jsxs)(ep.s,{direction:"column",gap:"300",unsafeClassName:a1().dateCarousel,children:[(0,n.jsxs)(ep.s,{justifyContent:"space-between",alignItems:"center",unsafeStyle:e?void 0:{paddingInline:t?"32px":"20px"},children:[(0,n.jsx)(w.E.Skeleton,{font:"header-xs-semibold",unsafeClassName:a1().monthNameText,width:"97px"}),(0,n.jsxs)(iv.e,{unsafeStyle:{paddingInlineEnd:"4px"},children:[(0,n.jsx)(v.E,{width:"20px",height:"20px"}),(0,n.jsx)(v.E,{width:"20px",height:"20px"})]})]}),(0,n.jsxs)(ep.s,{gap:e?"350":"150",unsafeStyle:e?void 0:{paddingInlineStart:t?"32px":"20px"},children:[(0,n.jsx)(v.E,{height:"64px",width:"64px",shape:"rounded"}),(0,n.jsx)(v.E,{height:"64px",width:"64px",shape:"rounded"}),(0,n.jsx)(v.E,{height:"64px",width:"64px",shape:"rounded"}),(0,n.jsx)(v.E,{height:"64px",width:"64px",shape:"rounded"}),e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.E,{height:"64px",width:"64px",shape:"rounded"}),(0,n.jsx)(v.E,{height:"64px",width:"64px",shape:"rounded"}),(0,n.jsx)(v.E,{height:"64px",width:"64px",shape:"rounded"})]}):null]})]})}),(0,n.jsx)(aJ.q,{})]})},sa=e=>{let{data:{layout:t,screenTime:i}}=e,[s,r]=(0,a.useState)(()=>i.dates.find(e=>e.isSelected)??null),[o,l]=(0,a.useState)(!1),{locationId:d,locationProviderId:c}=Z();(0,a.useEffect)(()=>{l(!1),r(e=>{let t=i.dates.find(e=>e.isSelected)??null;return t?.date.iso===e?.date.iso?e:t})},[i.dates]);let m=(0,u.gy)(i),p=ee(m.continueAction,{blockedStateAs:"pending",trackingCallback:()=>$.m3.tempBookingFlowStepCompleted({booking_flow_step_name:"date_time",booking_flow_type:"new_server_driven",location_id:d,provider_id:Number(c)})}),h=ee(m.backAction),x=!(0,j.d)("laptop"),f=!!s&&!m.continueAction?.isDisabled;return(0,n.jsxs)(t3,{title:m.title,description:m.description,continueAction:p,backAction:h,data:t,withSidePadding:!1,withCartSummaryBar:!x||f,withInitialScrollToTop:!f,children:[(0,n.jsxs)("div",{className:a1().filtersRow,children:[i.employeeSelection?(0,n.jsx)(st,{data:i.employeeSelection}):null,(0,n.jsx)(si,{dates:i.dates,setSelectedDate:r,setIsLoadingTimeSlots:l,selectedDateIso:s?.date.iso})]}),i.patchTestCalloutBanner?(0,n.jsx)("div",{className:a1().patchTestCalloutBanner,children:(0,n.jsx)(nu.B,{description:(0,n.jsx)(eu,{children:i.patchTestCalloutBanner.message}),hasIcon:!1,variant:"warning"})}):null,(0,n.jsx)("div",{className:a1().carousel,children:(0,n.jsx)(a8,{data:i.dates,selectedDate:s,setSelectedDate:r,setIsLoadingTimeSlots:l})}),o?(0,n.jsx)(aJ.q,{newUI:!0}):(0,n.jsxs)(n.Fragment,{children:["BookingFlowScreenTimeDayUnavailable"===i.day.__typename?(0,n.jsx)(se,{data:i.day}):null,"BookingFlowScreenTimeDayAvailable"===i.day.__typename?(0,n.jsx)(a6,{data:i.day,shouldAutoContinue:x}):null]})]})},ss=e=>{let{data:t}=e,i=(0,u.gy)(t);return i?(0,n.jsx)(sa,{data:i}):(0,n.jsx)(sn,{})},sr=e=>{let{data:t}=e,i=(0,u.gy)(t);return i&&"BookingFlowScreenUnrecoverableError"===i.screenUnrecoverableError.__typename?(0,n.jsx)(en,{}):(0,n.jsx)(et,{})};var so=i(63799),sl=i.n(so);let sd=B.WhH,sc=()=>(0,n.jsxs)(tE,{children:[(0,n.jsx)(nh.b,{display:{default:"flex",laptop:"none"},children:(0,n.jsx)("div",{className:sl().summary,children:(0,n.jsxs)(ep.s,{direction:"vertical",gap:"500",children:[(0,n.jsx)(ep.s,{direction:"vertical",children:(0,n.jsxs)(ep.s,{alignItems:"center",gap:"200",children:[(0,n.jsx)(v.E,{width:"64px",height:"64px",shape:"default"}),(0,n.jsxs)(ep.s,{direction:"vertical",children:[(0,n.jsx)(w.E.Skeleton,{width:"120px",font:"body-s-semibold"}),(0,n.jsx)(w.E.Skeleton,{width:"100%",font:"body-s-regular"})]})]})}),(0,n.jsxs)(ep.s,{direction:"vertical",gap:"300",children:[(0,n.jsxs)(ep.s,{alignItems:"center",gap:"200",children:[(0,n.jsx)(v.E,{width:"28px",height:"28px",shape:"default"}),(0,n.jsxs)(ep.s,{direction:"vertical",children:[(0,n.jsx)(w.E.Skeleton,{width:"120px",font:"body-s-semibold"}),(0,n.jsx)(w.E.Skeleton,{width:"100%",font:"body-s-regular"})]})]}),(0,n.jsx)(em.c,{}),(0,n.jsxs)(ep.s,{alignItems:"center",gap:"200",children:[(0,n.jsx)(v.E,{width:"28px",height:"28px",shape:"default"}),(0,n.jsxs)(ep.s,{direction:"vertical",children:[(0,n.jsx)(w.E.Skeleton,{width:"120px",font:"body-s-semibold"}),(0,n.jsx)(w.E.Skeleton,{width:"100%",font:"body-s-regular"})]})]})]}),(0,n.jsxs)(ep.s,{gap:"400",direction:"vertical",children:[(0,n.jsx)("div",{children:(0,n.jsx)(v.E,{width:"120px",height:"12px",shape:"rounded"})}),(0,n.jsxs)(ep.s,{gap:"250",direction:"vertical",children:[(0,n.jsxs)(ep.s,{direction:"vertical",children:[(0,n.jsxs)(ep.s,{justifyContent:"space-between",children:[(0,n.jsx)(w.E.Skeleton,{width:"120px",font:"body-s-regular"}),(0,n.jsx)(w.E.Skeleton,{width:"30px",font:"body-s-regular"})]}),(0,n.jsx)(w.E.Skeleton,{width:"30px",font:"body-s-regular"})]}),(0,n.jsx)(em.c,{}),(0,n.jsxs)(ep.s,{justifyContent:"space-between",children:[(0,n.jsx)(w.E.Skeleton,{width:"40px",font:"body-s-regular"}),(0,n.jsx)(w.E.Skeleton,{width:"40px",font:"body-s-regular"})]})]})]})]})})}),(0,n.jsxs)(tt.B,{gap:"300",direction:"vertical",children:[(0,n.jsxs)(ep.s,{gap:"200",direction:"vertical",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(w.E.Skeleton,{font:"header-s-semibold",width:"162px"}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-regular",width:"88%"}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-regular",width:"48%"})]}),(0,n.jsxs)(eY.c,{variant:"medium",children:[(0,n.jsx)(eY.c.Prefix,{leftSection:(0,n.jsx)(v.E,{width:"56px",height:"40px"})}),(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsx)(w.E.Skeleton,{font:"body-s-medium",width:"31%",unsafeStyle:{inlineSize:"100%"}}),leftSectionAlignment:"center"})})]})]}),(0,n.jsx)(nh.b,{display:{default:"block",laptop:"block"},children:(0,n.jsxs)(ep.s,{gap:"50",direction:"vertical",children:[(0,n.jsx)(w.E.Skeleton,{font:"header-s-semibold",width:"162px"}),(0,n.jsx)(ts.h,{unsafeStyle:{blockSize:"120px"},children:(0,n.jsx)(ep.s,{padding:["250","250","250","250"],children:(0,n.jsx)(w.E.Skeleton,{font:"body-s-medium",width:"31%",unsafeStyle:{inlineSize:"100%"}})})})]})})]})]}),su=e=>{let{data:{layout:t,screenWaitlistConfirm:i}}=e,{data:r,locationId:o,locationSlug:l,locationProviderId:x}=Z(),{navigateTo:f}=(0,d.c)(),[g,y]=(0,a.useState)(""),[_,j]=(0,a.useState)(!1),{addErrorToast:b}=(0,h.Y)(),v=(0,a.useCallback)(e=>y(e.target.value),[]),{trigger:S}=(0,s.$9)(sd),{triggerSplash:C}=(0,nB.dt)(),A=i.submitAction,{cart:{slug:E}}=(0,u.gy)(t),T=(0,a.useMemo)(()=>({label:A.label,isDisabled:A.isDisabled,onAction:async()=>{try{j(!0);let{errors:e,result:t}=await S({input:{locationSlug:E,note:g,clientChannelType:L({locationId:o,providerId:x,interactions:(0,c.bN)()})||"MARKETPLACE",firstTouchAt:U(l),cartId:r?.cartId}});if(e){let t=e?.[0]?.extensions?.formattedMessage;b(t??(0,k.__)("Oops! Something went wrong"),{keepOnUnmount:!0});return}C({header:(0,k.tS)("This appears at the end of the waitlist flow on a splash screen","You're on the waitlist")}),f((0,p.ZV4)(t.bookingFlowScreenWaitlistConfirmSubmit.id))}catch{b((0,k.__)("Oops! Something went wrong"),{keepOnUnmount:!0})}finally{j(!1)}},isPending:_}),[_,A,E,g,S,C,f,l,x,o,r,b]),B=(0,u.gy)(i.backAction),{cart:P}=(0,u.gy)(t),I=ee(B),F=!((0,m.tH)("B2C_WEB_BOOKING_NOTES_DISABLED")??!0);return(0,n.jsxs)(t3,{title:i.title,description:i.description,continueAction:T,backAction:I,data:t,children:[(0,n.jsx)(nh.b,{display:{default:"flex",laptop:"none"},children:(0,n.jsx)("div",{className:sl().summary,children:(0,n.jsxs)(tt.B,{direction:"vertical",gap:"400",as:"div",children:[(0,n.jsx)(tJ,{name:P.name,slug:P.slug,address:P.address,avatarUrl:P.avatarUrl,rating:null,reviewsCount:null}),(0,n.jsx)(tK,{timeRangeFormatted:P.timeRangeFormatted,dateFormatted:P.dateFormatted,waitlistDateTimeRanges:P.waitlistDateTimeRanges}),(0,n.jsxs)(ep.s,{gap:"200",direction:"vertical",children:[(0,n.jsx)(tz,{attendees:(0,u.aO)(P.attendees)}),(0,n.jsx)(tq,{subtotalLabel:P.subtotalLabel,subtotal:P.subtotal,discountsTotalLabel:P.discountsTotalLabel,discountsTotal:P.discountsTotal,priceTotalLabel:P.priceTotalLabel,priceTotal:P.priceTotal,taxTotalLabel:P.taxTotalLabel,taxTotal:P.taxTotal})]})]})})}),(0,n.jsxs)(tt.B,{gap:"300",direction:"vertical",children:[i.sectionPayments?(0,n.jsxs)("div",{children:[(0,n.jsx)(w.E,{font:"header-s-semibold",mb:"50",children:i.sectionPayments.title}),(0,n.jsx)(w.E,{font:"body-s-regular",mb:"200",children:i.sectionPayments.description}),(0,n.jsxs)(eY.c,{variant:"medium",children:[(0,n.jsx)(eY.c.Prefix,{leftSection:(0,n.jsx)(np.f,{variant:"venue",size:"xl"})}),(0,n.jsx)(eY.c.Content,{children:(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsx)(w.E,{font:"body-s-medium",children:i.sectionPayments.paymentMethodName}),leftSectionAlignment:"center"})})]})]}):null,F?(0,n.jsx)(nh.b,{display:{default:"block",laptop:"block"},children:(0,n.jsxs)("div",{children:[(0,n.jsx)(w.E,{font:"header-s-semibold",mb:"100",children:i.notes.title}),(0,n.jsx)(nm.f,{placeholder:i.notes.placeholder,label:i.notes.title,isLabelHidden:!0,"aria-hidden":!0,value:g,onChange:v,maxLength:i.notes.lengthLimit,qaType:"textarea-notes"})]})}):null]})]})},sm=e=>{let{data:t}=e,i=(0,u.gy)(t);return i?(0,n.jsx)(su,{data:i}):(0,n.jsx)(sc,{})},sp=()=>{},sh=()=>{let e=(0,j.d)("tablet"),{getOrderedAppearSequenceItemProps:t}=(0,eV.y)({animationDelay:50,animationDuration:500});return(0,n.jsx)(tE,{children:(0,n.jsx)(eK.$,{name:"services-choice-list",value:"",onChange:()=>{},choiceType:"single",gap:"150",children:(e?[{titleWidth:"40%",captionWidth:"75%"},{titleWidth:"29%",captionWidth:"55%"}]:[{titleWidth:"70%",captionWidth:"90%"},{titleWidth:"55%",captionWidth:"85%"}]).map((e,i)=>{let{titleWidth:s,captionWidth:r}=e;return(0,a.createElement)(eK.$.Item,{...t(`CONTENT_${i}`),key:`${s}-${r}`,variant:"medium",value:`${i}`},()=>(0,n.jsx)(eY.c.Row,{leftSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.E,{width:s,height:"14px",mb:"25"}),(0,n.jsx)(v.E,{width:r,height:"10px"})]}),unsafeStyle:{minBlockSize:"50px"}}))})})})},sx=e=>{let{data:{layout:t,screenWaitlistFirstVisit:i}}=e,s=(0,u.gy)(i),r=ee(s.backAction),o=ee(s.continueAction,{blockedStateAs:"pending"}),l=(0,j.d)("laptop"),[d,c]=(0,a.useOptimistic)(i.choices,(e,t)=>e.map((e,i)=>({...e,isSelected:i===t})));return(0,n.jsx)(t3,{title:s.title,description:s.description,backAction:r,continueAction:o,data:t,withCartSummaryBar:!!l,children:(0,n.jsx)(eK.$,{name:"first-visit-check-options",value:null,onChange:sp,choiceType:"single",gap:"150",children:d.map((e,t)=>{let i=(0,u.gy)(e.action);return(0,n.jsx)(aC,{...e,action:i,optimisticOnAction:()=>(0,a.startTransition)(()=>{c(t)})},e.label)})})})},sf=e=>{let{data:t}=e,i=(0,u.gy)(t);return i?(0,n.jsx)(sx,{data:i}):(0,n.jsx)(sh,{})};var sg=i(89616),sy=i(88618),s_=i(15101),sj=i(66771),sb=i(15189),sv=i(11952),sw=i(2180),sS=i(76168),sC=i(33938);let sk=e=>e.toISOString().split("T")[0],sA=(e,t)=>e.toDateString()===t.toDateString(),sE=e=>{let{label:t,labelHidden:i,initiallyOpened:s=!1,disabledDays:r=[],name:o,qaType:l="date",header:d,onChange:c,startDate:u,endDate:m,currentDate:p,isLoading:h=!1,isDisabled:x=!1,dateRangeLabel:f}=e,y=u||p,_=m||y,[b,v]=(0,a.useState)(s),w=(0,a.useRef)(null),S=(0,a.useRef)(null),[C,A]=(0,a.useState)(null),[E,T]=(0,a.useState)(y),[B,P]=(0,a.useState)(_),I=(0,j.d)("tablet"),F=(0,a.useCallback)(()=>{c(E,B),v(!1)},[c,E,B]),N=(0,a.useMemo)(()=>({isOpen:b,close:F,open:()=>v(!0),toggle:()=>v(e=>!e),setOpen:()=>{}}),[b,F]),O=f||(sA(E,B)?(0,sC.Xq)(E):`${(0,sC.Xq)(E)} - ${(0,sC.Xq)(B)}`),D=(0,a.useRef)("even"),M=(0,a.useMemo)(()=>sA(E,B)?E:{from:E,to:B},[E,B]),R=M,L=null;return C&&M instanceof Date&&(s_.l.DateUtils.isDayBefore(C,M)?(R={from:C,to:M},L="from"):s_.l.DateUtils.isDayAfter(C,M)&&(R={from:M,to:C},L="to")),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(sj.S,{ref:w,qaType:`${l}-field`,children:[i?null:(0,n.jsx)(sj.S.Label,{htmlFor:`input-${o}`,children:(0,n.jsx)(sj.S.Label.Text,{children:t})}),(0,n.jsxs)(sw.e,{isDisabled:x,children:[(0,n.jsx)(sw.e.Value,{text:O}),(0,n.jsx)(sw.e.NativeSelect,{id:`input-${o}`,name:`input-${o}`,value:O,onMouseDown:e=>e.preventDefault(),onTouchStart:e=>e.preventDefault(),onClick:N.toggle,qaType:`${l}-select`,"aria-label":t,disabled:h||x,children:null}),h?(0,n.jsx)(sb.s.LoadingSuffix,{}):(0,n.jsx)(tO.E,{onAction:N.toggle,children:(0,n.jsx)(sw.e.ChevronSuffix,{})})]})]}),(0,n.jsxs)(sv.A,{triggerRef:w,popoverRef:S,state:N,shape:"sheetResponsive",placement:"bottom start",offset:parseInt(sS.qo,10),header:d,hideHeader:I,children:[(0,n.jsx)(s_.l,{formatMonthTitle:sC.N0,formatWeekdayShort:sC.Wj,currentDate:p,selectedDays:R,selectingSecondDay:L,disabledDays:r,toMonth:e.maxDate,onDayClick:(e,t)=>{let{disabled:i,outside:n}=t;if(i||n)return;let a=sk(e),s=sk(E);"even"===D.current?(T(e),P(e),D.current="odd"):(a<s?(P(E),T(e)):(P(e),T(E)),D.current="even")},onDayMouseEnter:(e,t)=>{M&&M instanceof Date&&(s_.l.DateUtils.isDayAfter(e,M)||s_.l.DateUtils.isDayBefore(e,M))&&!t.disabled?A(e):A(null)},month:B?new Date(B):void 0,qaType:l?`datepicker-${l}`:void 0,nextMonthButtonIconIconSlot:ta.v,prevMonthButtonIconIconSlot:aV.Y}),(0,n.jsxs)(iv.e,{direction:"row",wrap:"nowrap",unsafeStyle:{justifyContent:"end"},children:[(0,n.jsx)(g.$,{id:"clear-date-range",size:"l",variant:I?"tertiary":"secondary",onAction:()=>(T(y),P(_),Promise.resolve()),isFull:!I,children:(0,k.tS)("Button label to clear date range selection in modal","Clear")}),(0,n.jsx)(g.$,{id:"confirm-range-selection",isFull:!I,size:"l",variant:"primary",onAction:()=>(N.close(),Promise.resolve()),children:(0,k.tS)("Button label to confirm selection","Done")})]})]})]})};var sT=i(64323),sB=i(26835);let sP=e=>{let t=String(e.value);return(0,n.jsx)(sB.l.Option,{value:t,children:e.label},t)},sI=e=>{let{label:t,labelHidden:i=!0,name:s,qaType:r="time",header:o,timeOptions:l,timeOptionsPredefined:d,isLoading:c=!1,isDisabled:u=!1,onOpen:m}=e,[p,h]=(0,a.useState)(!1),x=(0,a.useRef)(null),f=(0,a.useRef)(null),[y,_]=(0,a.useState)(null==e.timeFrom?"":String(e.timeFrom)),[b,v]=(0,a.useState)(null==e.timeTo?"":String(e.timeTo)),[w,S]=(0,a.useState)(`${d[0]?.from??null}-${d[0]?.to??null}`),C=(0,j.d)("tablet"),A=(0,a.useMemo)(()=>l.reduce((e,t)=>({...e,...null!==t.value&&{[t.value.toString()]:t}}),{}),[l]),E=(0,a.useCallback)(()=>{let t=e=>e?Number(e):void 0,i=t(y),n=t(b);e.onChange(i,n),h(!1)},[e,y,b]),T=(0,a.useCallback)(()=>{m?.(),h(!0)},[m]),B=(0,a.useMemo)(()=>({isOpen:p,close:E,open:T,toggle:()=>h(e=>!e),setOpen:tp.l}),[p,E,T]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(sj.S,{ref:x,qaType:`${r}-field`,children:[i?null:(0,n.jsx)(sj.S.Label,{htmlFor:`input-${s}`,children:(0,n.jsx)(sj.S.Label.Text,{children:t})}),(0,n.jsxs)(sw.e,{isDisabled:u,children:[(0,n.jsx)(sw.e.Value,{text:e.timeRangeLabel||[A[y]?.label,A[b]?.label].filter(Boolean).join(" - ")||(0,k.tS)('One of radio select "Pick day part" options, others are like "morning", "evening" etc.',"Any time")}),(0,n.jsx)(sw.e.NativeSelect,{id:`input-${s}`,name:`input-${s}`,onMouseDown:e=>e.preventDefault(),onTouchStart:e=>e.preventDefault(),onClick:B.toggle,qaType:`${r}-select`,"aria-label":t,disabled:c||u,children:null}),c?(0,n.jsx)(sb.s.LoadingSuffix,{}):(0,n.jsx)(tO.E,{onAction:B.toggle,children:(0,n.jsx)(sw.e.ChevronSuffix,{})})]})]}),(0,n.jsxs)(sv.A,{triggerRef:x,popoverRef:f,state:B,shape:"sheetResponsive",placement:"bottom end",offset:parseInt(sS.qo,10),header:C?void 0:o,qaType:`${r}-popover`,minWidth:C?430:void 0,children:[(0,n.jsx)(sT.Y,{id:"choice-list-chip-single",label:(0,k.__)("Select part of the day"),name:"chips",value:w,choiceType:"single",onChange:e=>{let[t,i]=e.split("-");return _(A[t]?t:""),v(A[i]?i:""),S(e),Promise.resolve()},isLabelHidden:!0,children:d.map(e=>(0,n.jsx)(sT.Y.Item,{value:`${e.from}-${e.to}`,label:e.label,shape:"pill",size:"m"},e.label))}),(0,n.jsxs)(sy.J,{colspan:{default:12},children:[(0,n.jsx)(sy.J.Item,{colspan:{default:6},children:(0,n.jsxs)(sB.l,{onChange:e=>(e=>{_(e),S("");let t=Number(e)>Number(b);if(!b||t){let t=l.findIndex(t=>String(t.value)===e),i=-1!==t?l[t+1].value:null;"number"==typeof i&&v(String(i))}})(e.target.value),value:y,qaType:"time-from-select",children:[(0,n.jsx)(sB.l.Option,{value:"",disabled:!0,children:(0,k.tS)("Time from","From")}),l.slice(0,-1).map(sP)]})}),(0,n.jsx)(sy.J.Item,{colspan:{default:6},children:(0,n.jsxs)(sB.l,{onChange:e=>{let t;return v(e.target.value),S(""),t=l[0].value,void(!y&&"number"==typeof t&&_(String(t)))},value:b,qaType:"time-to-select",children:[(0,n.jsx)(sB.l.Option,{value:"",disabled:!0,children:(0,k.tS)("Time to","To")}),l.filter(e=>e.value&&e.value>Number(y)).map(sP)]})})]}),(0,n.jsxs)(iv.e,{direction:"row",wrap:"nowrap",unsafeStyle:{justifyContent:"end"},children:[(0,n.jsx)(g.$,{id:"clear-time-range",qaType:`${r}-clear-btn`,size:"l",variant:C?"tertiary":"secondary",onAction:()=>(_(""),v(""),S(`${d[0].from}-${d[0].to}`),Promise.resolve()),isFull:!C,children:(0,k.tS)("Button label to clear time range selection in modal","Clear")}),(0,n.jsx)(g.$,{id:"confirm-range-selection",qaType:`${r}-done-btn`,isFull:!C,size:"l",variant:"primary",onAction:E,children:(0,k.tS)("Button label to confirm selection","Done")})]})]})]})};var sF=i(98988),sN=i.n(sF);let sO=B.q4h,sD=e=>{let{row:t,index:i,dateRangeSelectorLabel:r,timeRangeSelectorLabel:o,isDatePickerOpened:l,availableDates:d}=e,{data:c,isValidating:p,mutate:h,locationSlug:x}=Z(),{trigger:f}=(0,s.$9)(sO),y=0===i,_=ee(t.deleteAction?(0,u.gy)(t.deleteAction):void 0),j=(0,a.useCallback)(e=>{let t=e.toISOString().split("T")[0];return!d.includes(t)},[d]),b=(0,m.tH)("B2C_WEB_BOOKING_FLOW_CONFIRM_STEP_REVAMP"),v=(0,W.r)("B2C_WEB_VENUE_PORTFOLIO"),w=(0,a.useCallback)(e=>{let{index:t,fromDate:i,toDate:n,fromTime:a,toTime:s}=e;return h(async()=>{let e=await f({portfolioEnabled:v.state??!1,confirmStepRevampEnabled:!!b,input:{index:t,fromDate:i,toDate:n||i,fromTime:a,toTime:s||a,locationSlug:x,cartId:c?.cartId}});return(0,u.gy)(e.result.bookingFlowScreenWaitlistSetupUpdateRow)})},[h,f,x,c,v.state,b]);return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(sy.J.Item,{colspan:{default:5},children:(0,n.jsx)("div",{children:(0,n.jsx)(sE,{name:`date-range-${i}`,label:r,labelHidden:!y,initiallyOpened:l,header:(0,k.__)("Select date"),onChange:(e,n)=>{let a=t.dateFrom?.split("T")[0],s=t.dateTo?.split("T")[0],r=e.toISOString().split("T")[0],o=n.toISOString().split("T")[0];(a!==r||s!==o)&&w({index:i,fromDate:e.toISOString().split("T")[0],toDate:n.toISOString().split("T")[0],fromTime:t.timeFrom,toTime:t.timeTo})},disabledDays:j,startDate:t.dateFrom?(0,aX.h)(t.dateFrom):void 0,endDate:t.dateTo?(0,aX.h)(t.dateTo):void 0,currentDate:new Date,isDisabled:p,dateRangeLabel:t.dateFormatted})})}),(0,n.jsx)(sy.J.Item,{colspan:{default:5},children:(0,n.jsx)("div",{children:(0,n.jsx)(sI,{name:`time-range-${i}`,label:o,labelHidden:!y,header:(0,k.__)("Select start time"),onChange:(e,n)=>{let a=n??null;((e??null)!==t.timeFrom||a!==t.timeTo)&&w({index:i,fromDate:t.dateFrom,toDate:t.dateTo,fromTime:e,toTime:n})},timeOptions:t.timeOptions,timeOptionsPredefined:t.predefinedOptions.map(e=>({...e,from:e.from??null,to:e.to??null})),timeRangeLabel:t.timeRangeFormatted,timeFrom:t.timeFrom,timeTo:t.timeTo,isDisabled:(!c?.modal&&p)??!1})})}),_?(0,n.jsx)(sy.J.Item,{colspan:{default:1},alignSelf:"end",children:(0,n.jsx)(g.$,{onAction:_.onAction,isDisabled:_.isDisabled,icon:ib.u,size:"l",variant:"tertiary",isLabelHidden:!0,children:_.isDisabled})}):null]},`${t.dateFormatted}-${i}`)},sM=()=>(0,n.jsxs)(tE,{children:[(0,n.jsxs)(sy.J,{colspan:12,columnGap:16,rowGap:16,columnCount:10,children:[(0,n.jsx)(sy.J.Item,{colspan:{default:5},children:(0,n.jsx)("div",{children:(0,n.jsx)(v.E,{width:"100%",height:"46px",shape:"hard"})})}),(0,n.jsx)(sy.J.Item,{colspan:{default:5},children:(0,n.jsx)("div",{children:(0,n.jsx)(v.E,{width:"100%",height:"46px",shape:"hard"})})}),(0,n.jsx)(sy.J.Item,{colspan:{default:5},children:(0,n.jsx)("div",{children:(0,n.jsx)(v.E,{width:"100%",height:"46px",shape:"hard"})})}),(0,n.jsx)(sy.J.Item,{colspan:{default:5},children:(0,n.jsx)("div",{children:(0,n.jsx)(v.E,{width:"100%",height:"46px",shape:"hard"})})})]}),(0,n.jsx)("div",{className:sN().addTimeRangeButton,children:(0,n.jsx)(v.E,{width:"197px",height:"36px",shape:"rounded"})}),(0,n.jsx)(w.E.Skeleton,{font:"body-s-regular",unsafeClassName:sN().changedYourMind,width:"248px"})]}),sR=e=>{let{data:{layout:t,screenWaitlistSetup:i}}=e,s=(0,u.gy)(i),r=i.addNextTimeRangeAction?(0,u.gy)(i.addNextTimeRangeAction):void 0,o=ee(r),l=i.callout?.primaryAction?(0,u.gy)(i.callout.primaryAction):void 0,d=ee(l),c=(i.form.rows?.length||1)>1,m=(0,a.useRef)(-1),p=ee(s.continueAction?(0,u.gy)(s.continueAction):void 0,{blockedStateAs:"pending"}),h=ee(s.backAction?(0,u.gy)(s.backAction):void 0);return(0,n.jsxs)(t3,{title:s.title,description:s.description,continueAction:p,backAction:h,data:t,children:[(0,n.jsx)(sy.J,{colspan:12,columnGap:16,rowGap:16,columnCount:c?11:10,children:i.form.rows?.map((e,t)=>(0,n.jsx)(sD,{row:e,index:t,timeRangeSelectorLabel:i.form.timeRangeSelectorLabel,dateRangeSelectorLabel:i.form.dateRangeSelectorLabel,isDatePickerOpened:t===m.current,availableDates:i.form.dates},`${e.dateFormatted}-${e.timeRangeFormatted}-${t}`))}),o&&r?(0,n.jsx)("div",{className:sN().addTimeRangeButton,children:(0,n.jsx)(g.$,{size:"m",icon:aP.c,iconPosition:"left",variant:"secondary",shape:"pill",onAction:()=>(m.current=i.form.rows.length+1,o.onAction()),isDisabled:o.isDisabled,children:r.label})}):null,i.callout&&d&&l?(0,n.jsx)("div",{className:sN().calloutBanner,children:(0,n.jsx)(nu.B,{description:i.callout.text,variant:"accent",hasIcon:!1,children:(0,n.jsx)(g.$,{variant:"tertiary",onAction:d.onAction,isDisabled:d.isDisabled,size:"m",shape:"square",isCompact:!0,icon:sg.f,children:l.label})})}):null,(0,n.jsx)(w.E,{font:"body-s-regular",color:"neutral",unsafeClassName:sN().changedYourMind,children:(0,n.jsx)(eu,{children:i.sectionGoBackToTimeSelection})})]})},sL=e=>{let{data:t}=e,i=(0,u.gy)(t);return i?(0,n.jsx)(sR,{data:i}):(0,n.jsx)(sM,{})},s$=e=>{let{data:t}=e,{optimisticHint:i}=Z(),a=(0,m.tH)("B2C_WEB_BOOKING_FLOW_CONFIRM_STEP_REVAMP"),s=t.screen.__typename;if(i&&i.targetId!==s)switch(i.targetId){case"BookingFlowScreenServices":return(0,n.jsx)(id,{data:null});case"BookingFlowScreenPatchTest":return(0,n.jsx)(aq,{data:null});case"BookingFlowScreenEmployee":return(0,n.jsx)(av,{data:null});case"BookingFlowScreenAllEmployees":return(0,n.jsx)(nr,{data:null});case"BookingFlowScreenMultiEmployee":return(0,n.jsx)(aL,{data:null});case"BookingFlowScreenFirstVisit":return(0,n.jsx)(aT,{data:null});case"BookingFlowScreenGuestsAndServices":return(0,n.jsx)(aD,{data:null});case"BookingFlowScreenTime":return(0,n.jsx)(ss,{data:null});case"BookingFlowScreenConfirm":return a?(0,n.jsx)(ah,{data:null}):(0,n.jsx)(am,{data:null});case"BookingFlowScreenWaitlistSetup":return(0,n.jsx)(sL,{data:null});case"BookingFlowScreenWaitlistFirstVisit":return(0,n.jsx)(sf,{data:null});case"BookingFlowScreenWaitlistConfirm":return(0,n.jsx)(sm,{data:null});case"BookingFlowScreenCustomerBlocked":return(0,n.jsx)(a_,{data:null});case"BookingFlowScreenUnrecoverableError":return(0,n.jsx)(sr,{data:null});case"BookingFlowScreenSuccess":return(0,n.jsx)(aG,{data:null})}switch(s){case"BookingFlowScreenServices":return(0,n.jsx)(id,{data:t});case"BookingFlowScreenPatchTest":return(0,n.jsx)(aq,{data:t});case"BookingFlowScreenEmployee":return(0,n.jsx)(av,{data:t});case"BookingFlowScreenAllEmployees":return(0,n.jsx)(nr,{data:t});case"BookingFlowScreenMultiEmployee":return(0,n.jsx)(aL,{data:t});case"BookingFlowScreenFirstVisit":return(0,n.jsx)(aT,{data:t});case"BookingFlowScreenGuestsAndServices":return(0,n.jsx)(aD,{data:t});case"BookingFlowScreenTime":return(0,n.jsx)(ss,{data:t});case"BookingFlowScreenConfirm":return a?(0,n.jsx)(ah,{data:t}):(0,n.jsx)(am,{data:t});case"BookingFlowScreenWaitlistSetup":return(0,n.jsx)(sL,{data:t});case"BookingFlowScreenWaitlistFirstVisit":return(0,n.jsx)(sf,{data:t});case"BookingFlowScreenWaitlistConfirm":return(0,n.jsx)(sm,{data:t});case"BookingFlowScreenCustomerBlocked":return(0,n.jsx)(a_,{data:t});case"BookingFlowScreenUnrecoverableError":return(0,n.jsx)(sr,{data:t});case"BookingFlowScreenSuccess":return(0,n.jsx)(aG,{data:t});default:return(0,n.jsx)(ea,{type:s})}},sW=e=>{let{data:t}=e,{optimisticHint:i}=Z();if(i)switch(i.targetId){case"BookingFlowModalService":return(0,n.jsx)(i6,{data:null});case"BookingFlowModalPackage":return(0,n.jsx)(iT,{data:null});case"BookingFlowModalPackageServiceVariant":return(0,n.jsx)(iY,{data:null});case"BookingFlowModalMembership":return(0,n.jsx)(ij,{data:null});case"BookingFlowModalEmployee":return(0,n.jsx)(eq,{data:null});case"BookingFlowModalEmployeeBulk":return(0,n.jsx)(e4,{data:null});case"BookingFlowModalAuth":return(0,n.jsx)(eF,{data:null});case"BookingFlowModalUpsell":return(0,n.jsx)(nn,{data:null});case"BookingFlowModalEmployeeProfile":return(0,n.jsx)(e6,{data:null})}if(!t.modal||i?.targetId.startsWith("BookingFlowScreen"))return null;let a=(0,u.gy)(t.layout),s=t.modal.__typename;switch(s){case"BookingFlowModalService":return(0,n.jsx)(i6,{data:t.modal,accessoryBars:a.accessoryBars});case"BookingFlowModalPackage":return(0,n.jsx)(iT,{data:t.modal,accessoryBars:a.accessoryBars});case"BookingFlowModalMembership":return(0,n.jsx)(ij,{data:t.modal,accessoryBars:a.accessoryBars});case"BookingFlowModalEmployee":return(0,n.jsx)(eq,{data:t.modal});case"BookingFlowModalEmployeeBulk":return(0,n.jsx)(e4,{data:t.modal});case"BookingFlowModalAuth":return(0,n.jsx)(eF,{data:t.modal});case"BookingFlowModalUpsell":return(0,n.jsx)(nn,{data:t.modal,accessoryBars:a.accessoryBars});case"BookingFlowModalPackageServiceVariant":return(0,n.jsx)(iY,{data:t.modal,accessoryBars:a.accessoryBars});case"BookingFlowModalEmployeeProfile":return(0,n.jsx)(e6,{data:t.modal});default:return(0,n.jsx)(ea,{type:s})}},sz=e=>{let{data:t}=e,{addErrorToast:i,addSuccessToast:s}=(0,h.Y)();return(0,a.useEffect)(()=>{if(t.toasts)for(let[e,a]of t.toasts.entries()){let t=(0,n.jsx)(eu,{children:a.message},e);switch(a.__typename){case"BookingFlowToastError":i(t);break;case"BookingFlowSuccessToast":s(t)}}},[t.toasts,i,s]),null};function sq(){let e=(0,a.useRef)(!1),{data:t,isLoading:i,locationSlug:s,error:r}=Z(),{sendProviderGaEvent:o,sendProviderPixelEvent:l}=nL(),{redirectTo:c}=(0,d.c)(),u=(0,a.useRef)(!1);return((0,a.useEffect)(()=>{e.current||(e.current=!0,l({name:"InitiateCheckout"}),l({name:"PageView"}),o({name:"page_view",title:window.document.title,page:window.location.pathname}))},[o,l]),(0,a.useEffect)(()=>{u.current||r?.extensions?.code==="UNPROCESSABLE"&&(u.current=!0,c((0,p.odY)(s)))},[r,s,c]),i||r?.extensions?.code==="UNPROCESSABLE")?(0,n.jsx)(ir,{}):t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.Provider,{value:"SCREEN",children:(0,n.jsx)(s$,{data:t})}),(0,n.jsx)(J.Provider,{value:"MODAL",children:(0,n.jsx)(sW,{data:t})}),(0,n.jsx)(sz,{data:t})]}):(0,n.jsx)(en,{})}function sG(e){let{locationId:t,locationSlug:i,locationProviderId:a,locationName:s,locationTrackingCodes:r}=e;return(0,c.yo)({venueID:t}),(0,n.jsx)(X,{locationId:t,locationSlug:i,locationProviderId:a,locationName:s,locationTrackingCodes:r,children:(0,n.jsx)(sq,{})})}let sV=e=>{let{location:t}=e;return(0,n.jsx)(l.O,{children:(0,n.jsx)(sG,{locationId:t.id,locationSlug:t.slug,locationProviderId:t.owner.id,locationName:t.name,locationTrackingCodes:t.trackingCodes})})};i(66251);var sU=i(51562);i(97272),i(24873),i(68803);let sH=(0,sU.ju)(async e=>{let{locationSlug:t,locale_geo:i,...n}=e.query;if("string"!=typeof t)throw Error("locationSlug not found");return{locationSlug:t,initialData:{bookingLocationProfile:{}},searchParams:n}}),sK=e=>{let{locationSlug:t,initialData:i,searchParams:l}=e,d=i.bookingLocationProfile[t],c={slug:t},{data:u}=(0,s.uS)(nl,c,{fallbackData:d&&{result:d,variables:c},revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}),m=u?.location??d?.location,p=(0,a.useMemo)(()=>(0,r.b)(l??{}),[l]);return m?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.H,{location:m,searchParams:p}),(0,n.jsx)(sV,{location:m})]}):null};sK.getInitialProps=sH},47773:e=>{e.exports={preview:"GiftCardImage_preview__gflIn","preview--default":"GiftCardImage_preview--default__XIkjJ","preview--compact":"GiftCardImage_preview--compact__93W6_","preview--fresha-logo-card":"GiftCardImage_preview--fresha-logo-card__qHDHx","preview--fresha-logo-card--empty":"GiftCardImage_preview--fresha-logo-card--empty____NqF",preview__image:"GiftCardImage_preview__image__5g60f",preview__logo:"GiftCardImage_preview__logo__OVjsk","preview--loaded":"GiftCardImage_preview--loaded__Abff9",preview__icon:"GiftCardImage_preview__icon__l7PfZ","preview--skeleton":"GiftCardImage_preview--skeleton__aAA4h","preview--skeleton--animated":"GiftCardImage_preview--skeleton--animated__NOAK3",skeleton:"GiftCardImage_skeleton__gSedH",preview__themeText:"GiftCardImage_preview__themeText__EtdeR",preview__themeText__logo:"GiftCardImage_preview__themeText__logo__weR_Z",preview__themeText__value:"GiftCardImage_preview__themeText__value__RrTNy",preview__themeText__image:"GiftCardImage_preview__themeText__image__Sjc3e","preview__image--provider":"GiftCardImage_preview__image--provider__OQKpE",self:"GiftCardImage_self__WI6Q2",self__preview:"GiftCardImage_self__preview__OwS67",self__info:"GiftCardImage_self__info__VkVmD","self--skeleton":"GiftCardImage_self--skeleton__PcEEO","self--skeleton--animated":"GiftCardImage_self--skeleton--animated__yk7SX",print:"GiftCardImage_print__otX2r",print__balance:"GiftCardImage_print__balance__dH_G_",print__name:"GiftCardImage_print__name__GSZ_7",print__code:"GiftCardImage_print__code__xafX9",print__expiry:"GiftCardImage_print__expiry__HvIcL"}},48063:(e,t,i)=>{"use strict";i.d(t,{g:()=>b,e:()=>v});var n=i(37876),a=i(69111),s=i(14083),r=i(78430),o=i(14232),l=i(36249),d=i(44223),c=i(21031),u=i(34700),m=i(3203),p=i(30497),h=i(48516),x=i(57747),f=i(64820),g=i(420),y=i(44466);let _=(0,o.forwardRef)((e,t)=>{let{adyenClientKey:i,paymentProviderStr:a,providerCountryCode:r,onSuccessCardChange:o,accountsEnabled:l,onSubmitCard:d,openClaimingModalUsingPill:u,selectedPaymentMethods:m,setPaymentModalOpen:p,setSelectPaymentModalOpen:h,isLoadingPaymentMethods:_,phoneNumberField:j,isFormAlwaysVisible:b,forcePreviewMode:v,onError:w,PaymentForm:S}=e,C=(0,g.d)("laptop");return v||_||!C&&!b||!a||m.freshaAccount||m.providerAccount||m.card?(0,n.jsx)(y.O,{selectedPaymentMethods:m,accountsEnabled:l,onPaymentMethodAction:()=>(m?h(!0):p(!0),Promise.resolve()),showSkeleton:_}):(0,n.jsxs)(s.B,{gap:"300",display:"flex",children:[(0,n.jsx)(S,{ref:t,onSubmitCard:d,adyenClientKey:i,paymentsProvider:a,providerCountryCode:r,onSuccess:o,onError:w,paymentMethodInitializedFrom:"PaymentMethod",phoneNumberField:j,isOpen:!0}),l&&u?(0,n.jsx)(f.$,{variant:"secondary",qaType:"claim-gift-card-pill",shape:"pill",size:"m",prefix:(0,n.jsx)(x.G,{size:"m"}),onAction:u,children:(0,c.__)`Add a gift card`}):null]})});_.displayName="PaymentMethodPreviewOrAddForm";var j=i(72740);let b=(0,o.forwardRef)((e,t)=>{let{claimGiftCardEnabled:i=!0,closePaymentModal:x,EXPERIMENTAL__parentModal:f,isDisabled:g,isPaymentModalOpen:y,openPaymentModal:b,paymentMethods:v,paymentModalDisclaimer:w,paymentText:S,requestedPaymentMethods:C,selectedPaymentMethods:k,setPaymentModalOpen:A,setSelectedPaymentMethods:E,onAddCard:T,payNow:B,accountsEnabled:P,refreshAvailablePaymentMethods:I,location:F,isLoadingPaymentMethods:N,isSelectPaymentModalOpen:O,phoneNumberField:D,onChangeCard:M,isTitleHidden:R,isFormAlwaysVisible:L,onSuccessAddCard:$,onSuccessChangeCard:W,onError:z,onGiftCardClaim:q,setSelectedPaymentMethodOpen:G,useLegacyModal:V=!1,canSelectPaymentMethod:U,EXPERIMENTAL__forcePreviewMode:H,PaymentForm:K}=e,{isOpen:Y,setOpen:X}=(0,u.V)({parent:f?[f]:void 0,replace:!0,key:p.e}),Z=(0,l.ok)(),{redirectTo:J}=(0,a.c)(),Q=(0,o.useCallback)(e=>{if(e&&U?.()===!1)return Promise.resolve();let t=Z.get(d.$);if(t){let e=new URL(t,`${window.location.origin}${window.location.pathname}`);return J({hash:e.hash,pathname:e.pathname,query:{...Object.fromEntries([...Z.entries()].filter(e=>{let[t]=e;return t!==d.$})),...Object.fromEntries([...e.searchParams.entries()])}}),Promise.resolve()}return V?Promise.resolve(G(e)):X(e)},[G,X,V,U,J,Z]),ee=(0,o.useCallback)(()=>Promise.resolve(Q(!1)),[Q]),et=(0,o.useCallback)(()=>Promise.resolve(Q(!0)),[Q]),ei=V?O:Y,en=!N&&v.some(e=>e?.__typename==="PaymentOneOffCard")&&v.every(e=>e?.__typename==="PaymentOneOffCard"),[ea,es]=(0,o.useState)(!1),er=(0,o.useRef)(!1);(0,o.useEffect)(()=>{!ea&&er.current&&(er.current=!1)},[ea]);let eo=(0,o.useCallback)(async()=>{er.current||Q(!0),await I(),es(!1)},[I,Q]),el=(0,o.useCallback)(()=>(es(!0),Q(!1),Promise.resolve()),[Q]),ed=(0,o.useCallback)(()=>(er.current=!0,el()),[el]),ec=(0,o.useCallback)(()=>(es(!1),Q(!0),Promise.resolve()),[Q]),eu=(0,o.useCallback)(async()=>{let e=await I();if(e?.result){let{availablePaymentMethods:t}=e.result,i=t?.find(e=>e?.__typename==="PaymentCardOnFile");i&&E({card:i})}},[I,E]),em=(0,o.useCallback)(async()=>{await eu(),W?.()},[eu,W]),ep=(0,o.useCallback)(async()=>{await eu(),$?.()},[eu,$]),{address:eh,paymentProvider:ex}=F||{},{countryCode:ef=""}=eh||{},{type:eg,adyenClientKey:ey}=ex||{};return(0,n.jsxs)("div",{children:[(0,n.jsxs)(s.B,{as:"div",direction:"vertical",gap:"250",unsafeStyle:{inlineSize:"100%"},children:[!R&&(0,n.jsxs)(s.B,{as:"div",direction:"vertical",gap:"50",children:[(H||!en)&&(N?(0,n.jsx)(r.E.Skeleton,{font:"header-s-semibold",width:"140px"}):(0,n.jsx)(r.E,{font:"header-s-semibold",unsafeClassName:"payment-method__title",children:(0,c.__)("Payment method")})),S?(0,n.jsx)(r.E,{font:"body-s-regular",children:S}):null]}),(H||!en)&&(0,n.jsx)(_,{ref:t,isFormAlwaysVisible:L,forcePreviewMode:H,adyenClientKey:ey,paymentProviderStr:eg,providerCountryCode:ef,onSubmitCard:T,onSuccessCardChange:ep,accountsEnabled:P,openClaimingModalUsingPill:i?ed:void 0,selectedPaymentMethods:k,setPaymentModalOpen:A,setSelectPaymentModalOpen:Q,isLoadingPaymentMethods:N,phoneNumberField:D,onError:z,PaymentForm:K})]}),eg?(0,n.jsx)(j.L,{adyenClientKey:ey,closeModal:ee,isDisabled:g,isOpen:ei&&!en,onSuccessCardChange:em,openModal:et,paymentModalDisclaimer:w,paymentsProvider:eg,providerCountryCode:ef,setOpen:Q,requestedPaymentMethods:C,payNow:B,accountsEnabled:P,setSelectedPaymentMethods:E,paymentMethods:v,openClaimGiftCardModal:i?el:void 0,onChangeCard:M,PaymentForm:K}):null,eg&&!L?(0,n.jsx)(K,{adyenClientKey:ey,paymentsProvider:eg,providerCountryCode:ef,ref:t,onSuccess:em,WrapperComponent:h.t,isOpen:y,onClose:x,onOpen:b,onSubmitCard:T,setOpen:A,paymentModalDisclaimer:w,paymentMethodInitializedFrom:"PaymentMethod"}):null,(0,n.jsx)(m.G,{isOpen:i&&ea,onClaimed:eo,onClaim:q,setOpen:es,onBack:er.current?void 0:ec,useLegacyModal:V})]})});b.displayName="PaymentMethod";let v=(0,o.forwardRef)((e,t)=>{let{closePaymentModal:i,isDepositRequired:a,isLoadingPaymentMethods:s=!1,isPaymentModalOpen:l,location:d,onAddCard:m,openPaymentModal:p,paymentMethodCard:x,paymentModalDisclaimer:f,paymentText:_,refreshAvailablePaymentMethods:b,setPaymentModalOpen:v,PaymentForm:w}=e,{closeModal:S,isOpen:C,setOpen:k,openModal:A}=(0,u.V)({key:"select-card-method",replace:!0}),E=(0,g.d)("laptop"),T=(0,o.useCallback)(async()=>{await b()},[b]);if(!d?.address?.countryCode)return null;let{address:B,paymentProvider:P}=d,{countryCode:I=""}=B||{},{type:F,adyenClientKey:N}=P||{},O=(0,o.useMemo)(()=>x?{card:{...x,__typename:"PaymentCardOnFile"},freshaAccount:null,providerAccount:null}:void 0,[x]),D=E&&!x?.brand&&F;return(0,n.jsxs)("div",{children:[(0,n.jsx)(r.E,{font:"header-s-semibold",mb:_?"50":"250",children:x&&!a?(0,c.__)("Confirm with card"):(0,c.__)("Payment method")}),_?(0,n.jsx)(r.E,{font:"body-s-regular",mb:"250",children:_}):null,s?null:D?(0,n.jsx)(w,{ref:t,adyenClientKey:N,paymentsProvider:F,providerCountryCode:I,onSubmitCard:m,onSuccess:T,isOpen:!0,paymentMethodInitializedFrom:"PaymentMethod"}):(0,n.jsx)(y.O,{selectedPaymentMethods:O,onPaymentMethodAction:()=>(x?k(!0):v(!0),Promise.resolve())}),x&&F?(0,n.jsx)(j.L,{isDisabled:!1,isOpen:C,closeModal:S,openModal:A,setOpen:k,adyenClientKey:N,paymentsProvider:F,providerCountryCode:I,onSuccessCardChange:T,paymentModalDisclaimer:f,requestedPaymentMethods:O,paymentMethods:[{...x,__typename:"PaymentCardOnFile"}],PaymentForm:w}):null,F&&!s?(0,n.jsx)(w,{adyenClientKey:N,paymentsProvider:F,providerCountryCode:I,ref:D?void 0:t,onSubmitCard:m,onSuccess:T,WrapperComponent:h.t,isOpen:l,onClose:i,onOpen:p,setOpen:v,paymentModalDisclaimer:f,paymentMethodInitializedFrom:"PaymentMethod"}):null]})});v.displayName="SinglePaymentMethod"},48197:e=>{e.exports={self:"FreshaGiftCardWarningModal_self__PpSyK",badge:"FreshaGiftCardWarningModal_badge__tD2R_",buttons:"FreshaGiftCardWarningModal_buttons__7Mcsv",legacy:"FreshaGiftCardWarningModal_legacy__Xosm7",body:"FreshaGiftCardWarningModal_body__gGQb_"}},49354:(e,t,i)=>{"use strict";i.d(t,{d:()=>u,q:()=>m});var n=i(81503),a=i(3230),s=i(14232),r=i(61016),o=i(14754),l=i(4821),d=i(95696),c=i(40439);let u=(e,t)=>(0,s.useMemo)(()=>(function(e,t){let i=e?.filter(e=>!!e)??[];if(!i.length)return;let s=t.split("."),r=i.map(e=>(0,n.J)(e.result,s)),o=i[r.reduce((e,t,i)=>t?i:e,-1)],l=r.map(e=>e?.length??0),d=r.filter(Boolean).flat();return{errors:i.flatMap((e,t)=>e.errors?.map(e=>{var i,n;return{...e,path:(i=e.path,(n=l.slice(0,t).reduce((e,t)=>e+t,0))?i?i.reduce((e,t,a)=>{if(a<e.length)return e;if(a===s.length-1)return t===s[a]?"number"==typeof i[a+1]?[...e,t,i[a+1]+n]:[...e,t]:[...i];return a<s.length&&t!==s[a]?[...i]:[...e,t]},[]):i:i?[...i]:i)}})??[]),result:o?(0,a.h)(function(e){if("function"==typeof structuredClone)try{return structuredClone(e)}catch{}try{return JSON.parse(JSON.stringify(e))}catch{return e}}(o.result),t,d):i[i.length-1].result}})(e,t),[e]);function m(e,t){let{document:i,variables:n}=e,a=(0,s.useCallback)(e=>i?(0,l.W)({document:i,variables:e.variables}):void 0,[i]),u=(0,d.X)((e,t)=>i?{document:i,variables:n(e,t)}:null),m=(0,r.Ay)(u,a,t),{isLoading:p,isValidating:h,setSize:x,size:f,data:g}=m,y=g?.[g.length-1]?.extensions;(0,s.useEffect)(()=>{if(y?.unleashImpressions&&!c.h0.get(y.unleashImpressions))for(let e of(c.h0.set(y.unleashImpressions,!0),y.unleashImpressions))(0,o.fD)(e.name,e.isEnabled?"enabled":"disabled")},[y?.unleashImpressions]);let _=(0,s.useCallback)(async()=>{h||await x(f+1)},[h,x,f]);return{...m,isLoadingMore:p||!!(f>0&&g&&void 0===g[f-1]),loadMore:_}}},49814:(e,t,i)=>{"use strict";i.d(t,{h:()=>a});var n=i(14232);let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[i,a]=(0,n.useState)(t),s=(0,n.useCallback)(()=>(a(!1),Promise.resolve()),[]),r=(0,n.useCallback)(()=>(a(!0),e?.(),Promise.resolve()),[e]);return(0,n.useMemo)(()=>({isOpen:i,onClose:s,onOpen:r,setOpen:a}),[i,s,r,a])}},54528:(e,t,i)=>{"use strict";i.d(t,{V:()=>l});var n=i(37876),a=i(78430),s=i(25798),r=i(21777),o=i.n(r);let l=e=>{let{title:t,content:i,qaType:r}=e;return(0,n.jsxs)("div",{className:o().self,children:[(0,n.jsx)(a.E,{font:"header-s-semibold",mb:"25",qaType:r?`${r}-header`:void 0,children:t}),(0,n.jsx)(a.E,{font:"body-s-regular",qaType:r?`${r}-content`:void 0,children:(0,n.jsx)(s.o,{as:"span",children:i})})]})}},54895:(e,t,i)=>{"use strict";i.d(t,{k:()=>n});let n={FACEBOOK:"facebook",GOOGLE:"google"}},56637:(e,t,i)=>{"use strict";i.d(t,{C:()=>d});var n=i(37876),a=i(64820),s=i(18577),r=i(78430),o=i(25798),l=i(21031);let d=e=>{let{isOpen:t,onOpen:i,onClose:d,setOpen:c,content:u,title:m,onAccept:p}=e;return(0,n.jsxs)(s.y,{title:m,isOpen:t,onOpen:i,onClose:d,setOpen:c,mobileHeight:"hug",qaType:"cancellation-modal",children:[(0,n.jsx)(s.y.Header,{onClose:d}),(0,n.jsx)(s.y.Body,{children:(0,n.jsx)(s.y.Body.Section,{children:(0,n.jsx)(r.E,{font:"body-s-regular",children:(0,n.jsx)(o.o,{as:"span",children:u})})})}),(0,n.jsx)(s.y.Footer,{children:(0,n.jsx)(a.$,{id:"primaryAction",variant:"primary",onAction:p,isFull:!0,qaType:"cancellation-modal-button",children:(0,l.__)("Accept and confirm")})})]})}},57804:(e,t,i)=>{"use strict";i.d(t,{Y:()=>d});var n=i(37876),a=i(60340),s=i(14083),r=i(78430),o=i(19753),l=i.n(o);let d=e=>{let{title:t,caption:i,isLoading:o}=e;return(0,n.jsx)(s.B,{gap:"200",display:"flex",as:"div",unsafeClassName:l().self,children:o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.E,{width:"100%",height:"32px"}),(0,n.jsx)(a.E,{width:"210px",height:"40px"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.E,{font:"header-m-semibold",align:"center",children:t}),i?(0,n.jsx)(r.E,{font:"body-s-regular",color:"neutralFaded",align:"center",children:i}):null]})})}},58972:(e,t,i)=>{"use strict";i.d(t,{M:()=>o,Q:()=>r});var n=i(37876),a=i(14232);let s=(0,a.createContext)(null),r=e=>{let{children:t,refetch:i,location:r,isLoading:o}=e,l=(0,a.useMemo)(()=>({location:r,refetch:i,isLoading:o}),[r,i,o]);return(0,n.jsx)(s.Provider,{value:l,children:t})};function o(){let e=(0,a.useContext)(s);if(!e)throw Error("No Location context was found");return e}},59094:e=>{e.exports={calendarIcon:"CustomerBlocked_calendarIcon__VLJae"}},59765:(e,t,i)=>{"use strict";i.d(t,{r:()=>j});var n=i(37876),a=i(28933),s=i(64820),r=i(69111),o=i(78430),l=i(14232),d=i(36249),c=i(38454),u=i(20346),m=i(4358),p=i(40439),h=i(21031),x=i(65940),f=i(3195),g=i(17024),y=i.n(g);let _=a.CCz,j=e=>{let{providerSlug:t,locationSlug:i}=e,{redirectTo:a}=(0,r.c)(),g=(0,d.ok)(),j=(0,c.Q)(),b=(0,d.a8)(),v=g.get("claim-gift")??g.get("claim_gift"),w=(0,l.useRef)(v);v&&(w.current=v);let{data:S,errors:C,isLoading:k}=(0,p.uS)(v&&(i||t)?_:null,{giftCardCode:v??"",providerSlug:t,locationSlug:i}),A=(0,l.useCallback)(()=>a({hash:j,pathname:b,query:Object.fromEntries([...g.entries()].filter(e=>{let[t]=e;return"claim-gift"!==t&&"claim_gift"!==t}))}),[j,b,a,g]),E=(0,l.useRef)(null),T=(0,x.C)({data:S?.giftCardByCode,errors:C,giftCardCode:w.current??"",isLoading:k,onClaimed:A,partScreenDialogRef:E,providerSlug:t}),[B,P]=(0,l.useState)(!1),I=(0,l.useCallback)(()=>P(!0),[]),F=T?.showSkeleton||!B;return w.current&&T?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Yf,{footer:(0,n.jsx)(s.$,{isDisabled:F,isFull:!0,onAction:T.triggerClaim,size:"l",children:(0,h.tS)("Claim gift card on visit button","Add to my account")}),isOpen:T.isOpen,setOpen:T.setOpen,ref:E,title:(0,h.__)`Here's your gift card`,children:(0,n.jsxs)("div",{className:y().self,children:[(0,n.jsx)(f.X0,{animationUrl:S?.giftCardByCode?.animationUrlLottie,className:y().self__image,imageUrl:S?.giftCardByCode?.image?.url,isAnimated:!0,onLoad:I,isLoading:k,showSkeleton:T.showSkeleton,showFreshaThemeText:!!S?.giftCardByCode?.isFreshaTheme}),(0,n.jsx)("div",{className:y().self__details,children:F?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.E.Skeleton,{font:"header-xl-bold",isAnimated:k,width:"140px"}),(0,n.jsx)(o.E.Skeleton,{font:"body-m-regular",isAnimated:k,width:"300px"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.E,{font:"header-xl-bold",children:T.giftCard?.balance?.amount.formattedShort}),(0,n.jsx)(o.E,{font:"body-m-regular",children:T.providerName?(0,h.__)("Add the gift card to your wallet, so you can use it at %{providerName} for your next appointment.",{providerName:T.providerName}):(0,h.__)`Add the gift card to your wallet, so you can use it for your next appointment.`})]})})]})}),(0,n.jsx)(m.Yf,{footer:(0,n.jsxs)("div",{className:y().self__buttons,children:[(0,n.jsx)(s.$,{isFull:!0,onAction:()=>Promise.resolve(T.setConfirmCloseOpen(!1)),size:"l",variant:"secondary",children:(0,h.__)`Go back`}),(0,n.jsx)(s.$,{isFull:!0,onAction:()=>(T.modal.setOpen(!1),T.authModal.setOpen(!1),T.setConfirmCloseOpen(!1),Promise.resolve()),size:"l",children:(0,h.tS)("Confirm close dialog","Yes, close")})]}),isOpen:T.isOpenConfirmClose,setOpen:T.setConfirmCloseOpen,title:(0,h.__)`Are you sure?`,children:(0,n.jsx)(o.E,{font:"body-s-regular",children:(0,h.__)`This gift card hasn't been claimed yet. Are you sure you want to close?`})}),(0,n.jsx)(u.Ux,{isOpen:T.isOpenAuthModal,onClose:T.closeAuthModal,onOpen:T.openAuthModal,setOpen:T.setOpen,acquisitionSource:"gift-card",claimableGiftCardCode:v??"",giftCardProviderSlug:t,disableAnimations:!0,onLogin:T.onClaimed,subtitles:T.authModalSubtitles})]}):null}},59850:(e,t,i)=>{"use strict";i.d(t,{P:()=>S,w:()=>w});var n=i(37876),a=i(36669),s=i(64572),r=i(95187),o=i(93024),l=i(67015),d=i(420),c=i(19822),u=i(60340),m=i(78430),p=i(97034),h=i(14232),x=i(14337),f=i(64820),g=i(60952),y=i(66853),_=i(49995),j=i(43277),b=i.n(j);let v=e=>{let{price:t,discount:i,isSelected:a,caption:s,title:r,selectAction:o,previewAction:u,prefix:p,className:h,style:j}=e,v=(0,d.d)("tablet");return(0,n.jsxs)(c.c,{isSelected:a,isDisabled:o.isDisabled,variant:v?"medium":"lower",onAction:v?o.onAction:void 0,unsafeClassName:(0,_.A)(b()["choice-list-item"],h),alignDividerToContent:!v||void 0,unsafeStyle:j,"aria-selected":a,qaType:"employee-tile",children:[p&&(0,n.jsx)(c.c.Prefix,{leftSection:(0,n.jsx)(g.E,{onAction:o.onAction,children:p})}),(0,n.jsx)(c.c.Content,{children:(0,n.jsx)(c.c.Row,{leftSection:(0,n.jsxs)(l.s,{direction:"column",gap:s||t||i?"150":"50",children:[(0,n.jsxs)(l.s,{direction:"column",gap:"50",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(m.E,{overflow:"ellipsis",font:"body-m-semibold",preWrap:!0,lineLimit:2,children:r}),s?(0,n.jsx)(m.E,{overflow:"ellipsis",font:"body-s-regular",color:"neutralFaded",preWrap:!0,lineLimit:2,children:s}):null]}),t||i?(0,n.jsxs)(m.E,{font:"body-s-regular",preWrap:!0,children:[t?t.formatted:null,t&&i?"  â¢  ":null,i?(0,n.jsx)(m.E,{font:"inherit",color:"positive",as:"span",children:i}):null]}):null]}),u?(0,n.jsx)(y.N,{font:"body-s-medium",variant:"quiet",onAction:u.onAction,isDisabled:u.isDisabled,text:u.label}):null]})})}),(0,n.jsx)(c.c.Suffix,{rightSection:(0,n.jsxs)("div",{className:b().suffixContainer,children:[(0,n.jsx)(f.$,{variant:"secondary",shape:"pill",isSelected:!1,unsafeClassName:(0,_.A)(b().suffixAction,b().unselectedButton,{[b().hidden]:a}),onAction:o.onAction,isDisabled:o.isDisabled,tabIndex:a?-1:void 0,"aria-hidden":a,children:o.label}),(0,n.jsx)(f.$,{variant:"secondary",shape:"circle",isSelected:!0,unsafeClassName:(0,_.A)(b().suffixAction,b().selectedButton,{[b().visible]:a}),icon:x.S,iconPosition:"left",selectedVariant:"accentFilled",isLabelHidden:!0,onAction:o.onAction,isDisabled:o.isDisabled,tabIndex:a?void 0:-1,"aria-hidden":!a,"aria-label":o.label,children:o.label})]})})]})},w=()=>{let{getOrderedAppearSequenceItemProps:e}=(0,r.y)({animationDelay:50,animationDuration:500}),t=(0,d.d)("tablet");return(0,n.jsx)(l.s,{direction:"column",gap:"150",children:(t?[135,95,198,171,218,235]:[110,123,98,121,128,135]).map((i,a)=>(0,n.jsx)("div",{...e(`CONTENT_${a}`),children:(0,n.jsxs)(c.c,{variant:"medium",unsafeClassName:b()["choice-list-item"],children:[(0,n.jsx)(c.c.Prefix,{leftSection:(0,n.jsx)(u.E,{height:"80px",width:"80px",shape:"rounded"})}),(0,n.jsx)(c.c.Content,{children:(0,n.jsx)(c.c.Row,{leftSection:(0,n.jsxs)("div",{children:[(0,n.jsx)(m.E.Skeleton,{font:"body-m-semibold",width:`${i}px`}),(0,n.jsx)(m.E.Skeleton,{font:"body-s-regular",width:`${t?.4*i:75}px`})]})})}),(0,n.jsx)(c.c.Suffix,{rightSection:(0,n.jsx)(u.E,{height:"36px",width:"77px",shape:"rounded"})})]})},`${i}px`))})},S=e=>{let{tiles:t}=e,i=(0,h.useRef)(null),c=(0,d.d)("tablet"),{getOrderedAppearSequenceItemProps:u}=(0,r.y)({animationDelay:50,animationDuration:500}),m=(0,h.useRef)(!1);return(0,h.useEffect)(()=>{if(!m.current){m.current=!0;let e=t.findIndex(e=>e.isSelected),n=i.current?.children[e];n?n.scrollIntoView({block:"center",behavior:"smooth"}):window?.scrollTo({top:0})}},[t]),(0,n.jsx)(l.s,{direction:"column",ref:i,gap:c?"150":"0",children:t.map((e,t)=>"EmployeeTileAction"===e.__typename?(0,n.jsx)(v,{price:e.price,discount:e.discount,isSelected:e.isSelected,previewAction:null,selectAction:e.selectAction,caption:e.caption,title:e.title,prefix:(0,n.jsx)(p.M,{icon:"ANY_EMPLOYEE"===e.icon?a.c:s.e,size:"3xl",variant:"accentBackground",shape:"circle"}),...u(`TILE_${t}`)},`${e.title}-${e.caption}-${e.icon}-${t}`):(0,n.jsx)(v,{price:e.price,discount:e.discount,isSelected:e.isSelected,previewAction:e.previewAction,selectAction:e.selectAction,caption:e.caption,title:e.name,prefix:(0,n.jsx)(o.a,{src:e.avatar?.url,size:"3xl",rating:e.rating??void 0,starVariant:"yellow"}),...u(`TILE_${t}`)},`${e.name}-${e.caption}-${t}`))})}},63799:e=>{e.exports={summary:"WaitlistConfirm_summary___uNDc",icon:"WaitlistConfirm_icon__WsnMx"}},65621:(e,t,i)=>{"use strict";i.d(t,{O:()=>y});var n=i(37876),a=i(70905),s=i(77118),r=i(33051),o=i(64820),l=i(15101),d=i(420),c=i(11952),u=i(60340),m=i(76168),p=i(14232),h=i(21031),x=i(33938),f=i(73222),g=i.n(f);let y=e=>{let{disabledDays:t=[],onChange:i,selectedDate:f,isLoading:y,isDisabled:_,today:j,maxDate:b}=e,[v,w]=(0,p.useState)(!1),S=(0,p.useRef)(null),C=(0,p.useRef)(null),[k,A]=(0,p.useState)(f),E=(0,d.d)("tablet"),T={isOpen:v,close:()=>{w(!1)},open:()=>{A(f),w(!0)},toggle:()=>{T.isOpen?T.close():T.open()},setOpen:w};return y?(0,n.jsx)("div",{children:(0,n.jsx)(u.E,{height:"36px",width:"52px",shape:"rounded"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.$,{shape:"pill",onAction:()=>(T.toggle(),Promise.resolve()),ref:S,variant:"secondary",icon:a.C,isDisabled:_,iconPosition:"right",isLabelHidden:!0,children:(0,h.__)("Select date from a date picker")}),(0,n.jsx)(c.A,{triggerRef:S,popoverRef:C,state:T,shape:"sheetResponsive",placement:"bottom",offset:parseInt(m.qo,10),hideHeader:E,unsafeClassName:g().popover,children:(0,n.jsx)(l.l,{formatMonthTitle:x.N0,formatWeekdayShort:x.Wj,currentDate:j,selectedDays:k,disabledDays:t,onDayClick:(e,t)=>{let{disabled:n,outside:a}=t;n||a||(A(e),i(e.toISOString().split("T")[0]),T.close())},month:k||j,qaType:"timeslot-date-picker",nextMonthButtonIconIconSlot:s.v,prevMonthButtonIconIconSlot:r.Y,toMonth:b})})]})}},65940:(e,t,i)=>{"use strict";i.d(t,{C:()=>u});var n=i(14232),a=i(33852),s=i(71421),r=i(30475),o=i(21031),l=i(49814),d=i(64449),c=i(93098);function u(e){let{data:t,errors:i,giftCardCode:u,isLoading:m,onClaimed:p,partScreenDialogRef:h,providerSlug:x,redirectTo:f}=e,g=(0,r.gy)(t),y=(0,l.h)(void 0,!!u),_=(0,l.h)(void 0,!1),j=(0,a.bQ)(),b=!!j.data?.profile,[v,w]=(0,n.useState)(!1),S=(0,n.useCallback)((e,t)=>{!t||e||w(e=>!e)},[]),C=(0,n.useCallback)(()=>Promise.resolve(S(!1,!0)),[S]),k=(0,n.useCallback)(()=>Promise.resolve(S(!0,!0)),[S]),{triggerSplash:A}=(0,s.dt)(),[E,T]=(0,n.useState)(!1),B=(0,n.useCallback)(async()=>{y.setOpen(!1),_.setOpen(!1),A({header:(0,o.tS)("Text that appears after claiming a gift card","Gift card added"),redirectTo:f}).then(()=>{p?.()}),T(!0)},[y.setOpen,p,_.setOpen,f,A]),{addErrorToast:P}=(0,d.Y)(),I=(0,n.useCallback)(e=>{P(e),R.current=!1},[P]),{claimGiftCard:F}=(0,c.W2)({onClaimed:B,onError:I,partScreenDialogRef:h,showToast:!1}),N=j.isLoading||m,O=!t||N,D=i?.find(e=>e.path?.[0]==="giftCardByCode"),M=(0,n.useRef)(void 0);(0,n.useEffect)(()=>{if(D&&D!==M.current){M.current=D;let e=D.extensions?.formattedMessage??(0,o.__)`Something went wrong, please try again later.`;y.onClose(),P(e)}},[P,D,y.onClose]);let R=(0,n.useRef)(!1),L=(0,n.useCallback)(async()=>{b?!R.current&&u&&(R.current=!0,await F(u,x)):await _.onOpen()},[_.onOpen,F,u,b,x]),$=(0,n.useRef)({identity:(0,o.__)`Log in or sign up to claim your gift card`}).current;if(!u)return null;let W=g?.provider?.name;return{authModal:_,authModalSubtitles:$,closeAuthModal:C,giftCard:g,giftCardCode:u,isOpen:!E&&y.isOpen&&!_.isOpen&&!v,isOpenAuthModal:!E&&_.isOpen&&!v,isOpenConfirmClose:!E&&v,modal:y,onClaimed:B,openAuthModal:k,providerName:W,setConfirmCloseOpen:w,setOpen:S,setOpenAuthModal:_.setOpen,showSkeleton:O,triggerClaim:L}}},68468:(e,t,i)=>{"use strict";i.d(t,{Q:()=>g,a:()=>y});var n=i(37876),a=i(64820),s=i(66853),r=i(53896),o=i(14232),l=i(36249),d=i(38454),c=i(21031),u=i(1299),m=i(60259),p=i(53244),h=i(69098),x=i(10935),f=i.n(x);function g(e){let{claimableBookingId:t,claimableGiftCardCode:i,claimGiftCardAsBuyer:n,claimableSaleId:a,claimableWaitlistToken:s,email:r,fetchClaimResult:l,fetchPaymentCard:d,giftCardProviderSlug:u,onError:x,onLogin:f}=e,g=(0,m.M)({validators:[p.y$.required({message:(0,c.__)`Password is required`})]}),{updateError:y,validate:_,value:j}=g,{login:b,isMutating:v}=(0,h.tq)({fetchClaimResult:l,fetchPaymentCard:d}),w=(0,o.useCallback)(async()=>{let e=_();if(r&&e)try{let{profile:e,result:o}=await b({bookingId:t,giftCardCode:i,claimGiftCardAsBuyer:n,giftCardProviderSlug:u,saleId:a,waitlistToken:s,email:r,password:j});if(!e)throw Error("Failed to authenticate");await f(e,o)}catch(t){if(!(t instanceof h.Qd))throw t;let{message:e}=t;y(e),x?.(e)}},[t,i,n,a,s,r,u,b,x,f,y,_,j]);return{isLoading:v,onSubmit:w,passwordField:g}}let y=e=>{let{claimableBookingId:t,claimableGiftCardCode:i,claimGiftCardAsBuyer:m,claimableSaleId:p,claimableWaitlistToken:h,email:x,fetchClaimResult:y,fetchPaymentCard:_,giftCardProviderSlug:j,onError:b,onLogin:v,setView:w,hideRequiredHint:S}=e,C=(0,u.r)(),k=(0,d.Q)(),A=(0,l.ok)(),{isLoading:E,onSubmit:T,passwordField:B}=g({claimableBookingId:t,claimableGiftCardCode:i,claimGiftCardAsBuyer:m,claimableSaleId:p,claimableWaitlistToken:h,email:x,fetchClaimResult:y,fetchPaymentCard:_,giftCardProviderSlug:j,onError:b,onLogin:v}),P=(0,o.useCallback)(async e=>{e.preventDefault(),await T()},[T]),I=(0,o.useCallback)(()=>Promise.resolve(w("reset_password")),[w]);return(0,n.jsxs)("form",{className:f().self__form,onSubmit:P,noValidate:!0,children:[(0,n.jsx)(r.s,{label:(0,c.__)`Password`,isRequired:!0,showRequiredHint:!S,error:B.error,onChange:B.onChange,onBlur:B.onBlur,name:"password",autoFocus:!0}),(0,n.jsx)("div",{children:(0,n.jsx)(s.N,{replace:!0,linkTo:{hash:k,pathname:C,search:A.toString()},onAction:I,text:(0,c.__)`Forgot password?`})}),(0,n.jsx)(a.$,{isPending:E,type:"submit",variant:"primary",size:"l",qaType:"login-continue-button",children:(0,c.__)`Continue`})]})}},68593:(e,t,i)=>{"use strict";i.d(t,{b:()=>h,N:()=>f});var n=i(37876),a=i(80020),s=i(64820),r=i(18577),o=i(14083),l=i(78430),d=i(4358),c=i(21031),u=i(48197),m=i.n(u);let p=()=>{},h=e=>{let{close:t,isOpen:i,onContinueAction:u,useLegacyModal:h=!1,PayNowButton:x}=e,f=(0,c.__)`This venue cannot accept your Fresha gift card`,g=(0,n.jsx)(s.$,{isFull:!0,onAction:t,size:"l",variant:"secondary",children:(0,c.__)`Go back`}),y=(0,n.jsx)(x,{isFull:!0,EXPERIMENTAL__onAction:u,size:"l",variant:"primary",children:(0,c.__)`Continue anyway`}),_=(0,n.jsxs)(o.B,{as:"div",direction:"vertical",gap:"100",unsafeClassName:m().body,children:[(0,n.jsx)(l.E,{font:"body-s-regular",children:(0,c.__)`Only verified venues will accept Fresha gift cards. You can still book this appointment, but you will need to pay with another method in-store.`}),(0,n.jsx)(l.E,{font:"body-s-regular",children:(0,c.Dt)((0,c.__)`All venues with the verified badge <icon></icon> can accept Fresha gift cards.`,{icon:()=>(0,n.jsx)(a.v,{unsafeClassName:m().badge,color:"accent",size:"l"})})})]});return h?(0,n.jsxs)(r.y,{title:f,isOpen:i,setOpen:p,onOpen:p,onClose:t,unsafeClassName:m().legacy,children:[(0,n.jsx)(r.y.Header,{onClose:t}),(0,n.jsx)(r.y.Body,{children:_}),(0,n.jsxs)(r.y.Footer,{children:[g,y]})]}):(0,n.jsx)(d.Yf,{footer:(0,n.jsxs)("div",{className:m().buttons,children:[g,y]}),isOpen:i,setOpen:p,title:f,className:m().self,children:_})};var x=i(14232);let f=e=>{let[t,i]=(0,x.useState)(!1),n=(0,x.useRef)(!1);return{handleWarning:(0,x.useCallback)(()=>{let t=e?.canPayWithOwnFreshaAccount===!1;return!n.current&&t?(n.current=!0,i(!0),{canContinue:!1}):(i(!1),{canContinue:!0})},[e]),isOpen:t,close:(0,x.useCallback)(()=>(i(!1),Promise.resolve()),[])}}},68803:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var n=i(25034),a=i(30475),s=i(21031),r=i(75989),o=i(35876),l=i(98693),d=i(24873);let c=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return null;let{variant:c="booking"}=i,u=(0,a.gy)(e),{host:m}=new URL(n.APP_URL),p=u.description?.split(".").at(0),h=(0,r.I)({name:u.name,address:u.address||{}}),x=u.ogImage?.url||void 0,f="all-offer"===c?(0,o.$i)(m,(0,d.x5)((0,l.JGx)(u.slug))):(0,r.N)(m,u.slug,(0,s.XG)().urlPrefix),g=new URLSearchParams(t);g.delete("cartId");let y=g.toString(),_=y?`${f}?${y}`:f;return{title:h,description:p,robots:(0,o.OP)(!!u.allowSeoIndex),canonical:f,url:_,image:x}}},69437:(e,t,i)=>{"use strict";i.d(t,{V:()=>T,Y:()=>A});var n=i(37876),a=i(28933),s=i(14337),r=i(64820),o=i(67015),l=i(66853),d=i(14083),c=i(78430),u=i(34471),m=i(95386),p=i(2982),h=i(70596),x=i(14232),f=i(36249),g=i(36878),y=i(40439),_=i(63438),j=i(21031),b=i(22771),v=i(1438),w=i(28223),S=i(57804),C=i(72996),k=i.n(C);let A=a.Y1E,E={...u.Q.animationOptions,path:h.S.ILL_ANIM_EMPTY_STATE_BACKGROUND},T=e=>{let{signInState:t,setSignInState:i}=e,{email:a}=t,[h,C]=(0,x.useState)(!1),T=(0,f.ok)(),{addToast:B}=(0,m.v)(),{trigger:P}=(0,y.$9)(A),{partnersSignInPath:I}=(0,w.K)(),F=(0,x.useCallback)(()=>{B(e=>{let{key:t,...i}=e;return(0,n.jsx)(p.y,{...i,variant:"danger",children:(0,j.__)`Failed to reset password`},t)})},[B]),N=(0,x.useCallback)(async()=>{if(!a)return void(0,v.Oz)(Error("No email defined when resetting password"),{msg:"Could not reset password as no email defined"});try{let{result:e}=await P({email:a});if(!e.resetPassword?.success)throw Error("Received non-success result from reset password mutation");C(!0)}catch(e){(0,v.Oz)(e,{msg:"Could not reset password"}),F()}},[a,P,F,C]),O=(0,x.useCallback)(()=>(i(e=>({...e,view:_.w.LOGIN})),Promise.resolve()),[i]),D=(0,n.jsxs)(o.s,{gap:"50",alignItems:"center",direction:"column",children:[(0,n.jsx)(c.E,{font:"header-xs-semibold",align:"center",children:(0,j.__)`Have a business account?`}),(0,n.jsx)(c.E,{font:"body-s-regular",color:"neutralFaded",align:"center",children:(0,j.Dt)((0,j.__)("<a>Sign in as a professional</a> to manage your business and clients",void 0),{a:e=>(0,n.jsx)(l.N,{linkTo:I({businessID:T.get("businessID")??void 0}),target:"_self",isExternal:!0,text:e})})})]});return h?(0,n.jsxs)(d.B,{gap:"300",as:"div",children:[(0,n.jsxs)(d.B,{gap:"600",as:"div",children:[(0,n.jsxs)(d.B,{gap:"400",as:"div",unsafeClassName:k().iconContainer,children:[(0,n.jsx)(u.Q,{icon:(0,n.jsx)(u.Q.Icon,{icon:s.S}),size:"3xl",background:(0,n.jsx)(g.a,{...u.Q.getBackgroundAnimationConfig("3xl"),options:E})}),(0,n.jsx)(S.Y,{title:(0,j.__)("Reset password email has been sent to %{emailAddress}.",{emailAddress:a}),caption:(0,j.__)`Please check your inbox to reset your password. If you didnât receive your email, please check your junk mail`})]}),(0,n.jsx)(r.$,{onAction:O,size:"l",isFull:!0,children:(0,j.__)`Continue to log in`})]}),D]}):(0,n.jsxs)(d.B,{gap:"300",as:"div",children:[(0,n.jsx)(S.Y,{title:(0,j.__)`Forgot password?`,caption:(0,j.Dt)((0,j.__)(`Weâll send you a secure link to create a password to <text>%{emailAddress}</text>`,{emailAddress:a}),b.d)}),(0,n.jsx)(r.$,{onAction:N,size:"l",isFull:!0,qaType:"reset-password",children:(0,j.__)`Reset password`}),D]})}},71186:(e,t,i)=>{"use strict";i.d(t,{b:()=>n});let n=e=>{let t=new URLSearchParams;for(let[i,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)null!=e&&""!==e&&t.append(i,e);else null!=n&&""!==n&&t.append(i,n);return t}},71279:e=>{e.exports={wrapper:"BookingFlowError_wrapper__Hv8qM",placeholder:"BookingFlowError_placeholder__WaA9A"}},72996:e=>{e.exports={iconContainer:"PasswordReset_iconContainer__MWHYm"}},73222:e=>{e.exports={popover:"TimeSlotDatePicker_popover__OHGsf"}},73443:e=>{e.exports={mobileSummary:"ConfirmReservation_mobileSummary__TUyPA"}},74377:(e,t,i)=>{"use strict";i.d(t,{H:()=>y});var n=i(37876),a=i(64820),s=i(21109),r=i(66853),o=i(53896),l=i(87326),d=i(51650),c=i(14232),u=i(88194),m=i(21031),p=i(56752),h=i(95696),x=i(29564),f=i(10935),g=i.n(f);let y=e=>{let{acquisitionSource:t,claimableBookingId:i,claimableGiftCardCode:f,claimGiftCardAsBuyer:y,claimableSaleId:_,claimableWaitlistToken:j,email:b,fetchClaimResult:v,fetchPaymentCard:w,giftCardProviderSlug:S,onLogin:C,onError:k,setView:A,signUpFields:E}=e,{firstNameField:T,lastNameField:B,marketingField:P,phoneNumberField:I,phoneNumberFieldProps:F,passwordField:N,setInvalidError:O,termsField:D}=E,M=(0,c.useCallback)(e=>{let t=e.find(e=>"input.email"===e.key);if(t)A("identity"),k(t.formattedMessage);else for(let{key:t,formattedMessage:i}of e)O[t]?.(i)},[k,O,A]),{register:R,isMutating:L}=(0,x.L)({fetchClaimResult:v,fetchPaymentCard:w,onInvalidError:M,onSuccess:C,onUnhandledError:k}),$=(0,h.X)(async e=>{e.preventDefault(),[D.validate(),P.validate(),T.validate(),B.validate(),N.validate(),I.validate()].every(Boolean)&&await R({acquisitionSource:t,bookingId:i,giftCardCode:f,claimGiftCardAsBuyer:y,giftCardProviderSlug:S,saleId:_,email:b,firstName:T.value,lastName:B.value,password:N.value,phone:I.value,marketingConsent:!!P.value,waitlistToken:j})});return(0,n.jsxs)("form",{className:g().self__form,noValidate:!0,onSubmit:$,children:[(0,n.jsxs)("div",{className:g()["self__row-section-desktop"],children:[(0,n.jsx)(d.A,{label:(0,m.__)`First name`,autoComplete:"given-name",name:"firstName",isRequired:!0,showRequiredHint:!0,onChange:T.onChange,value:T.value,onBlur:T.onBlur,error:T.error}),(0,n.jsx)(d.A,{label:(0,m.__)`Last name`,autoComplete:"family-name",name:"lastName",isRequired:!0,showRequiredHint:!0,onChange:B.onChange,onBlur:B.onBlur,value:B.value,error:B.error})]}),(0,n.jsx)(o.s,{label:(0,m.__)`Password`,autoComplete:"new-password",name:"password",isRequired:!0,showRequiredHint:!0,onChange:N.onChange,onBlur:N.onBlur,error:N.error}),(0,n.jsx)(l.w,{...F,label:(0,m.__)`Mobile number`,autoComplete:"tel-local",name:"phone",selectAreaCodeOptions:(0,n.jsx)(p.WW,{withEmoji:!0}),isRequired:!0,showRequiredHint:!0,error:I.error}),(0,n.jsxs)("div",{className:g()["self__terms-and-conditions"],children:[(0,n.jsx)(s.S,{label:(0,m.Dt)((0,m.__)("I agree to the <privacy_policy>Privacy Policy</privacy_policy>, <terms_of_use>Terms of Use</terms_of_use> and <terms_of_service>Terms of Service</terms_of_service>",{}),{privacy_policy:e=>(0,n.jsx)(r.N,{linkTo:u.VY,text:e,isExternal:!0},"policy"),terms_of_use:e=>(0,n.jsx)(r.N,{linkTo:u.wV,text:e,isExternal:!0},"termsOfUse"),terms_of_service:e=>(0,n.jsx)(r.N,{linkTo:u.yy,text:e,isExternal:!0},"serviceTerms")}),name:"agreement",value:D.value,isChecked:!!D.value,error:D.error,onChange:e=>D.updateValue(e?"1":""),isRequired:!0}),(0,n.jsx)(s.S,{label:(0,m.__)`I agree to receive marketing notifications with offers and news`,name:"marketing",value:P.value,isChecked:!!P.value,onChange:e=>P.updateValue(e?"1":"")})]}),(0,n.jsx)(a.$,{isFull:!0,isPending:L,size:"l",type:"submit",variant:"primary",qaType:"signup-continue-button",children:(0,m.__)`Continue`})]})}},75989:(e,t,i)=>{"use strict";i.d(t,{I:()=>o,N:()=>r});var n=i(21031),a=i(24873),s=i(98693);function r(e,t,i){return(0,s.jbV)(e,(0,a.x5)((0,s.l3k)(t),i))}function o(e){let{name:t,address:i}=e;return(0,n.__)("Make an appointment at %{location}",{location:(e=>{let{name:t,address:i}=e,n=[t,[i?.streetAddress,i?.apartmentSuite].filter(Boolean).join(" "),i?.cityName].filter(Boolean).join(" - ");return`${n} | Fresha`})({name:t,address:i})})}},77058:(e,t,i)=>{"use strict";i.d(t,{D:()=>n.D});var n=i(39848)},77710:(e,t,i)=>{"use strict";i.d(t,{t:()=>c});var n=i(14232),a=i(36249),s=i(90496),r=i(37773),o=i(24338);let l=/\*_ga\*([A-Za-z0-9+/=]+)\.?/,d=/_ga_([A-Za-z0-9]+)/;function c(e){let t=(0,a.ok)(),i=(0,s.tH)("B2C_WEB_PROVIDER_GA4_CONFIGURATION"),c=t.get("_gl"),{clientId:u,sessionId:m}=(0,n.useMemo)(()=>(function(e,t){let i,n;if(!t||!e)return{};let a=e.match(d)?.[1];if(a!==t.replace("G-",""))return{};try{let t=e.match(l)?.[1]||"";i=atob(t);let s=e.match(RegExp(`_ga_${a}\\*([A-Za-z0-9+/=]+)\\.?`))?.[1]||"",r=atob(s);if(r.includes("$")){let e=r.match(/s(\d+)/);n=e?.[1]}else n=r.split(".")[0]}catch{(0,r.Pw)(`Failed to parse _gl query parameter of ${e}`)}return{clientId:i||void 0,sessionId:n||void 0}})(c,e),[c,e]);(0,n.useEffect)(()=>{i&&e&&u&&m&&(0,o.w)("config",e,{cookie_prefix:`${e}_`,client_id:u,linker:{accept_incoming:!1},session_id:m,send_page_view:!1})},[u,i,e,m])}},78308:(e,t,i)=>{"use strict";i.d(t,{d:()=>a});var n=i(54895);let a=e=>{if(!e||0===e.length)return{providerGA4:null,facebookPixel:null};let t="",i="";for(let a of e){let{code:e,provider:s}=a||{};e&&s&&(s===n.k.GOOGLE&&e.includes("G-")&&(t=e),s===n.k.FACEBOOK&&(i=e))}return{providerGA4:t,facebookPixel:i}}},83105:e=>{e.exports={accessoryBar:"BookingFlowAccessoryBar_accessoryBar__2HmkT",accessoryBarVisible:"BookingFlowAccessoryBar_accessoryBarVisible__avo3k",accessoryBarAnimatingOut:"BookingFlowAccessoryBar_accessoryBarAnimatingOut____hYk",accessoryBarContent:"BookingFlowAccessoryBar_accessoryBarContent__Xwg9B"}},83168:e=>{e.exports={"stack-animation":"Services_stack-animation__tMRYs","lift-in":"Services_lift-in__TiqkO","fade-animation":"Services_fade-animation__N_5mr","fade-in":"Services_fade-in__0X1fV",selectionOffscreenContainer:"Services_selectionOffscreenContainer__ZHa_g",selectionOffscreenButton:"Services_selectionOffscreenButton__zb_9c",selectionOffscreenScrolling:"Services_selectionOffscreenScrolling__M_jmA",isVisibleElement:"Services_isVisibleElement__NPqv6",selectionOffscreenAbove:"Services_selectionOffscreenAbove__TadaV",selectionOffscreenBelow:"Services_selectionOffscreenBelow__MoPam",selectionOffscreenBelowWithOffset:"Services_selectionOffscreenBelowWithOffset__WOu1D",staffItem:"Services_staffItem__fYESU",offerItemsList:"Services_offerItemsList__VVjYA",offerItemsList__headerWrapper:"Services_offerItemsList__headerWrapper__aUZRr",offerItemsList__headerDescription:"Services_offerItemsList__headerDescription__ecF5t",offerItemsList__item:"Services_offerItemsList__item__7fCQi","offerItemsList__item--last":"Services_offerItemsList__item--last__vWTbc",tabsStructureAnchor:"Services_tabsStructureAnchor___8Kcq",tabsStructure:"Services_tabsStructure__Zlsje",tabsStructure__button:"Services_tabsStructure__button__Z2_HF","tabsStructure--scrolled":"Services_tabsStructure--scrolled__Jv1Ir",floatingBottomBar:"Services_floatingBottomBar__c2_Ay",content:"Services_content__h8aO4",membership:"Services_membership__pw2jN",pricing:"Services_pricing__eFlTC",upsellingSection:"Services_upsellingSection__Bc393"}},84353:e=>{e.exports={self:"BookingFlowModalLayout_self__43OTS"}},86643:(e,t,i)=>{"use strict";i.d(t,{l:()=>v});var n=i(37876),a=i(64820),s=i(90033),r=i(66853),o=i(53896),l=i(51650),d=i(49995),c=i(14232),u=i(40439),m=i(21031),p=i(1438),h=i(98693),x=i(60259),f=i(53244),g=i(705),y=i(5899),_=i(10935),j=i.n(_),b=i(68468);let v=e=>{let{claimableBookingId:t,claimableGiftCardCode:i,claimGiftCardAsBuyer:_,claimableSaleId:v,claimableWaitlistToken:w,email:S,emailStatic:C,fetchClaimResult:k,fetchPaymentCard:A,giftCardProviderSlug:E,onLogin:T,setEmail:B,setView:P}=e,I=(0,x.M)({initialValue:S,validators:[f.y$.required({message:(0,m.__)`Email is required`}),f.y$.email],validateOnChange:!1}),{validate:F}=I,N=!!C,{isLoading:O,onSubmit:D,passwordField:M}=(0,b.Q)({claimableBookingId:t,claimableGiftCardCode:i,claimGiftCardAsBuyer:_,claimableSaleId:v,claimableWaitlistToken:w,email:C??"",fetchClaimResult:k,fetchPaymentCard:A,giftCardProviderSlug:E,onLogin:T}),{trigger:R,isMutating:L}=(0,u.$9)(y.j),$=(0,c.useCallback)(async e=>{if(e.preventDefault(),N)return void await D();if(F()){B(I.value);try{let e=await R({email:I.value});e?.result&&P(e.result.lookupUserByEmail?.email?"login":"signup")}catch(e){(0,p.Oz)(e,{msg:"Error looking up user email in auth modal"})}}},[I.value,N,D,R,B,P,F]);return(0,n.jsxs)(n.Fragment,{children:[!!N&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("form",{className:(0,d.A)(j().self__form,j()["self__form--static"]),onSubmit:$,noValidate:!0,children:[(0,n.jsx)(o.s,{label:(0,m.__)`Password`,isRequired:!0,showRequiredHint:!0,error:M.error,onChange:M.onChange,onBlur:M.onBlur,name:"password"}),(0,n.jsx)(a.$,{size:"l",isFull:!0,isPending:L||O,type:"submit",qaType:"mobile-continue-button",children:(0,m.__)`Continue with email`}),(0,n.jsx)(r.N,{isExternal:!0,linkTo:{pathname:h.npz,query:{email:C,"reset-password":"true"}},target:"_blank",text:(0,m.__)`Forgot your password?`})]}),(0,n.jsx)(s.c,{children:(0,m.__)`OR`})]}),(0,n.jsx)(g.A,{claimableBookingId:t,claimableGiftCardCode:i,claimableSaleId:v,claimGiftCardAsBuyer:_,fetchClaimResult:k,fetchPaymentCard:A,giftCardProviderSlug:E,handleLogin:T}),!N&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.c,{children:(0,m.__)`OR`}),(0,n.jsxs)("form",{className:j().self__form,onSubmit:$,noValidate:!0,children:[(0,n.jsx)(l.A,{placeholder:(0,m.__)`Email address`,name:"email",isLabelHidden:!0,label:(0,m.__)`Email`,autoComplete:"email",type:"email",isRequired:!0,showRequiredHint:!0,onBlur:I.onBlur,onChange:I.onChange,value:C??I.value,error:I.error}),(0,n.jsx)(a.$,{size:"l",isFull:!0,isPending:L||O,type:"submit",qaType:"mobile-continue-button",children:(0,m.__)`Continue`})]})]})]})}},89673:(e,t,i)=>{"use strict";i.d(t,{w:()=>l});var n=i(69111),a=i(14232),s=i(36249),r=i(44223),o=i(98693);function l(){let e=(0,s.ok)().get(r.$)??void 0,{navigateTo:t}=(0,n.c)();return(0,a.useCallback)(()=>(t(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.yZL;if(!e)return{pathname:t};let i=decodeURIComponent(e);if(!/^\/[^/]/.test(i))return{pathname:t};try{let e=window.location.origin,{hash:t,pathname:n,searchParams:a}=new URL(i,e),s=[...a].reduce((e,t)=>{let[i,n]=t;return{...e,[i]:n}},{});return{pathname:n,...Object.keys(s).length?{query:s}:void 0,...t?{hash:t}:void 0}}catch{return{pathname:t}}}(e)),Promise.resolve()),[t,e])}},91002:(e,t,i)=>{"use strict";i.d(t,{z:()=>c});var n=i(37876),a=i(94622),s=i(53928),r=i(64820),o=i(72466),l=i(21031);let d="reservation-error",c=e=>{let{error:t,hasExpired:i,expireDuration:c,...u}=e,m="timeslotSelectionLink"in u?u.timeslotSelectionLink:void 0,p="timeslotSelectionOnAction"in u?u.timeslotSelectionOnAction:void 0,h="servicesSelectionLink"in u?u.servicesSelectionLink:void 0,x="servicesSelectionOnAction"in u?u.servicesSelectionOnAction:void 0;if(i)return(0,n.jsx)(o.p,{qaType:d,icon:a.x,header:(0,l.tS)("Confirmation Expired Header","Session timeout"),description:c?(0,l.__)("You didn't complete your booking within %{duration} minutes",{duration:Math.round(c/60)}):(0,l.__)("You didn't complete your booking within given time frame"),primaryAction:(0,n.jsx)(r.$,{qaType:"expired-button",size:"m",variant:"primary",linkTo:m,onAction:p,children:(0,l.tS)("Link to Time Selection Step","Try again")})});if(t){if("extensions"in t&&t.extensions){let e=t.extensions.formattedMessage,i=t.message,a=t.extensions.code;return"BAD_USER_INPUT"===a?(0,n.jsx)(o.p,{qaType:d,icon:s.B,header:(0,l.__)("An error occurred"),description:e||i,primaryAction:(0,n.jsx)(r.$,{qaType:"time-unavailable-button",size:"m",variant:"primary",linkTo:m,onAction:p,children:(0,l.tS)("Link to Time Selection Step","Select another time")})}):"UNPROCESSABLE"===a?(0,n.jsx)(o.p,{qaType:d,icon:s.B,header:(0,l.__)("An error occurred"),description:e||i,primaryAction:h||x?(0,n.jsx)(r.$,{qaType:"reservation-unprocessable-button",size:"m",variant:"primary",linkTo:h,onAction:x,children:(0,l.tS)("Link to Services Selection Step","Try again")}):void 0}):(0,n.jsx)(o.p,{qaType:d,icon:s.B,header:(0,l.__)("An error occurred"),description:e||i})}return(0,n.jsx)(o.p,{qaType:d,icon:s.B,header:(0,l.__)("An error occurred"),description:(0,l.__)("Hang tight while we try to solve the problem")})}return null}},92413:(e,t,i)=>{"use strict";i.d(t,{k:()=>m});var n=i(37876),a=i(90033),s=i(67015),r=i(19822),o=i(60340),l=i(78430),d=i(16887),c=i(38470),u=i.n(c);let m=e=>{let{_isAnimated:t=!0}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.b,{display:{default:"block",laptop:"none"},children:(0,n.jsx)("div",{className:u().self,"data-qa":"confirm-skeleton",children:(0,n.jsxs)(s.s,{direction:"vertical",gap:"500",children:[(0,n.jsx)(s.s,{direction:"vertical",unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":1},children:(0,n.jsxs)(s.s,{alignItems:"center",gap:"200",children:[(0,n.jsx)(o.E,{width:"64px",height:"64px",shape:"default",isAnimated:t,unsafeClassName:u().cardLeft}),(0,n.jsxs)(s.s,{direction:"vertical",unsafeClassName:u().cardRight,children:[(0,n.jsx)(l.E.Skeleton,{width:"120px",font:"body-s-semibold",isAnimated:t}),(0,n.jsx)(l.E.Skeleton,{width:"100%",font:"body-s-regular",isAnimated:t})]})]})}),(0,n.jsxs)(s.s,{direction:"vertical",gap:"300",children:[(0,n.jsxs)(s.s,{alignItems:"center",gap:"200",unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":1},children:[(0,n.jsx)(o.E,{width:"28px",height:"28px",shape:"default",isAnimated:t,unsafeClassName:u().cardLeft}),(0,n.jsxs)(s.s,{direction:"vertical",unsafeClassName:u().cardSmallRight,children:[(0,n.jsx)(l.E.Skeleton,{width:"120px",font:"body-s-semibold",isAnimated:t}),(0,n.jsx)(l.E.Skeleton,{width:"100%",font:"body-s-regular",isAnimated:t})]})]}),(0,n.jsx)(a.c,{unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":2}}),(0,n.jsxs)(s.s,{alignItems:"center",gap:"200",unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":3},children:[(0,n.jsx)(o.E,{width:"28px",height:"28px",shape:"default",isAnimated:t,unsafeClassName:u().cardLeft}),(0,n.jsxs)(s.s,{direction:"vertical",unsafeClassName:u().cardSmallRight,children:[(0,n.jsx)(l.E.Skeleton,{width:"120px",font:"body-s-semibold",isAnimated:t}),(0,n.jsx)(l.E.Skeleton,{width:"100%",font:"body-s-regular",isAnimated:t})]})]}),(0,n.jsx)(a.c,{unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":4}}),(0,n.jsxs)(s.s,{alignItems:"center",gap:"200",unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":5},children:[(0,n.jsx)(o.E,{width:"28px",height:"28px",shape:"default",isAnimated:t,unsafeClassName:u().cardLeft}),(0,n.jsxs)(s.s,{direction:"vertical",unsafeClassName:u().cardSmallRight,children:[(0,n.jsx)(l.E.Skeleton,{width:"120px",font:"body-s-semibold",isAnimated:t}),(0,n.jsx)(l.E.Skeleton,{width:"100%",font:"body-s-regular",isAnimated:t})]})]})]}),(0,n.jsxs)(s.s,{gap:"400",direction:"vertical",children:[(0,n.jsx)("div",{className:u()["stack-animation"],style:{"--animation-order":5},children:(0,n.jsx)(o.E,{width:"120px",height:"12px",shape:"rounded",isAnimated:t})}),(0,n.jsxs)(s.s,{gap:"250",direction:"vertical",children:[(0,n.jsxs)(s.s,{direction:"vertical",unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":5},children:[(0,n.jsxs)(s.s,{justifyContent:"space-between",children:[(0,n.jsx)(l.E.Skeleton,{width:"120px",font:"body-s-regular",isAnimated:t}),(0,n.jsx)(l.E.Skeleton,{width:"30px",font:"body-s-regular",isAnimated:t})]}),(0,n.jsx)(l.E.Skeleton,{width:"30px",font:"body-s-regular",isAnimated:t})]}),(0,n.jsx)(a.c,{unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":6}}),(0,n.jsxs)(s.s,{justifyContent:"space-between",unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":7},children:[(0,n.jsx)(l.E.Skeleton,{width:"40px",font:"body-s-regular",isAnimated:t}),(0,n.jsx)(l.E.Skeleton,{width:"40px",font:"body-s-regular",isAnimated:t})]})]})]}),(0,n.jsxs)(s.s,{gap:"150",direction:"vertical",unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":7},children:[(0,n.jsx)(o.E,{width:"80px",height:"8px",isAnimated:t}),(0,n.jsx)(r.c,{variant:"medium",children:(0,n.jsx)(r.c.Content,{children:(0,n.jsx)(r.c.Row,{leftSection:(0,n.jsx)(o.E,{width:"120px",height:"8px",shape:"rounded",isAnimated:t}),leftSectionAlignment:"center"})})})]})]})})}),(0,n.jsx)(d.b,{display:{default:"none",laptop:"block"},children:(0,n.jsx)("div",{className:u().self,"data-qa":"confirm-skeleton",children:(0,n.jsxs)(s.s,{direction:"vertical",gap:"500",children:[(0,n.jsxs)(s.s,{gap:"250",direction:"vertical",unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":1},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(l.E.Skeleton,{width:"160px",font:"header-s-semibold",isAnimated:t}),(0,n.jsx)(l.E.Skeleton,{width:"480px",font:"body-s-regular",isAnimated:t})]}),(0,n.jsxs)(s.s,{alignItems:"center",gap:"150",children:[(0,n.jsx)(o.E,{width:"56px",height:"56px",shape:"default",isAnimated:t}),(0,n.jsx)(l.E.Skeleton,{width:"160px",font:"body-s-regular",isAnimated:t})]})]}),(0,n.jsxs)(s.s,{gap:"150",direction:"vertical",children:[(0,n.jsx)("div",{className:u()["stack-animation"],style:{"--animation-order":1},children:(0,n.jsx)(o.E,{width:"80px",height:"8px",isAnimated:t})}),(0,n.jsx)(r.c,{variant:"low",unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":2},children:(0,n.jsx)(r.c.Content,{children:(0,n.jsx)(r.c.Row,{leftSection:(0,n.jsx)(o.E,{width:"120px",height:"8px",shape:"rounded",isAnimated:t}),leftSectionAlignment:"center"})})})]}),(0,n.jsxs)(s.s,{direction:"vertical",unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":3},children:[(0,n.jsx)(o.E,{width:"80px",height:"8px",shape:"rounded",isAnimated:t,mb:"200"}),(0,n.jsx)(l.E.Skeleton,{width:"100%",font:"body-s-semibold",isAnimated:t}),(0,n.jsx)(l.E.Skeleton,{width:"100%",font:"body-s-semibold",isAnimated:t}),(0,n.jsx)(l.E.Skeleton,{width:"100%",font:"body-s-semibold",isAnimated:t})]}),(0,n.jsxs)(s.s,{direction:"vertical",unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":4},children:[(0,n.jsx)(o.E,{width:"80px",height:"8px",shape:"rounded",isAnimated:t,mb:"200"}),(0,n.jsx)(l.E.Skeleton,{width:"480px",font:"body-s-semibold",isAnimated:t})]}),(0,n.jsxs)(s.s,{gap:"150",direction:"vertical",unsafeClassName:u()["stack-animation"],unsafeStyle:{"--animation-order":5},children:[(0,n.jsx)(o.E,{width:"80px",height:"8px",isAnimated:t}),(0,n.jsx)(r.c,{variant:"low",children:(0,n.jsx)(r.c.Content,{unsafeStyle:{height:"88px"},children:(0,n.jsx)(r.c.Row,{leftSection:(0,n.jsx)(o.E,{width:"120px",height:"8px",shape:"rounded",isAnimated:t}),leftSectionAlignment:"flex-start"})})})]})]})})})]})}},97272:(e,t,i)=>{"use strict";i(25034),i(16479),i(24873)},98988:e=>{e.exports={changedYourMind:"WaitlistSetup_changedYourMind__qbrGa",addTimeRangeButton:"WaitlistSetup_addTimeRangeButton__eJQsZ",calloutBanner:"WaitlistSetup_calloutBanner__lByUL"}},99032:(e,t,i)=>{"use strict";i.d(t,{H:()=>r});var n=i(37876),a=i(54535),s=i(68803);let r=e=>{let{location:t,searchParams:i,variant:r}=e,o=(0,s.Z)(t,i,{variant:r});return o?(0,n.jsx)(a.OS,{canonical:o.canonical,description:o.description,robots:o.robots,openGraph:{title:o.title,image:o.image,url:o.url},title:o.title}):null}},99545:(e,t,i)=>{"use strict";i.d(t,{Y:()=>r,E:()=>s});var n=i(27276),a=i(50447);let s=function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r){let i;try{i=JSON.parse(a.u.get("deferredProviderPixelEvents","[]"))}catch{i=[]}let n=[e,t,s];a.u.set("deferredProviderPixelEvents",JSON.stringify([...i,n]));return}let o=(0,n.G2)(),l=[];if(l.push(`id=${encodeURIComponent(e)}`),l.push(`ev=${encodeURIComponent(t)}`),l.push(`dl=${encodeURIComponent(i.g.document.location.href)}`),o&&l.push(`rl=${encodeURIComponent(o)}`),l.push("if=false"),l.push(`ts=${Date.now()}`),"object"==typeof s)for(let[e,t]of Object.entries(s))if(Array.isArray(t))if("contents"===e&&s.contents)l.push(`cd[${e}]=${encodeURIComponent(JSON.stringify(t))}`);else{let i=t.map(e=>`${e}`.replace(/^\s+|\s+$/gi,"").replace(/\s+/gi," ").replace(/,/gi,"\xa7"));l.push(`cd[${e}]=${encodeURIComponent(i.join(",").replace(/^/gi,"['").replace(/$/gi,"']").replace(/,/gi,"','").replace(/Â§/gi,","))}`)}else("string"==typeof t||"number"==typeof t)&&l.push(`cd[${e}]=${encodeURIComponent(t)}`);l.push(`v=${encodeURIComponent("2.7.19")}`);let d=Date.now(),c=i.g.document.createElement("img");c.id=`fb_${d}`,c.src=`https://www.facebook.com/tr/?${l.join("&")}`,c.width=1,c.height=1,c.style.display="none",i.g.document.body.appendChild(c),i.g.window.setTimeout(()=>{let e=i.g.document.getElementById(`fb_${d}`);e?.parentElement?.removeChild(e)},1e3)};function r(){try{let e=JSON.parse(a.u.get("deferredProviderPixelEvents"));if(Array.isArray(e))for(let[t,i,n]of e)"string"==typeof t&&"string"==typeof i&&"object"==typeof n&&s(t,i,n,!1)}catch{}finally{a.u.remove("deferredProviderPixelEvents")}}}}]);
//# sourceMappingURL=9420-2ba6849b723b5e8f.js.map