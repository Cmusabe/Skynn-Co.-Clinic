try{!function(){var e="u">typeof window?window:"u">typeof global?global:"u">typeof globalThis?globalThis:"u">typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9e2099c2-e73b-4496-8b3a-3941f5b49f78",e._sentryDebugIdIdentifier="sentry-dbid-9e2099c2-e73b-4496-8b3a-3941f5b49f78")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7934],{6073:(e,t,r)=>{r.d(t,{K:()=>a.K,Z:()=>i});var a=r(35297);function i(){return a.Z.isFacebookWebView()||a.Z.isInstagramWebView()}},7086:(e,t,r)=>{r.d(t,{j:()=>l});var a=r(14232),i=r(57289),o=r(33852),s=r(30475),n=r(57270);let l=()=>{let e=(0,o.bQ)();return(0,a.useCallback)(async t=>{let{profile:r,source:a,type:o}=t;if(r){await e.mutate({result:{profile:r},variables:e.variables},{revalidate:!1});let t=(0,s.gy)(r);(0,n.Fh)(t),i.MH.save(i.MH.TrackingDataKeys.userId,t.id),"register"===o?i.SN.onSignUp({method:a,userEmail:t.email,userPhone:t.phone?.replaceAll(/\s+/g,"")??void 0}):i.SN.onLogin({method:a})}return(0,s.gy)(r)},[e])}},7877:(e,t,r)=>{r.d(t,{n:()=>a});let a=e=>Reflect.has(e,"identityToken")},35297:(e,t,r)=>{r.d(t,{Z:()=>f,K:()=>g});var a,i,o=((a={}).ANDROID="android",a.IOS="ios",a.WEB="web",a),s=((i={}).WEBKIT="webkit",i.FACEBOOK="facebook",i.INSTAGRAM="instagram",i.SAFARI="safari",i);class n{constructor(e){this.browserDetails=e}getName(){return this.browserDetails.browserName}getVersion(){return this.browserDetails.browserVersion}isSafari(){return this.getName()===s.SAFARI}isWebkitBased(){return this.isSafari()||this.getName()===s.WEBKIT}isInstagramWebView(){return this.getName()===s.INSTAGRAM}isFacebookWebView(){return this.getName()===s.FACEBOOK}}class l{constructor(e){this.platformDetails=e}getName(){return this.platformDetails.platformName}getVersion(){return this.platformDetails.platformVersion}isMobile(){return[o.IOS,o.ANDROID].includes(this.getName())}isAndroid(){return this.getName()===o.ANDROID}isIos(){return this.getName()===o.IOS}isWeb(){return!this.isMobile()}}var d=r(39746),c=r.n(d);class u{constructor(e){this.parser=new(c())(e||"123")}getPlatformName(){let{name:e}=this.parser.getOS();switch(e?.toLowerCase()){case o.IOS:return o.IOS;case o.ANDROID:return o.ANDROID;default:return o.WEB}}getPlatformVersion(){let{version:e}=this.parser.getOS();return parseFloat(e)}getBrowserVersion(){let{version:e}=this.parser.getBrowser();return parseFloat(e)}getBrowserName(){let{name:e}=this.parser.getBrowser(),t=e?.toLowerCase();return Object.values(s).includes(t)?t:t?.includes("safari")?s.SAFARI:null}parse(){let e=this.getPlatformName(),t=e===o.WEB?void 0:this.getPlatformVersion(),r=this.getBrowserName();return{platformName:e,platformVersion:t,browserName:r,browserVersion:r?this.getBrowserVersion():void 0}}}let _={};Object.assign(_,new u(r.g.navigator?.userAgent).parse());let g=new l(_),f=new n(_)},49606:(e,t,r)=>{r.d(t,{NP:()=>a,SC:()=>o,Y:()=>i});let a="https://www.facebook.com/v5.0/dialog/oauth",i={RESERVATION:"Reservation",PAGE_VIEW:"PageView",PURCHASE:"Purchase",SCHEDULE:"Schedule",INITIATE_CHECKOUT:"InitiateCheckout",ADD_PAYMENT_INFO:"AddPaymentInfo",BOOKING_COMPLETE:"BookingComplete"},o=["en_US","ca_ES","cs_CZ","cx_PH","cy_GB","da_DK","de_DE","eu_ES","en_UD","es_LA","es_ES","gn_PY","fi_FI","fr_FR","gl_ES","hu_HU","it_IT","ja_JP","ko_KR","nb_NO","nn_NO","nl_NL","fy_NL","pl_PL","pt_BR","pt_PT","ro_RO","ru_RU","sk_SK","sl_SI","sv_SE","th_TH","tr_TR","ku_TR","zh_CN","zh_HK","zh_TW","af_ZA","sq_AL","hy_AM","az_AZ","be_BY","bn_IN","bs_BA","bg_BG","hr_HR","nl_BE","en_GB","et_EE","fo_FO","fr_CA","ka_GE","el_GR","gu_IN","hi_IN","is_IS","id_ID","ga_IE","jv_ID","kn_IN","kk_KZ","lv_LV","lt_LT","mk_MK","mg_MG","ms_MY","mt_MT","mr_IN","mn_MN","ne_NP","pa_IN","sr_RS","so_SO","sw_KE","tl_PH","ta_IN","te_IN","ml_IN","uk_UA","uz_UZ","vi_VN","km_KH","tg_TJ","ar_AR","he_IL","ur_PK","fa_IR","ps_AF","my_MM","qz_MM","or_IN","si_LK","rw_RW","cb_IQ","ha_NG","ja_KS","br_FR","tz_MA","co_FR","as_IN","ff_NG","sc_IT","sz_PL"]},69098:(e,t,r)=>{r.d(t,{Qd:()=>w,mb:()=>I,qg:()=>b,tq:()=>m});var a=r(28933),i=r(14232),o=r(3491),s=r(40439),n=r(35297),l=r(21031),d=r(23898),c=r(7877),u=r(93098),_=r(7086);let g=a.RJh,f=a.uQU,p=a.GNp;class w extends Error{}let m=function(){let{fetchClaimResult:e,fetchPaymentCard:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{trigger:r,isMutating:a}=(0,s.$9)(g,{},{async onHumanChallenge(e){let{path:t,previousResult:r,recaptchaAction:a,recaptchaToken:i,variables:s}=e;if(t?.length!==1||"claimGiftCard"!==t[0])return;let n=await (0,o.c)(u.K9,{code:s.giftCardCode,providerSlug:s.giftCardProviderSlug,asBuyer:s.claimGiftCardAsBuyer},{recaptcha:{recaptchaAction:a,recaptchaToken:i}});return{...r,data:{login:r.data.login,claimGiftCard:n.data.claimGiftCard},errors:r.errors||n.errors?[...r.errors??[],...n.errors??[]]:void 0}}}),n=(0,_.j)();return{login:(0,i.useCallback)(async a=>{let{email:i,password:o,bookingId:s,giftCardCode:d,claimGiftCardAsBuyer:c,giftCardProviderSlug:u,saleId:_,waitlistToken:g}=a,{errors:f,result:p}=await r({email:i,fetchClaimResult:e,fetchPaymentCard:t,password:o,locale:(0,l.XG)().code,claimGiftCard:!!d,claimGiftCardAsBuyer:c,giftCardCode:d??"",giftCardProviderSlug:u,claimDetails:{bookingId:s&&String(s),saleId:_&&String(_),waitlistToken:g}});if(f?.some(e=>e.extensions?.code==="UNAUTHORIZED"))throw new w((0,l.__)`Invalid password`);if(f?.length||!p.login?.user)throw new w(f?.[0]?.extensions?.formattedMessage??(0,l.__)`Unexpected error`);return{profile:await n({profile:p.login?.user,source:"email",type:"login"}),result:p}},[e,t,r,n]),isMutating:a}},h={Apple:"APPLE",Facebook:"FACEBOOK",Google:"GOOGLE"},b=function(){let{fetchClaimResult:e=!1,fetchPaymentCard:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,d.RU)(d.QC.userLandedFirstUrl)||"",a=(0,d.RU)(d.QC.externalReferrerUrl)||"",{trigger:g}=(0,s.$9)(f,{},{async onHumanChallenge(e){let{path:t,previousResult:r,recaptchaAction:a,recaptchaToken:i,variables:s}=e;if(t?.length!==1||"claimGiftCard"!==t[0])return;if(!(s.claimGiftCard&&s.giftCardCode))throw Error("Unexpected human challenge on gift card without claim");let n=await (0,o.c)(u.K9,{code:s.giftCardCode,providerSlug:s.giftCardProviderSlug,asBuyer:s.claimGiftCardAsBuyer},{recaptcha:{recaptchaAction:a,recaptchaToken:i}});return{...r,data:{loginSocial:r.data.loginSocial,claimGiftCard:n.data.claimGiftCard},errors:r.errors||n.errors?[...r.errors??[],...n.errors??[]]:void 0}}}),p=(0,_.j)();return(0,i.useCallback)(async i=>{let{sdk:o,bookingId:s,giftCardCode:d,claimGiftCardAsBuyer:u,giftCardProviderSlug:_,saleId:f,token:w,waitlistToken:m}=i;try{let i={};"Facebook"===o.idCapitalized&&n.Z.isFacebookWebView()&&(i.redirect=!0);let l=w?{token:w,user:void 0}:await o.login(i),b=(0,c.n)(l)?void 0:l.token,I=(0,c.n)(l)?l.identityToken:void 0,{errors:N,result:C}=await g({fetchClaimResult:e,fetchPaymentCard:t,provider:h[o.idCapitalized],identityToken:I,token:b,extraDetails:l.user,claimGiftCard:!!d,claimGiftCardAsBuyer:u,giftCardCode:d??"",giftCardProviderSlug:_,claimDetails:{bookingId:s&&String(s),saleId:f&&String(f),waitlistToken:m},externalReferrerUrl:a,landingPageUrl:r});if(N?.length)throw Error();return{profile:await p({profile:C.loginSocial?.user,source:o.id,type:C.loginSocial?.isFirstTimeLogin?"register":"login"}),result:C}}catch{throw Error((0,l.__)("Unable to sign in with %{socialPlatformName}",{socialPlatformName:o.idCapitalized}))}},[e,t,g,p,a,r])},I=()=>{let{trigger:e}=(0,s.$9)(p),t=(0,_.j)();return(0,i.useCallback)(async r=>{try{let{errors:a,result:i}=await e({macToken:r});if(a?.length)throw Error();return await t({profile:i.loginWithToken?.user,source:"token",type:"login"})}catch{throw Error((0,l.__)`Unable to sign in with token`)}},[t,e])}},99069:(e,t,r)=>{r.d(t,{oA:()=>p,Uw:()=>p,Ay:()=>w});var a,i=r(14232),o=r(90496),s=r(1438),n=r(6073),l=r(25034);let d=async()=>{await new Promise((e,t)=>{let a=r.g.document.getElementsByTagName("script")[0],i=r.g.document.createElement("script");i.id="apple-jssdk",i.async=!0,i.defer=!0,i.src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_GB/appleid.auth.js",i.crossOrigin="anonymous",i.onerror=t,i.onload=e,a.parentNode?.insertBefore(i,a)}),await window.AppleID?.auth.init({clientId:l.APPLE_APP_ID,redirectURI:window.location.origin,scope:"name email",responseType:"id_token",responseMode:"web_message",usePopup:!0})},c=async()=>{if(window?.AppleID?.auth){let{authorization:{id_token:e},user:t}=await window.AppleID.auth.signIn();return{token:e,user:t?.name&&{firstName:t.name.firstName,lastName:t.name.lastName}}}return Promise.reject()};var u=r(49606),_=r(21031);let g={},f=function(){let{redirect:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((e,t)=>{window.FB.getLoginStatus(r=>{"connected"===r.status?e({token:r.authResponse.accessToken}):t()})}).catch(()=>e?(()=>{let{search:e}=window.location,t=JSON.stringify({origin:`${window.location.pathname}${e}${window.location.hash||""}`}),r={client_id:l.FACEBOOK_APP_ID,response_type:"token",redirect_uri:`${window.location.origin}/facebook-auth-next`,state:t},a=Object.keys(r).map(e=>`${window.encodeURIComponent(e)}=${window.encodeURIComponent(r[e])}`).join("&");return window.location.href=`${u.NP}?${a}`,new Promise(()=>{})})():new Promise((e,t)=>{if(window.FB?.login)window.FB.login(r=>{"connected"===r.status?e({token:r.authResponse.accessToken}):t({message:"Facebook login error",status:r.status})},{scope:"public_profile,email"});else{let e=Error("Facebook SDK login not exists");(0,s.Oz)(e),t(e)}}))};var p=((a={}).LOADING="loading",a.LOADED="loaded",a.DISABLED="disabled",a);let w=()=>{let[e,t]=(0,i.useState)({id:"google",idCapitalized:"Google",login:()=>{let e=Error("Google Sign In login called before init");throw(0,s.Oz)(e),e},state:"loading"});(0,i.useEffect)(()=>{r.e(327).then(r.bind(r,90327)).then(async e=>{let{default:r}=e;try{await r.init(),t(e=>({...e,login:r.login,state:(0,n.Z)()?"disabled":"loaded"}))}catch{t(e=>({...e,state:"disabled"}))}})},[]);let[a,p]=(0,i.useState)({id:"facebook",idCapitalized:"Facebook",login:f,state:"loading"});(0,i.useEffect)(()=>{"loading"===a.state&&(async()=>{try{await function(e){let{id:t,src:r,onScriptLoad:a}=e;return g[t]?Promise.resolve():(function(e){let{id:t,src:r}=e;return new Promise((e,a)=>{let i=window.document.getElementsByTagName("script")[0],o=window.document.createElement("script");o.id=t,o.async=!0,o.src=r,o.onerror=a,o.onload=e,i.parentNode?.insertBefore(o,i)})})({id:t,src:r}).then(()=>(g[t]=!0,a(),Promise.resolve()))}({id:"facebook-jssdk",src:`//connect.facebook.net/${function(){let[e,t]=(0,_.JK)().baseName.split(/[_-]/),r=`${e}_${(t||e).toUpperCase()}`;return u.SC.includes(r)?r:u.SC.find(t=>t.startsWith(e))||e}()}/sdk.js`,onScriptLoad:()=>{window.FB.init({appId:l.FACEBOOK_APP_ID,cookie:!0,status:!0,version:"v3.3"})}}),p(e=>({...e,state:"loaded"}))}catch{p(e=>({...e,state:"disabled"}))}})()},[a]);let w=(0,o.Pl)("B2C_WEB_APPLE_SIGN_IN"),[m,h]=(0,i.useState)({id:"apple",idCapitalized:"Apple",login:c,state:w?"loading":"disabled"}),b=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{if(!w){h(e=>({...e,state:"disabled"})),b.current=!1;return}"disabled"!==m.state||b.current?"loading"!==m.state||b.current||(b.current=!0,(async()=>{try{await d(),h(e=>({...e,state:"loaded"}))}catch{h(e=>({...e,state:"disabled"}))}})()):h(e=>({...e,state:"loading"}))},[w,m.state]),(0,i.useMemo)(()=>({googleSDK:e,appleSDK:m,facebookSDK:a}),[m,a,e])}}}]);
//# sourceMappingURL=7934-08dd9c7879ee352b.js.map